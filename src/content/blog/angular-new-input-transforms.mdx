---
title: 'Angular: å±æ€§å€¤ã‹ã‚‰ã®å‹å¤‰æ›ãŒæ›¸ãã‚„ã™ããªã‚‹input transforms'
date: '2023-05-10T15:31:00.000Z'
tags:
  - 'angular'
  - 'tech'
  - 'commit note'
published: true
source: 'https://www.notion.so/Angular-input-transforms-2131694edc7e4221ad63e13b749d4fc0'
---

import LinkPreview from '../../components/features/LinkPreview.astro';

Angular v16.0 ãŒå‡ºã¦é–“ã‚‚ãªã„ãŒã€ãªã‹ãªã‹é¢ç™½ãã†ãªæ©Ÿèƒ½è¿½åŠ ãŒé€²ã‚“ã§ã„ã‚‹ã€‚

<LinkPreview src="https://github.com/angular/angular/pull/50225" />

ç«¯çš„ã«ã¯ã€æ¬¡ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ãŒæ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã¨ã—ã¦ã¯ `string` å‹ã§å—ã‘å–ã‚Šã¤ã¤ã‚‚ã€å—ã‘å–ã£ãŸå†…éƒ¨ã§ã¯ `number` å‹ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨ã—ã¦ä¿æŒã™ã‚‹ãŸã‚ã«ã€å‹å¤‰æ›ã‚’æŒŸã‚“ã§ã„ã‚‹ã€‚

```typescript
// foo.directive.ts
@Directive()
export class Foo {
  @Input({ transform: (incomingValue: string) => parseInt(incomingValue) }) value: number;
}
```

ã“ã‚Œã¨åŒæ§˜ã®ã“ã¨ã¯ã“ã‚Œã¾ã§ Setter ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨ Angular CDK ã® `coercion` ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãŒè§£æ±ºã—ã¦ããŸã€‚

```typescript
import { NumberInput, coerceNumberProperty } from '@angular/cdk/coercion';

@Directive()
export class Foo {
  #value: number;

  @Input()
  set value(v: NumberInput) {
    this.#value = coerceNumberProperty(v);
  }
}
```

<LinkPreview src="https://material.angular.io/cdk/coercion/overview" />

ãªãœã“ã®ã‚ˆã†ãªå‹å¤‰æ›ãŒå¿…è¦ã‹ã¨ã„ã†ã¨ã€HTML ã®ä»•æ§˜ä¸Šã€ `[prop]` ã¨ã„ã†ã‚ˆã†ã« `[]` ã‚’ä¼´ã‚ãªã„å±æ€§å€¤ã®æŒ‡å®šã§ã¯ã€ãã‚Œã‚’ã‚¤ãƒ³ãƒ—ãƒƒãƒˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒå—ã‘å–ã‚‹æ™‚ã« `string` ã‹ `undefined` ã«ã—ã‹ãªã‚‰ãªã„ã‹ã‚‰ã ã€‚

```html
<some [disabled]="true" /> // boolean

<some disabled="true" /> // string

<some disabled /> // undefined
```

ç‰¹ã«å•é¡Œã«ãªã‚‹ã®ã¯ `disabled` ã®ã‚ˆã†ã« boolean å‹ã®ã‚¤ãƒ³ãƒ—ãƒƒãƒˆã¨ã—ã¦ã‚‚ã‚µãƒãƒ¼ãƒˆã—ã¤ã¤ã€ãã®å±æ€§ãŒã¤ã„ã¦ã„ã‚‹ã ã‘ã§ã‚‚ `true` æ‰±ã„ã«ã™ã‚‹ã‚ˆã†ãªã€HTML æ¨™æº–ã®å±æ€§ã«æŒ¯ã‚‹èˆã„ã‚’åˆã‚ã›ã‚‹ã¨ãã ã€‚ã“ã‚Œã¯ã„ã¾ã¾ã§ã¯ CDK ã‚’ä½¿ã£ã¦æ¬¡ã®ã‚ˆã†ã«æ›¸ã„ã¦ã„ãŸã€‚

```typescript
import { BooleanInput, coerceBooleanProperty } from '@angular/cdk/coercion';

@Directive()
export class Foo {
  #disabled = false;

  @Input()
  set disabled(v: BooleanInput) {
    this.#disabled = coerceBooleanProperty(v);
  }
  get disabled() {
    return this.#disabled;
  }
}
```

ã“ã‚ŒãŒå†’é ­ã§ç´¹ä»‹ã—ãŸæ–°ã—ã„æ›¸ãæ–¹ã ã¨æ¬¡ã®ã‚ˆã†ã«æ›¸ã‘ãã†ã ã€‚

```typescript
import { BooleanInput, coerceBooleanProperty } from '@angular/cdk/coercion';

@Directive()
export class Foo {
  @Input({ transform: coerceBooleanProperty }) disabled = false;
}
```

ãŠãã‚‰ãé †å½“ã«é€²ã‚ã° v16.1 ã§å°å…¥ã•ã‚Œã‚‹ã®ã§ã¯ãªã‹ã‚ã†ã‹ï¼Ÿæ±ç”¨æ€§ã®é«˜ã„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã‚’ä½œã‚‹ä¸Šã§ã¯ãƒœã‚¤ãƒ©ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ¸›ã‚‰ã—ã¦ãã‚Œãã†ãªã®ã§ã€æœŸå¾…ã—ãŸã„ã€‚

## å‚è€ƒãƒªãƒ³ã‚¯

- Add Superpowers to your Angular Inputs ğŸ”‹ (New feature ğŸ‰) | by Enea Jahollari | May, 2023 | ITNEXT [https://itnext.io/add-superpowers-to-your-angular-inputs-new-feature-4fb89b31b6e8](https://itnext.io/add-superpowers-to-your-angular-inputs-new-feature-4fb89b31b6e8)
