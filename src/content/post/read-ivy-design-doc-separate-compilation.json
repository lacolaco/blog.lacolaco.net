{
  "pageId": "f6bcdb70-96ae-42f1-84bf-94651422e9b7",
  "lastEditedAt": "2023-12-30T10:10:00.000Z",
  "slug": "read-ivy-design-doc-separate-compilation",
  "properties": {
    "title": "DESIGN DOC (Ivy): Separate Compilationを読む",
    "date": "2018-03-03T00:00:00.000Z",
    "tags": ["Angular"]
  },
  "content": [
    {
      "type": "link_preview",
      "url": "https://github.com/angular/angular/blob/master/packages/compiler/design/separate_compilation.md"
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "日本語訳しながら ngIvy の設計を理解する。",
          "annotations": {}
        }
      ]
    },
    {
      "type": "divider"
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "読んだ。要点だけまとめると以下。",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Angular 6.0 では Ivy という新しいコンパイラが導入される",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Ivy は Angular 5.0 (Renderer2) における分離コンパイルの課題を解決できる",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Ivy コンパイラは過去の形式を“バックパッチ”して Ivy 化できるので、後方互換の問題はない",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Ivy が要求するのはコンパイル後の",
              "annotations": {}
            },
            {
              "type": "text",
              "text": ".js",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ファイルと",
              "annotations": {}
            },
            {
              "type": "text",
              "text": ".metadata.json",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ファイルだけであり、手書きやあるいはサードパーティのツールにより生成されたコードであっても区別せず同様に扱うことができる",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "かなりアツい。",
          "annotations": {}
        }
      ]
    },
    {
      "type": "divider"
    },
    {
      "type": "heading",
      "level": 1,
      "text": [
        {
          "type": "text",
          "text": "DESIGN DOC (Ivy): Separate Compilation / コンパイルの分離",
          "annotations": {}
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "AUTHOR: chuckj@",
          "annotations": {}
        }
      ]
    },
    {
      "type": "heading",
      "level": 2,
      "text": [
        {
          "type": "text",
          "text": "Background / 背景",
          "annotations": {}
        }
      ]
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "Angular 5 (Renderer2)",
          "annotations": {}
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "In 5.0 and prior versions of Angular the compiler performs whole program analysis and generates template and injector definitions that are using this global knowledge to flatten injector scope definitions, inline directives into the component, pre-calculate queries, pre-calculate content projection, etc. This global knowledge requires that module and component factories are generated as a final global step when compiling a module. If any of the transitive information changed then all factories need to be regenerated.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "バージョン 5.0 以前の Angular コンパイラは、プログラム全体の分析を行い、テンプレートとインジェクタ定義を生成します。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "それらはこのグローバルな情報 (訳注: プログラム全体の分析をして得られたメタデータのことだと思う) を、インジェクタスコープ定義の平坦化や、コンポーネント中へのディレクティブのインライン化、クエリの事前計算、コンテンツプロジェクションの事前計算、その他に利用します。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "このグローバルな情報はモジュールとコンポーネントファクトリーがモジュールのコンパイル時に最終的なグローバルのステップとして生成されていることを要求します。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "もしも何らかの推移的な情報が変更されたときには、すべてのファクトリーが再生成される必要があります。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "Separate component and module compilation is supported only at the module definition level and only from source. That is, npm packages must contain the metadata necessary to generate the factories, they cannot contain, themselves, the generated factories. This is because, if any of there dependencies change, their factories would be invalid preventing them from using version ranges in their dependencies. To support producing factories from compiled source (already translated by TypeScript into JavaScript) libraries include metadata that describe the content of the the Angular decorators.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "コンポーネントやモジュールのコンパイルの分離は、モジュール定義レベルで、ソースコード状態からのみサポートされています。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "それはつまり、npm パッケージはファクトリーを生成するためのメタデータを持つ必要があり、生成されたファクトリを含めてはいけないということです。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "なぜなら、もし依存パッケージがひとつでも変化すれば、そのファクトリーは無効になり、依存パッケージの中でバージョン範囲を使うことを防ぐからです。（訳注: ここよくわからない）",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "（すでに TypeScript から JavaScript に翻訳された）コンパイル済みのソースからファクトリを作成するためには、ライブラリは Angular デコレータの中身を記述したメタデータを含める必要があります。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "This document refers to this style of code generation as Renderer2 after the name of the renderer class it uses at runtime.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "このドキュメントではこのスタイルのコード生成をランタイムで使うレンダラークラスの名前より、Renderer2 と説明します。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "Angular Ivy",
          "annotations": {}
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "In Ivy, the runtime is crafted in a way that allows for separate compilation by performing at runtime much of what was previously pre-calculated by compiler. This allows the definition of components to change without requiring modules and components that depend on them being recompiled.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Ivy においては、ランタイムはこれまではコンパイラによって事前計算されたもののほとんどを、実行時に処理することで分離コンパイルを可能にする方法で作られています。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "これにより、コンポーネントの定義はそれに依存するモジュールやコンポーネントがリコンパイルされることを要求することなく変更できるようになります。",
              "annotations": {}
            }
          ],
          "children": [
            {
              "type": "bulleted_list",
              "items": [
                {
                  "type": "bulleted_list_item",
                  "text": [
                    {
                      "type": "text",
                      "text": "訳注: 構文が入り組んでいて難しいが、次の 2 つの合成で合っているはず",
                      "annotations": {}
                    }
                  ],
                  "children": [
                    {
                      "type": "bulleted_list",
                      "items": [
                        {
                          "type": "bulleted_list_item",
                          "text": [
                            {
                              "type": "text",
                              "text": "This allows (A) to V without B",
                              "annotations": {
                                "code": true
                              }
                            },
                            {
                              "type": "text",
                              "text": " / A が B なしに V できるようにする",
                              "annotations": {}
                            }
                          ],
                          "children": []
                        },
                        {
                          "type": "bulleted_list_item",
                          "text": [
                            {
                              "type": "text",
                              "text": "requiring A doing",
                              "annotations": {
                                "code": true
                              }
                            },
                            {
                              "type": "text",
                              "text": " / A が do することを要求する",
                              "annotations": {}
                            }
                          ],
                          "children": []
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The mental model of Ivy is that the decorator is the compiler. That is the decorator can be thought of as parameters to a class transformer that transforms the class by generating definitions based on the decorator parameters. An ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "@Component",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " decorator transforms the class by adding an ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ngComponentDef",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " static property, ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "@Directive",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " adds ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ngDirectiveDef",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": ", ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "@Pipe",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " adds ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ngPipeDef",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": ", etc. In most cases values supplied to the decorator is sufficient to generate the definition. However, in the case of interpreting the template, the compiler needs to know the selector defined for each component, directive and pipe that are in scope of the template. The purpose of this document is to define the information is needed by the compiler and how that information is is serialized to be discovered and used by subsequent calls to ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ngc",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": ".",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "この Ivy のメンタルモデルは、デコレータがコンパイラであるということです。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "それはつまり、デコレータは、デコレータのパラメータを基に定義を生成することによりクラスを変換するトランスフォーマーへのパラメータとして考えられるということです。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "@Component",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "デコレータは",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "ngComponentDef",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "静的プロパティを追加することでクラスを変換し、",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "@Directive",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "は",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "ngDirectiveDef",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "を追加し、",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "@Pipe",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "は",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "ngPipeDef",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "を追加し、その他もそうです。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "ほとんどのケースで、デコレータに与えられる値は定義を生成するために十分です。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "しかしながら、テンプレートの解釈においては、コンパイラはそのテンプレートのスコープ中にあるそれぞれのコンポーネント・ディレクティブ・パイプのために定義されたセレクターを知っている必要があります。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "このドキュメントの目的はコンパイラから必要とされる情報と、その情報が発見されその後の",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "ngc",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "の呼び出しに使われるために、どのようにシリアライズされるかを定義することです。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "This document refers to this style of code generation as ivy after the code name of the project to create it. It would be more consistent to refer to it as Renderer3 that looks too similar to Renderer2.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "このドキュメントではこのスタイルのコード生成を、それを作るプロジェクトのコードネームより、ivy と説明します。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Renderer2 とよく似ている Renderer3 として説明するほうが一貫性があるかもしれません。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "heading",
      "level": 2,
      "text": [
        {
          "type": "text",
          "text": "Information needed",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "必要な情報",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The information available across compilations in Angular 5 is represented in the compiler by a summary description. For example, components and directives are represented by the ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "CompileDirectiveSummary",
          "href": "https://github.com/angular/angular/blob/d3827a0017fd5ff5ac0f6de8a19692ce47bf91b4/packages/compiler/src/compile_metadata.ts#L257",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": ". The following table shows where this information ends up in an ivy compiled class:",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Angular 5 においてコンパイルを超えて有効な情報はコンパイラ中でサマリーの記述として表されます。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "たとえば、コンポーネントやディレクティブは",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "CompileDirectiveSummary",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "として表されます。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "以下のテーブルはこの情報が Ivy コンパイル後クラスの中で確定する場所を示します。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "CompileDirectiveSummary",
          "annotations": {
            "code": true
          }
        }
      ]
    },
    {
      "type": "table",
      "rows": [
        [
          [
            {
              "type": "text",
              "text": "field",
              "annotations": {}
            }
          ],
          [
            {
              "type": "text",
              "text": "destination",
              "annotations": {}
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "type",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "implicit",
              "annotations": {}
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "isComponent",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "ngComponentDef",
              "annotations": {
                "code": true
              }
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "selector",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "ngModuleScope",
              "annotations": {
                "code": true
              }
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "exportAs",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "ngDirectiveDef",
              "annotations": {
                "code": true
              }
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "inputs",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "ngDirectiveDef",
              "annotations": {
                "code": true
              }
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "outputs",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "ngDirectiveDef",
              "annotations": {
                "code": true
              }
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "hostListeners",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "ngDirectiveDef",
              "annotations": {
                "code": true
              }
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "hostProperties",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "ngDirectiveDef",
              "annotations": {
                "code": true
              }
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "hostAttributes",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "ngDirectiveDef",
              "annotations": {
                "code": true
              }
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "providers",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "ngInjectorDef",
              "annotations": {
                "code": true
              }
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "viewProviders",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "ngComponentDef",
              "annotations": {
                "code": true
              }
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "queries",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "ngDirectiveDef",
              "annotations": {
                "code": true
              }
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "guards",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "not used",
              "annotations": {}
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "viewQueries",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "ngComponentDef",
              "annotations": {
                "code": true
              }
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "entryComponents",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "not used",
              "annotations": {}
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "changeDetection",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "ngComponentDef",
              "annotations": {
                "code": true
              }
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "template",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "ngComponentDef",
              "annotations": {
                "code": true
              }
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "componentViewType",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "not used",
              "annotations": {}
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "renderType",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "not used",
              "annotations": {}
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "componentFactory",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "not used",
              "annotations": {}
            }
          ]
        ]
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "Only one definition is generated per class. All components are directives so a ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ngComponentDef",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " contains all the ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ngDirectiveDef",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " information. All directives are injectable so ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ngComponentDef",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " and ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ngDirectiveDef",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " contain ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ngInjectableDef",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " information.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "クラスにつきたった 1 つの定義が生成されます。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "すべてのコンポーネントはディレクティブであるため、",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "ngComponentDef",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "は",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "ngDirectiveDef",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "の情報をすべて内包します。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "すべてのディレクティブは Injectable であるため、",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "ngComponentDef",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "と",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "ngDirectiveDef",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "は",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "ngInjectableDef",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "の情報を内包します。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "For ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "CompilePipeSummary",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " the table looks like:",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "CompilePipeSummary",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "は次のテーブルのようになります。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "CompilePipeSummary",
          "annotations": {
            "code": true
          }
        }
      ]
    },
    {
      "type": "table",
      "rows": [
        [
          [
            {
              "type": "text",
              "text": "field",
              "annotations": {}
            }
          ],
          [
            {
              "type": "text",
              "text": "destination",
              "annotations": {}
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "type",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "implicit",
              "annotations": {}
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "name",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "ngModuleScope",
              "annotations": {
                "code": true
              }
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "pure",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "ngPipeDef",
              "annotations": {
                "code": true
              }
            }
          ]
        ]
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The only pieces of information that are not generated into the definition are the directive selector and the pipe name as they go into the module scope.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "定義に生成されない情報はディレクティブのセレクターとパイプの名前だけです。なぜならそれらはモジュールのスコープに入るからです。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The information needed to build an ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ngModuleScope",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " needs to be communicated from the directive and pipe to the module that declares them.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "ngModuleScope",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "を組み立てるために必要な情報はディレクティブやパイプからそれらが宣言されるモジュールへのコミュニケーションが必要になります。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "heading",
      "level": 2,
      "text": [
        {
          "type": "text",
          "text": "Metadata",
          "annotations": {}
        }
      ]
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "Angular 5",
          "annotations": {}
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "Angular 5 uses ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": ".metadata.json",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " files to store information that is directly inferred from the ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": ".ts",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " files and include value information that is not included in the ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": ".d.ts",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " file produced by TypeScript. Because only exports for types are included in ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": ".d.ts",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " files and might not include the exports necessary for values, the metadata includes export clauses from the ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": ".ts",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " file.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Angular 5 は",
              "annotations": {}
            },
            {
              "type": "text",
              "text": ".ts",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ファイルから直接推定され、TypeScript により作成される",
              "annotations": {}
            },
            {
              "type": "text",
              "text": ".d.ts",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ファイルには含まれない値の情報を保存するために",
              "annotations": {}
            },
            {
              "type": "text",
              "text": ".metadata.json",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ファイルを使います。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": ".d.ts",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ファイルには型のエクスポートだけが含まれていて、必要な値のエクスポートを含まないので、メタデータは",
              "annotations": {}
            },
            {
              "type": "text",
              "text": ".ts",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ファイルからの export 文を含みます。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "When a module is flattened into a FESM (Flat ECMAScript Module), a flat metadata file is also produced which is the metadata for all symbols exported from the module index. The metadata represents what the ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": ".metadata.json",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " file would look like if all the symbols were declared in the index instead of reexported from the index.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "モジュールが FESM に平坦化されるとき、そのモジュールのインデックスからエクスポートされるすべてのシンボルのメタデータである、フラットメタデータファイルも作成されます。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "フラットメタデータは",
              "annotations": {}
            },
            {
              "type": "text",
              "text": ".metadata.json",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ファイルがすべてのシンボルがインデックスからの再エクスポートではなくそのインデックスで宣言されているかのように表現します。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "Angular Ivy",
          "annotations": {}
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The metadata for a class in ivy is transformed to be what the metadata of the transformed .js file produced by the ivy compiler would be. For example, a component’s ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "@Component",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " is removed by the compiler and replaced by a ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ngComponentDef",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": ". The ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": ".metadata.json",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " file is similarly transformed but the content of the value assigned is elided (e.g. ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "\"ngComponentDef\": {}",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": "). The compiler doesn’t record the selector declared for a component but it is needed to produce the ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ngModuleScope",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " so the information is recorded as if a static field ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ngSelector",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " was declared on class with the value of the ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "selector",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " field from the ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "@Component",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " or ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "@Directive",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " decorator.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Ivy におけるクラスのメタデータは Ivy コンパイラにより変換された",
              "annotations": {}
            },
            {
              "type": "text",
              "text": ".js",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ファイルのメタデータになるように変換されます。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "たとえば、コンポーネントの",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "@Component",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "はコンパイラにより削除され、",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "ngComponentDef",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "に置き換えられます。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": ".metadata.json",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ファイルは同じように変換されますが、値の中身は除外されます。（例えば ",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "\"ngComponentDef\": {}",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "のように）",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "コンパイラはコンポーネントのために宣言されたセレクターを記録しませんが、",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "ngModuleScope",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "を作るために必要です。したがって、その情報は",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "ngSelector",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "静的フィールドが",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "@Component",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "あるいは",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "@Directive",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "デコレータの",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "selector",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "フィールドの値と共にクラスに宣言されているかのように記録されます。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The following transformations are performed:",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "次のような変換が実行されます。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "@Component",
          "annotations": {
            "code": true
          }
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The metadata for a component is transformed by:",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "コンポーネントのメタデータは次のように変換されます",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "numbered_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Removing the ",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "@Component",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": " directive.",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Add ",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "\"ngComponentDef\": {}",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": " static field.",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Add ",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "\"ngSelector\": <selector-value>",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": " static field.",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "@Component`ディレクティブを削除する",
              "annotations": {}
            }
          ],
          "children": [
            {
              "type": "bulleted_list",
              "items": [
                {
                  "type": "bulleted_list_item",
                  "text": [
                    {
                      "type": "text",
                      "text": "訳注: このディレクティブは多分一般的な",
                      "annotations": {}
                    },
                    {
                      "type": "text",
                      "text": "命令",
                      "annotations": {
                        "code": true
                      }
                    },
                    {
                      "type": "text",
                      "text": "くらいの意味",
                      "annotations": {}
                    }
                  ],
                  "children": []
                }
              ]
            }
          ]
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "ngComponentDef: {}",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "静的フィールドを追加する",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "“ngSelector”: ",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "`静的フィールドを追加する",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "Example",
          "annotations": {}
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "my.component.ts",
          "annotations": {
            "italic": true
          }
        }
      ]
    },
    {
      "type": "code",
      "language": "",
      "filename": "",
      "text": "@Component({\n  selector: \"my-comp\",\n  template: `\n    <h1>Hello, {{ name }}!</h1>\n  `\n})\nexport class MyComponent {\n  @Input() name: string;\n}"
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "my.component.js",
          "annotations": {
            "italic": true
          }
        }
      ]
    },
    {
      "type": "code",
      "language": "",
      "filename": "",
      "text": "export class MyComponent {\n  name: string;\n  static ngComponentDef = defineComponent({...});\n}"
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "my.component.metadata.json",
          "annotations": {
            "italic": true
          }
        }
      ]
    },
    {
      "type": "code",
      "language": "json",
      "filename": "",
      "text": "{\n  \"__symbolic\": \"module\",\n  \"version\": 4,\n  \"metadata\": {\n    \"MyComponent\": {\n      \"__symbolic\": \"class\",\n      \"statics\": {\n        \"ngComponentDef\": {},\n        \"ngSelector\": \"my-comp\"\n      }\n    }\n  }\n}"
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "Note that this is exactly what is produced if the transform had been done manually or by some other compiler before ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ngc",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " compiler is invoked. That is this model has the advantage that there is no magic introduced by the compiler as it treats classes annotated by ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "@Component",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " identically to those produced manually.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "ngc",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "コンパイラが実行されるまえに、手作業あるいは他のコンパイラによる変換が完了している場合は、正確にこのとおりに作成するように注意してください。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "それはつまり、このモデルはコンパイラによる魔法は存在せず、",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "@Component",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "により修飾されたクラスは手作業で作られたものと同一に扱われるという利点があるということです。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "@Directive",
          "annotations": {
            "code": true
          }
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The metadata for a directive is transformed by:",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "ディレクティブのメタデータは次のように変換されます",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "numbered_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Removing the ",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "@Directive",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": " directive.",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Add ",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "\"ngDirectiveDef\": {}",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": " static field.",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Add ",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "\"ngSelector\": <selector-value>",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": " static field.",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "@Directive",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ディレクティブを削除する",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "\"ngDirectiveDef\": {}",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "静的フィールドを追加する",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "\"ngSelector\": <selector-value>",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "静的フィールドを追加する",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "example",
          "annotations": {}
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "my.directive.ts",
          "annotations": {
            "italic": true
          }
        }
      ]
    },
    {
      "type": "code",
      "language": "",
      "filename": "",
      "text": "@Directive({ selector: \"[my-dir]\" })\nexport class MyDirective {\n  @HostBinding(\"id\") dirId = \"some id\";\n}"
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "my.directive.js",
          "annotations": {
            "italic": true
          }
        }
      ]
    },
    {
      "type": "code",
      "language": "",
      "filename": "",
      "text": "export class MyDirective {\n  constructor() {\n    this.dirId = 'some id';\n  }\n  static ngDirectiveDef = defineDirective({...});\n}"
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "my.directive.metadata.json",
          "annotations": {
            "italic": true
          }
        }
      ]
    },
    {
      "type": "code",
      "language": "json",
      "filename": "",
      "text": "{\n  \"__symbolic\": \"module\",\n  \"version\": 4,\n  \"metadata\": {\n    \"MyDirective\": {\n      \"__symbolic\": \"class\",\n      \"statics\": {\n        \"ngDirectiveDef\": {},\n        \"ngSelector\": \"[my-dir]\"\n      }\n    }\n  }\n}"
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "@Pipe",
          "annotations": {
            "code": true
          }
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The metadata for a pipe is transformed by:",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "パイプのメタデータは次のように変換されます",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "numbered_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Removing the ",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "@Pipe",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": " directive.",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Add ",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "\"ngPipeDef\": {}",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": " static field.",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Add ",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "\"ngSelector\": <name-value>",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": " static field.",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "@Pipe",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ディレクティブを削除する",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "\"ngPipeDef\": {}",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "静的フィールドを追加する",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "\"ngSelector\": <selector-value>",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "静的フィールドを追加する",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "example",
          "annotations": {}
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "my.pipe.ts",
          "annotations": {
            "italic": true
          }
        }
      ]
    },
    {
      "type": "code",
      "language": "",
      "filename": "",
      "text": "@Pipe({name: 'myPipe'})\nexport class MyPipe implements PipeTransform {\n  transform(...) ...\n}"
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "my.pipe.js",
          "annotations": {
            "italic": true
          }
        }
      ]
    },
    {
      "type": "code",
      "language": "",
      "filename": "",
      "text": "export class MyPipe {\n  transform(...) ...\n  static ngPipeDef = definePipe({...});\n}"
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "my.pipe.metadata.json",
          "annotations": {
            "italic": true
          }
        }
      ]
    },
    {
      "type": "code",
      "language": "json",
      "filename": "",
      "text": "{\n  \"__symbolic\": \"module\",\n  \"version\": 4,\n  \"metadata\": {\n    \"MyPipe\": {\n      \"__symbolic\": \"class\",\n      \"statics\": {\n        \"ngPipeDef\": {},\n        \"ngSelector\": \"myPipe\"\n      }\n    }\n  }\n}"
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "@NgModule",
          "annotations": {
            "code": true
          }
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The metadata for a module is transformed by:",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "モジュールのメタデータは次のように変換されます",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "numbered_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Remove the ",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "@NgModule",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": " directive.",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Add ",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "\"ngInjectorDef\": {}",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": " static field.",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Add ",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "\"ngModuleScope\": <module-scope>",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": " static field.",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "@NgModule",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ディレクティブを削除する",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "\"ngInjectorDef\": {}",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "静的フィールドを追加する",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "\"ngModuleScope\": <module-scope>",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "静的フィールドを追加する",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The scope value is an array the following type:",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "スコープの値は次のような型の配列です。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "code",
      "language": "",
      "filename": "",
      "text": "export type ModuleScope = ModuleScopeEntry[];\n\nexport interface ModuleDirectiveEntry {\n  type: Type;\n  selector: string;\n}\n\nexport interface ModulePipeEntry {\n  type: Type;\n  name: string;\n  isPipe: true;\n}\n\nexport interface ModuleExportEntry {\n  type: Type;\n  isModule: true;\n}\n\ntype ModuleScopeEntry =\n  | ModuleDirectiveEntry\n  | ModulePipeEntry\n  | ModuleExportEntry;"
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "where the ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "type",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " values are generated as references.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "example",
          "annotations": {}
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "my.module.ts",
          "annotations": {
            "italic": true
          }
        }
      ]
    },
    {
      "type": "code",
      "language": "",
      "filename": "",
      "text": "@NgModule({\n  imports: [CommonModule, UtilityModule],\n  declarations: [MyComponent, MyDirective, MyComponent],\n  exports: [MyComponent, MyDirective, MyPipe, UtilityModule],\n  providers: [\n    {\n      provide: Service,\n      useClass: ServiceImpl\n    }\n  ]\n})\nexport class MyModule {}"
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "my.module.js",
          "annotations": {
            "italic": true
          }
        }
      ]
    },
    {
      "type": "code",
      "language": "",
      "filename": "",
      "text": "export class MyModule {\n  static ngInjectorDef = defineInjector(...);\n}"
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "my.module.metadata.json",
          "annotations": {
            "italic": true
          }
        }
      ]
    },
    {
      "type": "code",
      "language": "json",
      "filename": "",
      "text": "{\n  \"__symbolic\": \"module\",\n  \"version\": 4,\n  \"metadata\": {\n    \"MyModule\": {\n      \"__symbolic\": \"class\",\n      \"statics\": {\n        \"ngInjectorDef\": {},\n        \"ngModuleScope\": [\n          {\n            \"type\": {\n              \"__symbolic\": \"reference\",\n              \"module\": \"./my.component\",\n              \"name\": \"MyComponent\"\n            },\n            \"selector\": \"my-comp\"\n          },\n          {\n            \"type\": {\n              \"__symbolic\": \"reference\",\n              \"module\": \"./my.directive\",\n              \"name\": \"MyDirective\"\n            },\n            \"selector\": \"[my-dir]\"\n          },\n          {\n            \"type\": {\n              \"__symbolic\": \"reference\",\n              \"module\": \"./my.pipe\",\n              \"name\": \"MyPipe\"\n            },\n            \"name\": \"myPipe\",\n            \"isPipe\": true\n          },\n          {\n            \"type\": {\n              \"__symbolic\": \"reference\",\n              \"module\": \"./utility.module\",\n              \"name\": \"UtilityModule\"\n            },\n            \"isModule\": true\n          }\n        ]\n      }\n    }\n  }\n}"
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "Note that this is identical to what would have been generated if the this was manually written as:",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "次のように手作業で書かれたとしても、生成されたものと同一であることが重要です。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "code",
      "language": "",
      "filename": "",
      "text": "export class MyModule {\n  static ngInjectorDef = defineInjector({\n    providers: [\n      {\n        provide: Service,\n        useClass: ServiceImpl\n      }\n    ],\n    imports: [CommonModule, UtilityModule]\n  });\n  static ngModuleScope = [\n    {\n      type: MyComponent,\n      selector: \"my-comp\"\n    },\n    {\n      type: MyDirective,\n      selector: \"[my-dir]\"\n    },\n    {\n      type: MyPipe,\n      name: \"myPipe\"\n    },\n    {\n      type: UtilityModule,\n      isModule: true\n    }\n  ];\n}"
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "except for the call to ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "defineInjector",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " would generate a ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "{ __symbolic: 'error' }",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " value which is ignored by the ivy compiler. This allows the system to ignore the difference between manually and mechanically created module definitions.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "defineInjector",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "の呼び出し以外は、Ivy コンパイラによって無視される",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "{ __symbolic: 'error' }",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "という値を生成します。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "これはこのシステムが手作業で作られたモジュール定義と機械的に作成されたモジュール定義の違いを無視できるようにします。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "heading",
      "level": 2,
      "text": [
        {
          "type": "text",
          "text": "Manual Considerations",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "手書きへの考慮",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "With this proposal, the compiler treats manually and mechanically generated Angular definitions identically. This allows flexibility not only in the future for how the declarations are mechanically produced it also allows alternative mechanism to generate declarations be easily explored without altering the compiler or dependent tool chain. It also allows third-party code generators with possibly different component syntaxes to generate a component fully understood by the compiler.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "このプロポーザルでは、コンパイラは手書きの Angular 定義と機械的に生成された Angular 定義を同一に扱います。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "これは将来的にその定義を機械的に作成する方法を柔軟にするだけでなく、定義を生成する代替のメカニズムを、コンパイラや依存するツールチェインに手を加えることなく簡単に探究できるようにします。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "また、異なるコンポーネント構文を持ったサードパーティのコード生成器が、完全にコンパイラから理解可能なコンポーネントを作成することも可能にします。",
              "annotations": {}
            }
          ],
          "children": [
            {
              "type": "bulleted_list",
              "items": [
                {
                  "type": "bulleted_list_item",
                  "text": [
                    {
                      "type": "text",
                      "text": "訳注: 多分 JSX とかのことを指している。結果として得られる js と metadata.json さえ正しければ.ts の層は自由であるということを表している",
                      "annotations": {}
                    }
                  ],
                  "children": []
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "Unfortunately, however, manually generated modules contain references to classes that might not be necessary at runtime. Manually or third-party components can get the same payload properties of an Angular generated component by annotating the ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ngSelector",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " and ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ngModuleScope",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " properties with ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "// @__BUILD_OPTIMIZER_REMOVE_",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " comment which will cause the build optimizer to remove the declaration.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "しかし残念ながら、手書きのモジュールは実行時には不要なクラスへの参照を含んでいます。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "手書き、あるいはサードパーティのコンポーネントは、",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "ngSelector",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "と",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "ngModuleScope",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "プロパティをビルドオプティマイザによる宣言の除去を起こす",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "// @__BUILD_OPTIMIZER_REMOVE_",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "コメントで修飾することで Angular が生成したコンポーネントプロパティを同じペイロードにできます。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "example",
          "annotations": {}
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "For example the above manually created module would have better payload properties by including a ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "// @__BUILD_OPTIMIZER_REMOVE_",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " comment:",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "たとえば上記の手書きされたモジュールは次のように",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "// @__BUILD_OPTIMIZER_REMOVE_",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "コメントを含むことでプロパティのペイロードを改善できます。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "code",
      "language": "",
      "filename": "",
      "text": "export class MyModule {\n  static ngInjectorDef = defineInjector({\n    providers: [\n      {\n        provide: Service,\n        useClass: ServiceImpl\n      }\n    ],\n    imports: [CommonModule, UtilityModule]\n  });\n\n  // @__BUILD_OPTIMIZER_REMOVE_\n  static ngModuleScope = [\n    {\n      type: MyComponent,\n      selector: \"my-comp\"\n    },\n    {\n      type: MyDirective,\n      selector: \"[my-dir]\"\n    },\n    {\n      type: MyPipe,\n      name: \"myPipe\"\n    },\n    {\n      type: UtilityModule,\n      isModule: true\n    }\n  ];\n}"
    },
    {
      "type": "heading",
      "level": 2,
      "text": [
        {
          "type": "text",
          "text": "ngc",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " output (non-Bazel)",
          "annotations": {}
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The cases that ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ngc",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " handle are producing an application and producing a reusable library used in an application.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "ngc",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "が扱えるケースはアプリケーションを作成することと、アプリケーションから使われる再利用可能なライブラリを作成することです。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "Application output",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "アプリケーション出力",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The output of the ivy compiler only optionally generates the factories generated by the Renderer2 style output of Angular 5.0. In ivy, the information that was generated in factories is now generated in Angular as a definition that is generated as a static field on the Angular decorated class.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Ivy コンパイラの出力はオプショナルに Angular 5 の Renderer2 形式の出力により生成されるファクトリを生成できます。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Ivy においては、ファクトリで生成された情報は Angular のなかでデコレートされたクラスの静的フィールドとして生成された定義として生成されます。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "Renderer2 requires that, when building the final application, all factories for all libraries also be generated. In ivy, the definitions are generated when the library is compiled.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "最終的なアプリケーションをビルドするとき、Renderer2 はすべてのライブラリのすべてファクトリが生成されることを要求します。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Ivy においては、ライブラリがコンパイルされるときに定義は生成されます。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The ivy compile can adapt Renderer2 target libraries by generating the factories for them and back-patching, at runtime, the static property into the class.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Ivy のコンパイルは Renderer2 をターゲットにしたライブラリをファクトリを生成し、バックパッチを行いランタイムで静的プロパティを追加することにより採用できます。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "Back-patching module (",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "\"renderer2BackPatching\"",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": ")",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "モジュールのバックパッチ (",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "\"renderer2BackPatching\"",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": ")",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "When an application contains Renderer2 target libraries the ivy definitions need to be back-patch onto the component, directive, module, pipe, and injectable classes.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "アプリケーションが Renderer2 ターゲットライブラリを含む時、Ivy 定義がそのコンポーネントやディレクティブ、モジュール、パイプ、Injectable クラス上にバックパッチされる必要があります。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "If the Angular compiler option ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "\"renderer2BackPatching\"",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " is enabled, the compiler will generate an ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "angular.back-patch",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " module in the to root output directory of the project. If ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "\"generateRenderer2Factories\"",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " is set to ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "true",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " then the default value for ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "\"renderer2BackPatching\"",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " is ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "true",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " and it is and error for it to be ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "false",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": ". ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "\"renderer2BackPatching\"",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " is ignored if ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "\"enableIvy\"",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " is ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "false",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": ".",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Angular コンパイラオプションの",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "renderer2BackPatching",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "が有効な時、コンパイラは",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "angular.back-patch",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "モジュールをプロジェクトの出力ディレクトリのルートに生成します。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "generateRenderer2Factories",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "が",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "true",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "の場合は、",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "renderer2BackPatching",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "のデフォルト値は",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "true",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "になり、",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "にするとエラーになります。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "renderer2BackPatching",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "は",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "enableIvy",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "が",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "のときは無視されます。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "angular.back-patch",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " exports a function per ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "@NgModule",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " for the entire application, including previously compiled libraries. The name of the function is determined by name of the imported module with all non alphanumeric character, including ‘",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "/",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": "’ and ‘",
          "annotations": {}
        },
        {
          "type": "text",
          "text": ".",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": "’, replaced by ‘",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "_",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": "’.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "angular.back-patch",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "はすでにコンパイルされたライブラリを含むアプリケーション全体の",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "@NgModule",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ごとに関数をエクスポートします。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "関数名はインポートされたモジュールの名前を、",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "/",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "や",
              "annotations": {}
            },
            {
              "type": "text",
              "text": ".",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "を含むアルファベットでない文字を",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "_",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "に置換して決定されます。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The back-patch functions will call the back-patch function of any module they import. This means that only the application’s module and lazy loaded modules back-patching functions needs to be called. If using the Renderer2 module factory instances, this is performed automatically when the first application module instance is created.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "バックパッチ関数はそれがインポートする他のモジュールのバックパッチ関数を呼び出します。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "これが意味するのは、アプリケーションのモジュールと、遅延ロードされるモジュールのバックパッチ関数だけを呼び出す必要があるということです。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "もし Renderer2 モジュールファクトリのインスタンスを使う場合は、これはアプリケーションの最初のモジュールのインスタンスが作られたときに自動的に機能します。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "Renderer2 Factories (",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "\"generateRenderer2Factories\"",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": ")",
          "annotations": {}
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "ngc",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " can generate an implementation of ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "NgModuleFactory",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " in the same location that Angular 5.0 would generate it. This implementation of ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "NgModuleFactory",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " will back-patch the Renderer2 style classes when the first module instance is created by calling the correct back-patching function generated in the",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "angular.back-patch",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " module.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "ngc",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "は Angular 5.0 が生成するのと同じ場所に",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "NgModuleFactory",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "の実装を生成できます。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "この",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "NgModuleFactory",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "の実装は最初のモジュールインスタンスが作られたときに、",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "angular.back-patch",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "モジュールに生成された正しいバックパッチ関数を呼び出すことにより、Renderer2 形式のクラスをバックパッチします。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "Renderer2 style factories are created when the ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "\"generateRenderer2Factories\"",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " Angular compiler option is ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "true",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": ". Setting ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "\"generateRenderer2Factories\"",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " implies ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "\"renderer2BackPatching\"",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " is also ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "true",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " and it is an error to explicitly set it to ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "false",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": ". ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "\"generateRenderer2Factories\"",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " is ignored if ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "\"enableIvy\"",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " is ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "false",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": ".",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Renderer2 形式のファクトリは",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "generateRenderer2Factories",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "Angular コンパイラオプションが",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "true",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "のときに作成されます。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "generateRenderer2Factories",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "を設定すると、",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "renderer2BackPatching",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "も暗黙的に",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "true",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "になり、明示的に",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "にするとエラーになります。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "generateRenderer2Factories",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "は",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "enavleIvy",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "が",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "のときは無視されます。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "When this option is ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "true",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " a factory module is created with the same public API at the same location as Angular 5.0 whenever Angular 5.0 would have generated a factory.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "このオプションが",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "true",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "のとき、Angular 5.0 がファクトリを生成するたびに、ファクトリのモジュールは Angular 5.0 と同じ場所に同じパブリック API で作成されます。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "Recommended options",
          "annotations": {}
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The recommended options for producing a ivy application are",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Ivy アプリケーションを作成するための推奨オプションは次のとおりです。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": []
    },
    {
      "type": "table",
      "rows": [
        [
          [
            {
              "type": "text",
              "text": "option",
              "annotations": {}
            }
          ],
          [
            {
              "type": "text",
              "text": "value",
              "annotations": {}
            }
          ],
          []
        ],
        [
          [
            {
              "type": "text",
              "text": "\"enableIvy\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "true",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "required",
              "annotations": {}
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "\"generateRenderer2Factories\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "true",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "implied",
              "annotations": {}
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "\"renderer2BackPatching\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "true",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "implied",
              "annotations": {}
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "\"generateCodeForLibraries\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "true",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "default",
              "annotations": {}
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "\"annotationsAs\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "remove",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "implied",
              "annotations": {}
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "\"enableLegacyTemplate\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "default",
              "annotations": {}
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "\"preserveWhitespaces\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "default",
              "annotations": {}
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "\"skipMetadataEmit\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "true",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "default",
              "annotations": {}
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "\"strictMetadataEmit\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "implied",
              "annotations": {}
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "\"skipTemplateCodegen\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [],
          [
            {
              "type": "text",
              "text": "ignored",
              "annotations": {}
            }
          ]
        ]
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The options marked “implied” are implied by other options having the recommended value and do not need to be explicitly set. Options marked “default” also do not need to be set explicitly.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "implied",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "と記されたオプションは他のオプションにより暗黙的に推奨される値を持つため、明示的に設定する必要はありません。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "default",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "と記されたオプションも同様に明示的に設定する必要はありません。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "heading",
      "level": 2,
      "text": [
        {
          "type": "text",
          "text": "Library output",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "ライブラリ出力",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "Building an ivy library with ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ngc",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " differs from Renderer2 in that the declarations are included in the generated output and should be included in the package published to ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "npm",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": ". The ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": ".metadata.json",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " files still need to be included but they are transformed as described below.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Ivy ライブラリを",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "ngc",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "を使ってビルドするのは、その定義が生成された出力に含まれる点と、それが",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "npm",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "に公開されるパッケージに含まれるべきであるという点で、Renderer2 と違います。 ",
              "annotations": {}
            },
            {
              "type": "text",
              "text": ".metadata.json",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ファイルはまだ同梱が必要ですが、後述のように変換されます。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "Transforming metadata",
          "annotations": {}
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "As described above, when the compiler adds the declaration to the class it will also transform the ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": ".metadata.json",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " file to reflect the new static fields added to the class.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "先述のとおり、コンパイラがクラスに宣言を追加するとき、コンパイラはクラスに追加された新しい静的フィールドを反映するように",
              "annotations": {}
            },
            {
              "type": "text",
              "text": ".metadata.json",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "も変換します。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "Once the static fields are added to the metadata, the ivy compiler no longer needs the the information in the decorator. When ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "\"enableIvy\"",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " is ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "true",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " this information is removed from the ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": ".metadata.json",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " file.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "一度静的フィールドがメタデータに追加されると、Ivy コンパイラはもうデコレータの情報を必要としません。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "enableIvy",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "が",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "true",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "であるとき、この情報は",
              "annotations": {}
            },
            {
              "type": "text",
              "text": ".metadata.json",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ファイルから削除されます。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "Recommended options",
          "annotations": {}
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The recommended options for producing a ivy library are:",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Ivy ライブラリを作成するときの推奨オプションは次のとおりです。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": []
    },
    {
      "type": "table",
      "rows": [
        [
          [
            {
              "type": "text",
              "text": "option",
              "annotations": {}
            }
          ],
          [
            {
              "type": "text",
              "text": "value",
              "annotations": {}
            }
          ],
          []
        ],
        [
          [
            {
              "type": "text",
              "text": "\"enableIvy\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "true",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "required",
              "annotations": {}
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "\"generateRenderer2Factories\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          []
        ],
        [
          [
            {
              "type": "text",
              "text": "\"renderer2BackPatching\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "default",
              "annotations": {}
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "\"generateCodeForLibraries\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          []
        ],
        [
          [
            {
              "type": "text",
              "text": "\"annotationsAs\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "remove",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "implied",
              "annotations": {}
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "\"enableLegacyTemplate\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "default",
              "annotations": {}
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "\"preserveWhitespaces\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "default",
              "annotations": {}
            }
          ]
        ],
        [
          [
            {
              "type": "text",
              "text": "\"skipMetadataEmit\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          []
        ],
        [
          [
            {
              "type": "text",
              "text": "\"strictMetadataEmit\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "true",
              "annotations": {
                "code": true
              }
            }
          ],
          []
        ],
        [
          [
            {
              "type": "text",
              "text": "\"skipTemplateCodegen\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [],
          [
            {
              "type": "text",
              "text": "ignored",
              "annotations": {}
            }
          ]
        ]
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The options marked “implied” are implied by other options having the recommended value and do not need to be explicitly set. Options marked “default” also do not need to be set explicitly.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "implied",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "と記されたオプションは他のオプションにより暗黙的に推奨される値を持つため、明示的に設定する必要はありません。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "default",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "と記されたオプションも同様に明示的に設定する必要はありません。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "heading",
      "level": 2,
      "text": [
        {
          "type": "text",
          "text": "Simplified options",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "簡略化したオプション",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The default Angular Compiler options default to, mostly, the recommended set of options but the options necessary to set for specific targets are not clear and mixing them can produce nonsensical results. The ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "\"target\"",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " option can be used to simplify the setting of the compiler options to the recommended values depending on the target:",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "デフォルトの Angular コンパイラオプションは殆どの場合、推奨されるオプションのセットですが、特定のターゲットに設定するのに必要なオプションが明確ではなく、それらを混合すると無意味な結果が生じる可能性があります。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "target",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "オプションはコンパイラオプションをターゲットに依存した推奨値に設定するのを簡略化するために利用できます。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": []
    },
    {
      "type": "table",
      "rows": [
        [
          [
            {
              "type": "text",
              "text": "target",
              "annotations": {}
            }
          ],
          [
            {
              "type": "text",
              "text": "option",
              "annotations": {}
            }
          ],
          [
            {
              "type": "text",
              "text": "value",
              "annotations": {}
            }
          ],
          []
        ],
        [
          [
            {
              "type": "text",
              "text": "\"application\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "\"generateRenderer2Factories\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "true",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "enforced",
              "annotations": {}
            }
          ]
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"renderer2BackPatching\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "true",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "enforced",
              "annotations": {}
            }
          ]
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"generateCodeForLibraries\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "true",
              "annotations": {
                "code": true
              }
            }
          ],
          []
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"annotationsAs\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "remove",
              "annotations": {
                "code": true
              }
            }
          ],
          []
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"enableLegacyTemplate\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          []
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"preserveWhitespaces\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          []
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"skipMetadataEmit\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          []
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"strictMetadataEmit\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "true",
              "annotations": {
                "code": true
              }
            }
          ],
          []
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"skipTemplateCodegen\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          []
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"fullTemplateTypeCheck\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "true",
              "annotations": {
                "code": true
              }
            }
          ],
          []
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"enableLegacyTemplate\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          []
        ],
        [[], [], [], []],
        [
          [
            {
              "type": "text",
              "text": "\"library\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "\"generateRenderer2Factories\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "enforced",
              "annotations": {}
            }
          ]
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"renderer2BackPatching\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "enforced",
              "annotations": {}
            }
          ]
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"generateCodeForLibraries\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "enforced",
              "annotations": {}
            }
          ]
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"annotationsAs\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "decorators",
              "annotations": {
                "code": true
              }
            }
          ],
          []
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"enableLegacyTemplate\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          []
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"preserveWhitespaces\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          []
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"skipMetadataEmit\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "enforced",
              "annotations": {}
            }
          ]
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"strictMetadataEmit\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "true",
              "annotations": {
                "code": true
              }
            }
          ],
          []
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"skipTemplateCodegen\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "enforced",
              "annotations": {}
            }
          ]
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"fullTemplateTypeCheck\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "true",
              "annotations": {
                "code": true
              }
            }
          ],
          []
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"enableLegacyTemplate\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          []
        ],
        [[], [], [], []],
        [
          [
            {
              "type": "text",
              "text": "\"package\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "\"flatModuleOutFile\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [],
          [
            {
              "type": "text",
              "text": "required",
              "annotations": {}
            }
          ]
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"flatModuleId\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [],
          [
            {
              "type": "text",
              "text": "required",
              "annotations": {}
            }
          ]
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"enableIvy\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "enforced",
              "annotations": {}
            }
          ]
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"generateRenderer2Factories\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "enforced",
              "annotations": {}
            }
          ]
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"renderer2BackPatching\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "enforced",
              "annotations": {}
            }
          ]
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"generateCodeForLibraries\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "enforced",
              "annotations": {}
            }
          ]
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"annotationsAs\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "remove",
              "annotations": {
                "code": true
              }
            }
          ],
          []
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"enableLegacyTemplate\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          []
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"preserveWhitespaces\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          []
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"skipMetadataEmit\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "enforced",
              "annotations": {}
            }
          ]
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"strictMetadataEmit\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "true",
              "annotations": {
                "code": true
              }
            }
          ],
          []
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"skipTemplateCodegen\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "enforced",
              "annotations": {}
            }
          ]
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"fullTemplateTypeCheck\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "true",
              "annotations": {
                "code": true
              }
            }
          ],
          []
        ],
        [
          [],
          [
            {
              "type": "text",
              "text": "\"enableLegacyTemplate\"",
              "annotations": {
                "code": true
              }
            }
          ],
          [
            {
              "type": "text",
              "text": "false",
              "annotations": {
                "code": true
              }
            }
          ],
          []
        ]
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "Options that are marked “enforced” are reported as an error if they are explicitly set to a value different from what is specified here. The options marked “required” are required to be set and an error message is displayed if no value is supplied but no default is provided.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "enforced",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "と記述されたオプションは、もし明示的に異なる値が設定されたときにエラーを報告します。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "required",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "と記述されたオプションは設定されることを要求し、もし値がなかった場合はエラーメッセージを表示します。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The purpose of the “application” target is for the options used when the ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ngc",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " invocation contains the root application module. Lazy loaded modules should also be considered “application” targets.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "application ターゲットはルートアプリケーションモジュールを含む",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "ngc",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "の実行時に使われるオプションを目的とします。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "遅延ロードされるモジュールも application ターゲットで考慮されるべきです。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The purpose of the “library” target is for are all ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ngc",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " invocations that do not contain the root application module or a lazy loaded module.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "library ターゲットはルートアプリケーションモジュールや遅延ロードモジュールを含まないすべての",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "ngc",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "の実行時に使われるオプションを目的とします。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The purpose of the “package” target is to produce a library package that will be an entry point for an npm package. Each entry point should be separately compiled using a “package” target.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "package ターゲットは npm パッケージのエントリポイントとなるライブラリパッケージを作成することを目的とします。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "それぞれのエントリポイントは package ターゲットを使って個別にコンパイルされるべきです。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "example - application",
          "annotations": {}
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "To produce a Renderer2 application the options would look like,",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Renderer2 アプリケーションを作成するためのオプションは次のようになります。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "code",
      "language": "json",
      "filename": "",
      "text": "{\n  \"compileOptions\": {\n    ...\n  },\n  \"angularCompilerOptions\": {\n    \"target\": \"application\"\n  }\n}"
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "alternately, since the recommended ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "\"application\"",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " options are the default values, the ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "\"angularCompilerOptions\"",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " can be out.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "あるいは、",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "application",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "オプションはデフォルト値なので、",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "angularCompilerOptions",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "は省略できます。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "example - library",
          "annotations": {}
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "To produce a Renderer2 library the options would look like,",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Renderer2 ライブラリを作成するためのオプションは次のようになります。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "code",
      "language": "json",
      "filename": "",
      "text": "{\n  \"compileOptions\": {\n    ...\n  },\n  \"angularCompilerOptions\": {\n    \"target\": \"library\"\n  }\n}"
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "example - package",
          "annotations": {}
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "To produce a Renderer2 package the options would look like,",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Renderer2 パッケージを作成するためのオプションは次のようになります。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "code",
      "language": "json",
      "filename": "",
      "text": "{\n  \"compileOptions\": {\n    ...\n  },\n  \"angularCompilerOptions\": {\n    \"target\": \"package\"\n  }\n}"
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "example - ivy application",
          "annotations": {}
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "To produce an ivy application the options would look like,",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Ivy アプリケーションを作成するためのオプションは次のようになります。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "code",
      "language": "json",
      "filename": "",
      "text": "{\n  \"compileOptions\": {\n    ...\n  },\n  \"angularCompilerOptions\": {\n    \"target\": \"application\",\n    \"enableIvy\": true\n  }\n}"
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "example - ivy library",
          "annotations": {}
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "To produce an ivy application the options would look like,",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Ivy アプリケーションを作成するためのオプションは次のようになります。",
              "annotations": {}
            }
          ],
          "children": [
            {
              "type": "bulleted_list",
              "items": [
                {
                  "type": "bulleted_list_item",
                  "text": [
                    {
                      "type": "text",
                      "text": "訳注: これは ivy library のはず",
                      "annotations": {}
                    }
                  ],
                  "children": []
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "https://github.com/angular/angular/pull/22579",
          "annotations": {}
        }
      ]
    },
    {
      "type": "code",
      "language": "json",
      "filename": "",
      "text": "{\n  \"compileOptions\": {\n    ...\n  },\n  \"angularCompilerOptions\": {\n    \"target\": \"library\",\n    \"enableIvy\": true\n  }\n}"
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "example - ivy package",
          "annotations": {}
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "Ivy packages are not supported in Angular 6.0 as they are not recommended in npm packages as they would only be usable if in ivy application where an ivy application. Ivy application support Renderer2 libraries so npm packages should all be Renderer2 libraries.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Ivy パッケージは Ivy アプリケーションからしか利用できず、npm パッケージとして推奨されないため、Angular 6.0 ではサポートされません。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Ivy アプリケーションは Renderer2 ライブラリをサポートするので、npm パッケージはすべて Renderer2 ライブラリであるべきです。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "heading",
      "level": 2,
      "text": [
        {
          "type": "text",
          "text": "ng_module",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " output (Bazel)",
          "annotations": {}
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ng_module",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " rule describes the source necessary to produce a Angular library that is reusable and composable into an application.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "ng_module",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": "ルールは再利用とアプリケーションへの組み込みが可能な Angular ライブラリを作成するのに必要なソースを記述します。",
          "annotations": {}
        }
      ]
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "Angular 5.0",
          "annotations": {}
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ng_module",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " rule invokes ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ngc",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": "1",
          "href": "about:blank#ngc_wrapped",
          "annotations": {}
        },
        {
          "type": "text",
          "text": " to produce the Angular output. However, ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ng_module",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " uses a feature, the ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": ".ngsummary.json",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " file, not normally used and is often difficult to configure correctly.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "ng_module",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ルールは Angular 出力をつくるために",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "ngc",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "を呼び出します。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "しかしながら、",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "ng_module",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "は普通は使われない",
              "annotations": {}
            },
            {
              "type": "text",
              "text": ".ngsummary.json",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ファイルの機能を使い、正しく設定することが難しいです。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": ".ngsummary.json",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " describes all the information that is necessary for the compiler to use a generated factory. It is produced by actions defined in the ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ng_module",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " rule and is consumed by actions defined by ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ng_module",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " rules that depend on other ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ng_module",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " rules.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": ".ngsummary.json",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "はコンパイラが生成されたファクトリを使うのに必要なすべての情報を記述します。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": ".ngsummary.json",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "は",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "ng_module",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ルールで定義されたアクションにより生成され、別の",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "ng_module",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ルールに依存する",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "ng_module",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ルールにより定義されたアクションにより使われます。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "Angular Ivy",
          "annotations": {}
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ng_module",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " rule will still use ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ngc",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " to produce the Angular output but, when producing ivy output, it no longer will need the ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": ".ngsummary.json",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " file.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "ng_module",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ルールはまだ",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "ngc",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "を Angular 出力を得るために使いますが、Ivy 出力を生成するときには、",
              "annotations": {}
            },
            {
              "type": "text",
              "text": ".ngsummary.json",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ファイルはもはや必要ありません。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "ng_experimental_ivy_srcs",
          "annotations": {
            "code": true
          }
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ng_experimental_ivy_srcs",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " can be used as use to cause the ivy versions of files to be generated. It is intended the sole dependency of a ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ts_dev_server",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " rule and the ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ts_dev_server",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " sources move to ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ng_experimental_iv_srcs",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": ".",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "ng_experimental_ivy_srcs",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "は生成されるファイルの Ivy 版を発生させる手段として利用されます。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "ts_dev_server",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ルールと",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "ts_dev_server",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ソースの依存関係が ",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "ng_experimental_iv_srcs",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "に移動することを意図しています。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "ng_module",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " ivy output",
          "annotations": {}
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ng_module",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " is able to provide the ivy version of the ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": ".js",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " files which will be generated with as ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": ".ivy.js",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " for the development sources and ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": ".ivy.closure.js",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " for the production sources.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "ng_module",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "は",
              "annotations": {}
            },
            {
              "type": "text",
              "text": ".js",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ファイルの Ivy 版を提供できます。それは開発用の",
              "annotations": {}
            },
            {
              "type": "text",
              "text": ".ivy.js",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "と、プロダクション用の",
              "annotations": {}
            },
            {
              "type": "text",
              "text": ".ivy.closure.js",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "を生成します。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ng_module",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " rule will also generate a ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "angular.back_patch.js",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " and ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": ".closure.js",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " files and a ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "module_scope.json",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " file. The type of the ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "module_scope.json",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " file will be:",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "ng_module",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ルールは",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "angular.back-patch.js",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "と",
              "annotations": {}
            },
            {
              "type": "text",
              "text": ".closure.js",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ファイル、",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "module_scope.json",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ファイルも生成します。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "module_scope.json",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ファイルの型は次のようになります。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "code",
      "language": "",
      "filename": "",
      "text": "interface ModuleScopeSummary {  [moduleName: string]: ModuleScopeEntry[];}"
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "where ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "moduleName",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " is the name of the as it would appear in an import statement in a ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": ".ts",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " file at the same relative location in the source tree. All the references in this file are also relative this location.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "moduleName",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "がある場所はソースツリーのなかで同じ相対位置の",
              "annotations": {}
            },
            {
              "type": "text",
              "text": ".ts",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ファイルの import 文に登場するような名前です。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "このファイル中のすべての参照はこの位置からの相対です。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "heading",
      "level": 3,
      "text": [
        {
          "type": "text",
          "text": "example",
          "annotations": {}
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The following is a typical Angular application build in bazel:",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "一般的な Angular アプリケーションの Bazel ビルドは次のようになります。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "src/BUILD.bazel",
          "annotations": {
            "italic": true
          }
        }
      ]
    },
    {
      "type": "code",
      "language": "",
      "filename": "",
      "text": "ng_module(\n  name = \"src\",\n  srcs = glob([\"*.ts\"]),\n  deps= [\"//common/component\"],\n)\n\nts_dev_server(\n  name = \"server\",\n  srcs = \":src\",\n)"
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "To use produce an ivy version you would add:",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Ivy 版を生成するには次のように追加します。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "code",
      "language": "",
      "filename": "",
      "text": "ng_experimental_ivy_srcs(\n  name = \"ivy_srcs\",\n  srcs = \":src\",\n)\n\nts_dev_server(\n  name = \"server_ivy\",\n  srcs = [\":ivy_srcs\"]\n)"
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "To serve the Renderer2 version, you would run:",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Renderer2 版を serve するには次のように実行します。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "code",
      "language": "",
      "filename": "",
      "text": "bazel run :server"
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "to serve the ivy version you would run",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Ivy 版を serve するには次のように実行します。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "code",
      "language": "",
      "filename": "",
      "text": "bazel run :server_ivy"
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "The ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ng_experimental_ivy_srcs",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": " rule is only needed when ivy is experimental. Once ivy is released the ",
          "annotations": {}
        },
        {
          "type": "text",
          "text": "ng_experimental_ivy_srcs",
          "annotations": {
            "code": true
          }
        },
        {
          "type": "text",
          "text": ", dependent rules, can be removed.",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "ng_experimental_ivy_srcs",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "ルールは Ivy がエクスペリメンタルである間だけ必要です。",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "Ivy がリリースされたあとは、",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "ng_experimental_ivy_srcs",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": "と依存するルールは削除できます。",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "divider"
    }
  ]
}
