{
  "pageId": "579ff1ec-a68c-4fbe-9fa6-7d7c59f1698d",
  "lastEditedAt": "2023-08-22T10:49:00.000Z",
  "slug": "vitest-in-source-testing",
  "properties": {
    "title": "Vitestã®In-source Testingã‚’è©¦ã—ã¦ã¿ãŸ",
    "date": "2023-08-22T10:23:00.000Z",
    "tags": ["æ—¥è¨˜", "Testing", "Vitest"]
  },
  "content": [
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "In-source Testingã¨ã¯ã€ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãŒå®Ÿè£…ã‚³ãƒ¼ãƒ‰ã¨åŒã˜ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ã‹ã‚Œã¦ã„ã‚‹ã‚‚ã®ã§ã‚ã‚‹ã€‚Rustã§æœ‰åãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã€‚",
          "annotations": {}
        }
      ]
    },
    {
      "type": "link_preview",
      "url": "https://doc.rust-jp.rs/book-ja/ch11-03-test-organization.html#éå…¬é–‹é–¢æ•°ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹"
    },
    {
      "type": "paragraph",
      "text": []
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "å…ˆæ—¥ã‹ã‚‰ Vitest ã‚’ä½•ã‹ã¨ä½¿ã†ã‚ˆã†ã«ãªã£ãŸãŒã€Vitestã‚‚In-source Testingã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã€‚JavaScriptã®ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«ã§ã¯çã—ã„ã®ã§ã‚„ã£ã¦ã¿ãŸã€‚èª¬æ˜ã¨ã—ã¦ã¯æ¬¡ã®è¨˜äº‹ã®ã»ã†ãŒæ–­ç„¶è©³ã—ã„ã€‚",
          "annotations": {}
        }
      ]
    },
    {
      "type": "paragraph",
      "text": []
    },
    {
      "type": "link_preview",
      "url": "https://zenn.dev/azukiazusa/articles/vitest-same-test-file"
    },
    {
      "type": "paragraph",
      "text": []
    },
    {
      "type": "code",
      "language": "typescript",
      "filename": "",
      "text": "// in-source test suites\nif (import.meta.vitest) {\n  const { describe, it, expect } = import.meta.vitest;\n  describe('buildText', () => {\n    it('without note', () => {\n      const text = buildText({\n        notionBlockId: 'blockId',\n        url: 'https://example.com',\n        title: 'example',\n      });\n      expect(text).toBe('ğŸ”– \"example\" https://example.com #laco_feed');\n    });\n\n    it('with note', () => {\n      const text = buildText({\n        notionBlockId: 'blockId',\n        url: 'https://example.com',\n        title: 'example',\n        note: 'note',\n      });\n      expect(text).toBe('note \"example\" https://example.com #laco_feed');\n    });\n  });\n}"
    },
    {
      "type": "link_preview",
      "url": "https://github.com/lacolaco/feed2social/blob/466a0e8af91da40911f0ac2ca8981fa5e3cdc34e/src/social/twitter.ts#L56-L79"
    },
    {
      "type": "paragraph",
      "text": []
    },
    {
      "type": "paragraph",
      "text": [
        {
          "type": "text",
          "text": "ç†è§£ã—ã¦ãŠãã¹ããƒã‚¤ãƒ³ãƒˆã¯ä»¥ä¸‹",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "import.meta.vitest",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": " ã®å‹å®šç¾©ã¯ tsconfig ã® ",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "types",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": " ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«æ¸¡ã—ãŸ ",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "vitest/importMeta",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": " ãŒæŒã£ã¦ã„ã‚‹ã€‚",
              "annotations": {}
            }
          ],
          "children": [
            {
              "type": "bulleted_list",
              "items": [
                {
                  "type": "bulleted_list_item",
                  "text": [
                    {
                      "type": "text",
                      "text": "https://github.com/vitest-dev/vitest/blob/main/packages/vitest/importMeta.d.ts",
                      "href": "https://github.com/vitest-dev/vitest/blob/main/packages/vitest/importMeta.d.ts",
                      "annotations": {}
                    }
                  ],
                  "children": []
                }
              ]
            }
          ]
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "ãƒ†ã‚¹ãƒˆè¨˜è¿°ç”¨ã®APIã¯æ™®é€šã®é™çš„ãªã‚¤ãƒ³ãƒãƒ¼ãƒˆã§ã¯ãªãã€ ",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "import.meta.vitest",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": " ã‹ã‚‰å–å¾—ã™ã‚‹ã€‚",
              "annotations": {}
            },
            {
              "type": "text",
              "text": "import.meta.vitest",
              "annotations": {
                "code": true
              }
            },
            {
              "type": "text",
              "text": " ãŒå®šç¾©ã•ã‚Œã¦ã„ãªã„ã¨ãã«ifæ–‡å…¨ä½“ãŒãƒ‡ãƒƒãƒ‰ã‚³ãƒ¼ãƒ‰ã¨ãªã‚‹ã“ã¨ã§ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒãƒ³ãƒ‰ãƒ«ã™ã‚‹ã¨ãã«ãƒ†ã‚¹ãƒˆé–¢é€£ã®ã‚³ãƒ¼ãƒ‰ãŒã¾ã‚‹ã”ã¨é™¤å»ã§ãã‚‹ã€‚",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    },
    {
      "type": "heading",
      "level": 2,
      "text": [
        {
          "type": "text",
          "text": "æ‰€æ„Ÿ",
          "annotations": {}
        }
      ]
    },
    {
      "type": "bulleted_list",
      "items": [
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "ãƒ†ã‚¹ãƒˆã‚’æ›¸ããŸã‚ã«ãã®é–¢æ•°ã®å¯è¦–æ€§ãŒã©ã†ã ã¨ã‹æ‚©ã‚€å¿…è¦ãŒãªã„ã®ã§ã€ã¨ã«ã‹ãã¾ãšãƒ†ã‚¹ãƒˆã‚’æ›¸ãå§‹ã‚ã‚‹ã¨ã„ã†ã“ã¨ã‚’ã‚„ã‚Šã‚„ã™ã„ã€‚",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "ãƒ†ã‚¹ãƒˆãŒå®Ÿè£…ã¨ã™ãè¿‘ãã«ã‚ã‚‹ã®ã§ã€ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã®é–‹ç™ºã‚¹ã‚¿ã‚¤ãƒ«ã«ã¯ç‰¹ã«å‘ã„ã¦ã„ã‚‹ã¨æ€ã†ã€‚",
              "annotations": {}
            }
          ],
          "children": []
        },
        {
          "type": "bulleted_list_item",
          "text": [
            {
              "type": "text",
              "text": "å½“ç„¶ã ãŒãƒ•ã‚¡ã‚¤ãƒ«ãŒå¤§ãããªã‚Šã‚„ã™ã„ãŒã€å®Ÿè£…ãŒå¢—ãˆãŸã«ã—ã‚ãƒ†ã‚¹ãƒˆãŒå¢—ãˆãŸã«ã—ã‚ãã‚Œã¯ã¤ã¾ã‚Šãã®ãƒ•ã‚¡ã‚¤ãƒ«ã®é–¢å¿ƒäº‹ãŒå¢—ãˆã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ãªã®ã§ã€é–¢å¿ƒã‚’åˆ†é›¢ã—ã‚ã¨ã„ã†ã“ã¨ã«ãªã‚‹ã€‚ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãŒã©ã‚“ã©ã‚“å¤§ãããªã£ã¦ã„ãã®ã¯è¦‹é€ƒã•ã‚Œã‚„ã™ã„ã®ã§ã€å®Ÿè£…ã¨åŒã˜ãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚ã‚‹ã“ã¨ã§ã€Œé©åˆ‡ã«å›°ã‚‹ã€ã“ã¨ãŒã§ããã†ã ã€‚",
              "annotations": {}
            }
          ],
          "children": []
        }
      ]
    }
  ]
}
