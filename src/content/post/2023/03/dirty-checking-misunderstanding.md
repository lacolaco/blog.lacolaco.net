---
title: 'Dirty Checkingã¸ã®èª¤è§£'
slug: 'dirty-checking-misunderstanding'
icon: 'ğŸ’¬'
created_time: '2023-03-12T02:00:00.000Z'
last_edited_time: '2023-12-30T10:05:00.000Z'
category: 'Tech'
tags:
  - 'Angular'
published: true
locale: 'ja'
notion_url: 'https://www.notion.so/Dirty-Checking-92bf97dd802c4b39b7527a50b5875273'
features:
  katex: false
  mermaid: false
  tweet: false
---

Angular ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã‚„å¤‰æ›´æ¤œçŸ¥ãªã©ã®æ–‡è„ˆã§ â€œDirty Checkingâ€ ã¨ã„ã†ç”¨èªã¯ã‚ˆãã§ã¦ãã‚‹ãŒã€ã“ã‚ŒãŒèª¤ã£ã¦ç†è§£ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ãªãƒ–ãƒ­ã‚°è¨˜äº‹ã‚„ç™ºè¨€ã‚’ç›®ã«ã™ã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚ã¤ã¾ã‚Šã€ã€Œæ±šã„æ–¹æ³•ã§ã®å¤‰æ›´æ¤œçŸ¥ã€ã¨ã„ã†æ„å‘³ã§èª­ã¾ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‚‹ãŒã€ã“ã‚Œã¯å®Œå…¨ã«é–“é•ã£ã¦ã„ã‚‹ã€‚

â€œDirty Checkingâ€ ã¨ã¯ã€ã‚ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®çŠ¶æ…‹ãŒ â€œDirtyâ€ ã§ã‚ã‚‹ã®ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã“ã¨ã§ã‚ã‚‹ã€‚ã“ã®æ–‡è„ˆã§ã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ â€œPristineâ€ ã¨â€œDirtyâ€ ã®ã©ã¡ã‚‰ã‹ã®çŠ¶æ…‹ã‚’æŒã¤ã¨è€ƒãˆã‚‹ã€‚â€Pristineâ€ï¼ˆæ‰‹ã¤ã‹ãšã®ï¼‰ã¨ã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒä½•è€…ã«ã‚ˆã£ã¦ã‚‚æ‰‹ã‚’åŠ ãˆã‚‰ã‚Œã¦ãŠã‚‰ãšäº‹å‰çŠ¶æ…‹ã‹ã‚‰å¤‰ã‚ã£ã¦ã„ãªã„ã“ã¨ã‚’ç¤ºã™ã€‚é€†ã« â€œDirtyâ€ ã¨ã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒä½•è€…ã‹ã«ã‚ˆã£ã¦æ‰‹ã‚’åŠ ãˆã‚‰ã‚Œã¦äº‹å‰çŠ¶æ…‹ã‹ã‚‰å¤‰åŒ–ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¤ºã™ã€‚

Angularã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã¯ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ãŒå¤‰æ›´ã•ã‚ŒãŸã“ã¨ã‚’æ¤œçŸ¥ã—ã¦å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹ãŒã€ã“ã‚Œã¯è¨€ã„ã‹ãˆã‚Œã°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒDirtyã«ãªã£ãŸã“ã¨ã‚’æ¤œçŸ¥ã—ã¦ã„ã‚‹ã€‚Dirtyãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ¤œçŸ¥ã™ã‚‹ã¨ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å‡¦ç†ãŒå®Ÿè¡Œã•ã‚Œã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ãƒ“ãƒ¥ãƒ¼ã‚’åŒæœŸã—ãŸã‚ã¨ã«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’Pristineã«æˆ»ã™ã€‚ã“ã‚Œã‚’ç¹°ã‚Šè¿”ã—ã¦ã„ã‚‹ã€‚

`ChangeDetectorRef.markForCheck()` ã¨ã„ã†APIã¯ã“ã®ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã‚’è±¡å¾´ã—ã¦ã„ã‚‹ã€‚å‘¼ã³å‡ºã—å…ƒã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ˜ç¤ºçš„ã«DirtyçŠ¶æ…‹ã«é·ç§»ã•ã›ã¦ã€å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®å¿…è¦ãŒã‚ã‚‹ã“ã¨ã‚’ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«ä¼ãˆã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

https://angular.io/api/core/ChangeDetectorRef#markforcheck

> Components are normally marked as dirty (in need of rerendering) when inputs have changed or events have fired in the view. Call this method to ensure that a component is checked even if these triggers have not occurred.

åŒæ§˜ã«ã€Angularã®ãƒ•ã‚©ãƒ¼ãƒ APIã«ãŠã„ã¦ã‚‚å„ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãŒDirtyã¨Pristineã®çŠ¶æ…‹ã‚’æŒã¤ã€‚åŒã˜ç©ºæ–‡å­—åˆ—ã§ã‚ã£ã¦ã‚‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã¾ã è§¦ã‚Œã¦ã„ãªã„çŠ¶æ…‹ã‹ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè§¦ã‚ŒãŸä¸Šã§ã®ç©ºãªã®ã‹ã¯æ„å‘³ãŒç•°ãªã‚‹ã€‚ã“ã®æ–‡è„ˆã§ã‚‚ `FormControl.markAsDirty()` ã¨`FormControl.markAsPristine()` ã¨ã„ã†APIãŒã‚ã‚‹ã€‚Dirty/Pristineã¨ã„ã†çŠ¶æ…‹æ¦‚å¿µã¯Angularã®æ–‡è„ˆã®ãªã‹ã§ä¸€è²«ã—ãŸåŸºç¤çš„ãªç”¨èªã§ã‚ã‚‹ã¨ã„ãˆã‚‹ã€‚

ã—ãŸãŒã£ã¦ã€å°‘ãªãã¨ã‚‚Angularã®æ–‡è„ˆã«ãŠã„ã¦ â€Dirty Checkingâ€ ã¨ã„ã†ã®ã¯å¤‰æ›´æ¤œçŸ¥ã®æ–¹æ³•ãŒ â€Dirtyâ€ ã§ã‚ã‚‹ã¨ã„ã†æ„å‘³ã§ã¯ã¾ã£ãŸããªãã€â€Dirtyâ€ ã‹ã©ã†ã‹ã‚’æ¤œçŸ¥ã™ã‚‹ã¨ã„ã†æ„å‘³ä»¥å¤–ã«è§£é‡ˆã®ä½™åœ°ã¯ãªã„ã€‚
