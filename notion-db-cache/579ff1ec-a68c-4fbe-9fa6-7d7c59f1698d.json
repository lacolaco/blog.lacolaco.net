[{"object":"block","id":"383ca891-0f94-49e0-a295-61492065a47b","parent":{"type":"page_id","page_id":"579ff1ec-a68c-4fbe-9fa6-7d7c59f1698d"},"created_time":"2023-08-22T10:24:00.000Z","last_edited_time":"2023-08-22T10:32:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"In-source Testingとは、テストコードが実装コードと同じソースファイルに書かれているものである。Rustで有名なアプローチ。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"In-source Testingとは、テストコードが実装コードと同じソースファイルに書かれているものである。Rustで有名なアプローチ。","href":null}],"color":"default"}},{"object":"block","id":"41c9bdc8-c616-496a-9fdf-3989f8fbeb01","parent":{"type":"page_id","page_id":"579ff1ec-a68c-4fbe-9fa6-7d7c59f1698d"},"created_time":"2023-08-22T10:32:00.000Z","last_edited_time":"2023-08-22T10:32:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"bookmark","bookmark":{"caption":[],"url":"https://doc.rust-jp.rs/book-ja/ch11-03-test-organization.html#非公開関数をテストする"}},{"object":"block","id":"52bfd13d-149b-46cd-a331-a1451c179022","parent":{"type":"page_id","page_id":"579ff1ec-a68c-4fbe-9fa6-7d7c59f1698d"},"created_time":"2023-08-22T10:32:00.000Z","last_edited_time":"2023-08-22T10:32:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[],"color":"default"}},{"object":"block","id":"444d6acd-5d6f-43b8-a1cc-ad708b52996b","parent":{"type":"page_id","page_id":"579ff1ec-a68c-4fbe-9fa6-7d7c59f1698d"},"created_time":"2023-08-22T10:32:00.000Z","last_edited_time":"2023-08-22T10:37:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"先日から Vitest を何かと使うようになったが、VitestもIn-source Testingをサポートしている。JavaScriptのテストツールでは珍しいのでやってみた。説明としては次の記事のほうが断然詳しい。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"先日から Vitest を何かと使うようになったが、VitestもIn-source Testingをサポートしている。JavaScriptのテストツールでは珍しいのでやってみた。説明としては次の記事のほうが断然詳しい。","href":null}],"color":"default"}},{"object":"block","id":"e7febfe8-f2a4-4c2d-a12f-922bb7b64d6b","parent":{"type":"page_id","page_id":"579ff1ec-a68c-4fbe-9fa6-7d7c59f1698d"},"created_time":"2023-08-22T10:37:00.000Z","last_edited_time":"2023-08-22T10:37:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[],"color":"default"}},{"object":"block","id":"0d0dda2d-488b-44db-a3af-8fb73b003162","parent":{"type":"page_id","page_id":"579ff1ec-a68c-4fbe-9fa6-7d7c59f1698d"},"created_time":"2023-08-22T10:25:00.000Z","last_edited_time":"2023-08-22T10:32:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"bookmark","bookmark":{"caption":[],"url":"https://zenn.dev/azukiazusa/articles/vitest-same-test-file"}},{"object":"block","id":"76642908-ce73-4dc4-9830-cbd8300c83ef","parent":{"type":"page_id","page_id":"579ff1ec-a68c-4fbe-9fa6-7d7c59f1698d"},"created_time":"2023-08-22T10:37:00.000Z","last_edited_time":"2023-08-22T10:39:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[],"color":"default"}},{"object":"block","id":"b54873ab-a99a-4085-b250-41e690da0aa2","parent":{"type":"page_id","page_id":"579ff1ec-a68c-4fbe-9fa6-7d7c59f1698d"},"created_time":"2023-08-22T10:37:00.000Z","last_edited_time":"2023-08-22T10:39:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"// in-source test suites\nif (import.meta.vitest) {\n  const { describe, it, expect } = import.meta.vitest;\n  describe('buildText', () => {\n    it('without note', () => {\n      const text = buildText({\n        notionBlockId: 'blockId',\n        url: 'https://example.com',\n        title: 'example',\n      });\n      expect(text).toBe('🔖 \"example\" https://example.com #laco_feed');\n    });\n\n    it('with note', () => {\n      const text = buildText({\n        notionBlockId: 'blockId',\n        url: 'https://example.com',\n        title: 'example',\n        note: 'note',\n      });\n      expect(text).toBe('note \"example\" https://example.com #laco_feed');\n    });\n  });\n}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"// in-source test suites\nif (import.meta.vitest) {\n  const { describe, it, expect } = import.meta.vitest;\n  describe('buildText', () => {\n    it('without note', () => {\n      const text = buildText({\n        notionBlockId: 'blockId',\n        url: 'https://example.com',\n        title: 'example',\n      });\n      expect(text).toBe('🔖 \"example\" https://example.com #laco_feed');\n    });\n\n    it('with note', () => {\n      const text = buildText({\n        notionBlockId: 'blockId',\n        url: 'https://example.com',\n        title: 'example',\n        note: 'note',\n      });\n      expect(text).toBe('note \"example\" https://example.com #laco_feed');\n    });\n  });\n}","href":null}],"language":"typescript"}},{"object":"block","id":"958e17a7-9d1c-40be-965f-6ec7a02d6a91","parent":{"type":"page_id","page_id":"579ff1ec-a68c-4fbe-9fa6-7d7c59f1698d"},"created_time":"2023-08-22T10:39:00.000Z","last_edited_time":"2023-08-22T10:39:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"bookmark","bookmark":{"caption":[],"url":"https://github.com/lacolaco/feed2social/blob/466a0e8af91da40911f0ac2ca8981fa5e3cdc34e/src/social/twitter.ts#L56-L79"}},{"object":"block","id":"150cd731-2870-4f90-898e-5d03f1d45c12","parent":{"type":"page_id","page_id":"579ff1ec-a68c-4fbe-9fa6-7d7c59f1698d"},"created_time":"2023-08-22T10:39:00.000Z","last_edited_time":"2023-08-22T10:39:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[],"color":"default"}},{"object":"block","id":"c654c4b6-0727-44ed-ba3f-797feef254dc","parent":{"type":"page_id","page_id":"579ff1ec-a68c-4fbe-9fa6-7d7c59f1698d"},"created_time":"2023-08-22T10:39:00.000Z","last_edited_time":"2023-08-22T10:39:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"理解しておくべきポイントは以下","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"理解しておくべきポイントは以下","href":null}],"color":"default"}},{"object":"block","id":"3b064d9d-d6b1-46dc-97f4-ebeb0a41806d","parent":{"type":"page_id","page_id":"579ff1ec-a68c-4fbe-9fa6-7d7c59f1698d"},"created_time":"2023-08-22T10:39:00.000Z","last_edited_time":"2023-08-22T10:40:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":true,"archived":false,"in_trash":false,"type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","text":{"content":"import.meta.vitest","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"import.meta.vitest","href":null},{"type":"text","text":{"content":" の型定義は tsconfig の ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" の型定義は tsconfig の ","href":null},{"type":"text","text":{"content":"types","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"types","href":null},{"type":"text","text":{"content":" オプションに渡した ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" オプションに渡した ","href":null},{"type":"text","text":{"content":"vitest/importMeta","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"vitest/importMeta","href":null},{"type":"text","text":{"content":" が持っている。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" が持っている。","href":null}],"color":"default"},"children":[{"object":"block","id":"385c572c-0a9c-4608-9ead-bc3fbf1cc0a6","parent":{"type":"block_id","block_id":"3b064d9d-d6b1-46dc-97f4-ebeb0a41806d"},"created_time":"2023-08-22T10:40:00.000Z","last_edited_time":"2023-08-22T10:40:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","text":{"content":"https://github.com/vitest-dev/vitest/blob/main/packages/vitest/importMeta.d.ts","link":{"url":"https://github.com/vitest-dev/vitest/blob/main/packages/vitest/importMeta.d.ts"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"https://github.com/vitest-dev/vitest/blob/main/packages/vitest/importMeta.d.ts","href":"https://github.com/vitest-dev/vitest/blob/main/packages/vitest/importMeta.d.ts"}],"color":"default"}}]},{"object":"block","id":"a9357767-dec3-4a9a-bdbe-3332fe485ad0","parent":{"type":"page_id","page_id":"579ff1ec-a68c-4fbe-9fa6-7d7c59f1698d"},"created_time":"2023-08-22T10:40:00.000Z","last_edited_time":"2023-08-22T10:44:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","text":{"content":"テスト記述用のAPIは普通の静的なインポートではなく、 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"テスト記述用のAPIは普通の静的なインポートではなく、 ","href":null},{"type":"text","text":{"content":"import.meta.vitest","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"import.meta.vitest","href":null},{"type":"text","text":{"content":" から取得する。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" から取得する。","href":null},{"type":"text","text":{"content":"import.meta.vitest","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"import.meta.vitest","href":null},{"type":"text","text":{"content":" が定義されていないときにif文全体がデッドコードとなることで、アプリケーションをバンドルするときにテスト関連のコードがまるごと除去できる。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" が定義されていないときにif文全体がデッドコードとなることで、アプリケーションをバンドルするときにテスト関連のコードがまるごと除去できる。","href":null}],"color":"default"}},{"object":"block","id":"7f9761ef-515e-4e95-b93e-808a43c6939e","parent":{"type":"page_id","page_id":"579ff1ec-a68c-4fbe-9fa6-7d7c59f1698d"},"created_time":"2023-08-22T10:44:00.000Z","last_edited_time":"2023-08-22T10:44:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"所感","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"所感","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"03e2cdba-bc4d-4002-b451-426095ffaaec","parent":{"type":"page_id","page_id":"579ff1ec-a68c-4fbe-9fa6-7d7c59f1698d"},"created_time":"2023-08-22T10:44:00.000Z","last_edited_time":"2023-08-22T10:46:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","text":{"content":"テストを書くためにその関数の可視性がどうだとか悩む必要がないので、とにかくまずテストを書き始めるということをやりやすい。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"テストを書くためにその関数の可視性がどうだとか悩む必要がないので、とにかくまずテストを書き始めるということをやりやすい。","href":null}],"color":"default"}},{"object":"block","id":"6dec3f82-77d3-4a91-861d-bdcc793bdd08","parent":{"type":"page_id","page_id":"579ff1ec-a68c-4fbe-9fa6-7d7c59f1698d"},"created_time":"2023-08-22T10:46:00.000Z","last_edited_time":"2023-08-22T10:46:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","text":{"content":"テストが実装とすぐ近くにあるので、テストファーストの開発スタイルには特に向いていると思う。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"テストが実装とすぐ近くにあるので、テストファーストの開発スタイルには特に向いていると思う。","href":null}],"color":"default"}},{"object":"block","id":"87d717cc-3480-4207-8f6d-edc83af2a2db","parent":{"type":"page_id","page_id":"579ff1ec-a68c-4fbe-9fa6-7d7c59f1698d"},"created_time":"2023-08-22T10:46:00.000Z","last_edited_time":"2023-08-22T10:48:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","text":{"content":"当然だがファイルが大きくなりやすいが、実装が増えたにしろテストが増えたにしろそれはつまりそのファイルの関心事が増えているということなので、関心を分離しろということになる。テストファイルがどんどん大きくなっていくのは見逃されやすいので、実装と同じファイルであることで「適切に困る」ことができそうだ。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"当然だがファイルが大きくなりやすいが、実装が増えたにしろテストが増えたにしろそれはつまりそのファイルの関心事が増えているということなので、関心を分離しろということになる。テストファイルがどんどん大きくなっていくのは見逃されやすいので、実装と同じファイルであることで「適切に困る」ことができそうだ。","href":null}],"color":"default"}}]