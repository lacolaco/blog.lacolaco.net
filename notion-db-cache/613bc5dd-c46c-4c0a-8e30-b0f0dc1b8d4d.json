[{"object":"block","id":"cbe6aa28-f9a6-4e4e-9ea4-42e36d050811","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T07:15:00.000Z","last_edited_time":"2023-02-08T11:44:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"Angular v14から導入された Standalone API に適応する形で、標準ライブラリやサードパーティライブラリが提供するAPIにある共通のパターンが表れ始めた。この記事では、私が ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Angular v14から導入された Standalone API に適応する形で、標準ライブラリやサードパーティライブラリが提供するAPIにある共通のパターンが表れ始めた。この記事では、私が ","href":null},{"type":"text","text":{"content":"“Provider Function”","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"“Provider Function”","href":null},{"type":"text","text":{"content":" と呼んでいるその新しいパターンについて解説する。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" と呼んでいるその新しいパターンについて解説する。","href":null}],"color":"default"}},{"object":"block","id":"e6cbbd65-996f-4a2f-b0a3-340ec5479c93","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T08:13:00.000Z","last_edited_time":"2022-10-16T09:31:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"Provider Function パターン","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Provider Function パターン","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"f6155578-f914-460c-b619-14adf4df37b5","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T08:14:00.000Z","last_edited_time":"2022-10-16T09:31:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"Provider Function パターンとは、Standalone以前に広がっていた ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Provider Function パターンとは、Standalone以前に広がっていた ","href":null},{"type":"text","text":{"content":"NgModule","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"NgModule","href":null},{"type":"text","text":{"content":" の ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" の ","href":null},{"type":"text","text":{"content":"forRoot()","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"forRoot()","href":null},{"type":"text","text":{"content":" パターンに対応する形で、 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" パターンに対応する形で、 ","href":null},{"type":"text","text":{"content":"NgModule","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"NgModule","href":null},{"type":"text","text":{"content":" を使わずにDIプロバイダーをセットアップするためのAPIパターンである。おそらく具体的な例を見たほうがパターンを理解しやすいだろうから、いくつか紹介する。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" を使わずにDIプロバイダーをセットアップするためのAPIパターンである。おそらく具体的な例を見たほうがパターンを理解しやすいだろうから、いくつか紹介する。","href":null}],"color":"default"}},{"object":"block","id":"b664e292-f4f6-4d68-bfa9-ca094281e963","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T08:17:00.000Z","last_edited_time":"2022-10-16T08:19:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"1つ目は Routerパッケージが提供する ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"1つ目は Routerパッケージが提供する ","href":null},{"type":"text","text":{"content":"provideRouter()","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"provideRouter()","href":null},{"type":"text","text":{"content":"APIだ。このAPIについては以前記事を書いたので、詳細はそちらを参照してほしい。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"APIだ。このAPIについては以前記事を書いたので、詳細はそちらを参照してほしい。","href":null}],"color":"default"}},{"object":"block","id":"940f8222-1fd7-498a-bbb0-70f100b9b72a","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T08:18:00.000Z","last_edited_time":"2022-10-16T08:18:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"bookmark","bookmark":{"caption":[],"url":"https://blog.lacolaco.net/2022/08/angular-new-provide-router-api/"}},{"object":"block","id":"d3cfdbdd-aad8-45e0-b45a-eff1129f4ca2","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T08:18:00.000Z","last_edited_time":"2022-10-16T08:19:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"以前は ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"以前は ","href":null},{"type":"text","text":{"content":"RouterModule.forRoot()","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"RouterModule.forRoot()","href":null},{"type":"text","text":{"content":" でセットアップしていた ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" でセットアップしていた ","href":null},{"type":"text","text":{"content":"Router","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"Router","href":null},{"type":"text","text":{"content":" サービスを、 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" サービスを、 ","href":null},{"type":"text","text":{"content":"provideRouter()","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"provideRouter()","href":null},{"type":"text","text":{"content":" 関数でセットアップするようになった。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" 関数でセットアップするようになった。","href":null}],"color":"default"}},{"object":"block","id":"83899a57-0e3a-40a6-9cb3-18e10a865d8b","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T08:19:00.000Z","last_edited_time":"2022-10-16T08:19:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"import { bootstrapApplication } from '@angular/platform-browser';\nimport { AppComponent } from './app/app.component';\nimport { provideRouter } from '@angular/router';\nimport { routes } from './app/app.routing';\n\nbootstrapApplication(AppComponent, {\n  // provide Router with routes\n  providers: [provideRouter(routes)],\n});","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"import { bootstrapApplication } from '@angular/platform-browser';\nimport { AppComponent } from './app/app.component';\nimport { provideRouter } from '@angular/router';\nimport { routes } from './app/app.routing';\n\nbootstrapApplication(AppComponent, {\n  // provide Router with routes\n  providers: [provideRouter(routes)],\n});","href":null}],"language":"typescript"}},{"object":"block","id":"83bebd30-aff4-4573-a45b-d95a61f65675","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T08:19:00.000Z","last_edited_time":"2022-10-16T08:22:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"2つ目は ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"2つ目は ","href":null},{"type":"text","text":{"content":"@angular/platform-browser","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"@angular/platform-browser","href":null},{"type":"text","text":{"content":" パッケージが提供する ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" パッケージが提供する ","href":null},{"type":"text","text":{"content":"provideAnimations()","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"provideAnimations()","href":null},{"type":"text","text":{"content":" APIだ。以前は ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" APIだ。以前は ","href":null},{"type":"text","text":{"content":"BrowserAnimationsModule","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"BrowserAnimationsModule","href":null},{"type":"text","text":{"content":" をインポートしていたが、代わりにこの関数の戻り値を ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" をインポートしていたが、代わりにこの関数の戻り値を ","href":null},{"type":"text","text":{"content":"providers","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"providers","href":null},{"type":"text","text":{"content":" 配列に追加するようになっている。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" 配列に追加するようになっている。","href":null}],"color":"default"}},{"object":"block","id":"0c236d07-f6d5-47fe-a26a-ac70494d9c2c","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T09:46:00.000Z","last_edited_time":"2022-10-16T09:46:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"https://angular.io/api/platform-browser/animations/provideAnimations","link":{"url":"https://angular.io/api/platform-browser/animations/provideAnimations"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"https://angular.io/api/platform-browser/animations/provideAnimations","href":"https://angular.io/api/platform-browser/animations/provideAnimations"}],"color":"default"}},{"object":"block","id":"c3ba6592-2135-4098-88ea-1090745e1932","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T08:22:00.000Z","last_edited_time":"2022-10-16T08:22:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"import { bootstrapApplication } from '@angular/platform-browser';\nimport { AppComponent } from './app/app.component';\nimport { provideAnimations } from '@angular/platform-browser/animations';\n\nbootstrapApplication(AppComponent, {\n  providers: [\n    provideAnimations()\n  ]\n});","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"import { bootstrapApplication } from '@angular/platform-browser';\nimport { AppComponent } from './app/app.component';\nimport { provideAnimations } from '@angular/platform-browser/animations';\n\nbootstrapApplication(AppComponent, {\n  providers: [\n    provideAnimations()\n  ]\n});","href":null}],"language":"typescript"}},{"object":"block","id":"43de9b4a-62c2-46fa-8b91-491b8e87d065","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T08:22:00.000Z","last_edited_time":"2022-10-16T09:46:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"3つ目は、v15より ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"3つ目は、v15より ","href":null},{"type":"text","text":{"content":"@angular/common/http","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"@angular/common/http","href":null},{"type":"text","text":{"content":" パッケージから提供される予定の ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" パッケージから提供される予定の ","href":null},{"type":"text","text":{"content":"provideHttpClient()","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"provideHttpClient()","href":null},{"type":"text","text":{"content":" APIだ。もう説明不要だと思うが、 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" APIだ。もう説明不要だと思うが、 ","href":null},{"type":"text","text":{"content":"HttpClientModule","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"HttpClientModule","href":null},{"type":"text","text":{"content":" の代わりに ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" の代わりに ","href":null},{"type":"text","text":{"content":"HttpClient","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"HttpClient","href":null},{"type":"text","text":{"content":" を利用可能にする。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" を利用可能にする。","href":null}],"color":"default"}},{"object":"block","id":"9b6bb386-16d3-4a91-ad8f-74c9a2e0c593","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T09:46:00.000Z","last_edited_time":"2022-10-16T09:46:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"https://next.angular.io/api/common/http/provideHttpClient","link":{"url":"https://next.angular.io/api/common/http/provideHttpClient"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"https://next.angular.io/api/common/http/provideHttpClient","href":"https://next.angular.io/api/common/http/provideHttpClient"}],"color":"default"}},{"object":"block","id":"13c5538a-29f7-419b-ac8e-1f163cbb165f","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T08:27:00.000Z","last_edited_time":"2022-10-16T08:30:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"最後に紹介するのはサードパーティライブラリの NgRx が提供する ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"最後に紹介するのはサードパーティライブラリの NgRx が提供する ","href":null},{"type":"text","text":{"content":"provideStore()","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"provideStore()","href":null},{"type":"text","text":{"content":" API だ。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" API だ。","href":null}],"color":"default"}},{"object":"block","id":"3fe854cf-103b-48c8-8f0f-a09805a7b0f1","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T09:49:00.000Z","last_edited_time":"2022-10-16T09:49:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"NgRx \\- provideStore","link":{"url":"https://ngrx.io/api/store/provideStore"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"NgRx \\- provideStore","href":"https://ngrx.io/api/store/provideStore"}],"color":"default"}},{"object":"block","id":"8b80eab2-70b2-48c3-9553-068fbb4eaeed","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T08:29:00.000Z","last_edited_time":"2022-10-16T08:30:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"provideStore()","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"provideStore()","href":null},{"type":"text","text":{"content":" 関数は従来の ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" 関数は従来の ","href":null},{"type":"text","text":{"content":"StoreModule.forRoot()","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"StoreModule.forRoot()","href":null},{"type":"text","text":{"content":" に対応したものであり、 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" に対応したものであり、 ","href":null},{"type":"text","text":{"content":"Store","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"Store","href":null},{"type":"text","text":{"content":" サービスを利用可能にする。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" サービスを利用可能にする。","href":null}],"color":"default"}},{"object":"block","id":"602578c2-2944-45ad-9077-570ca434c9fd","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T08:31:00.000Z","last_edited_time":"2022-10-16T08:31:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"bootstrapApplication(AppComponent, {\n  providers: [provideStore()],\n});","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"bootstrapApplication(AppComponent, {\n  providers: [provideStore()],\n});","href":null}],"language":"typescript"}},{"object":"block","id":"5d6f0a49-d48a-4c82-a6c6-ef5d0b725e70","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T08:29:00.000Z","last_edited_time":"2022-10-16T08:34:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"これらのAPIに共通するパターンの特徴が見えてきただろうか？","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"これらのAPIに共通するパターンの特徴が見えてきただろうか？","href":null}],"color":"default"}},{"object":"block","id":"506f8cca-3fb3-462a-a858-eb9faf9581fb","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T08:34:00.000Z","last_edited_time":"2022-10-16T09:25:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"プロバイダー宣言と動的なパラメータ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"プロバイダー宣言と動的なパラメータ","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"c9369e0d-3d30-44dc-8f9e-3a053b73651c","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T08:34:00.000Z","last_edited_time":"2022-10-16T08:44:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"AngularのDIシステムにおいて、 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"AngularのDIシステムにおいて、 ","href":null},{"type":"text","text":{"content":"providers","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"providers","href":null},{"type":"text","text":{"content":" 配列に追加するオブジェクトは ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" 配列に追加するオブジェクトは ","href":null},{"type":"text","text":{"content":"プロバイダーオブジェクト","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"プロバイダーオブジェクト","href":null},{"type":"text","text":{"content":"である。これはStandalone APIに関係なくいままでもずっとそうだった。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"である。これはStandalone APIに関係なくいままでもずっとそうだった。","href":null}],"color":"default"}},{"object":"block","id":"ee230963-f923-42f3-8163-a72faaad2dea","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T09:47:00.000Z","last_edited_time":"2022-10-16T09:47:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"https://angular.io/api/core/Provider","link":{"url":"https://angular.io/api/core/Provider"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"https://angular.io/api/core/Provider","href":"https://angular.io/api/core/Provider"}],"color":"default"}},{"object":"block","id":"37fdfa75-4950-4e73-97ad-1321de14aa11","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T08:36:00.000Z","last_edited_time":"2022-10-16T08:45:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"プロバイダーオブジェクト","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"プロバイダーオブジェクト","href":null},{"type":"text","text":{"content":"は、依存性の注入の中で、あるトークンに対応するインスタンスを提供 (provide）するような役割を指す。そのインスタンスの生成方法の違いによって、プロバイダーはクラスプロバイダー・ファクトリープロバイダー・値プロバイダーなど、いくつかのタイプに分けられる。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"は、依存性の注入の中で、あるトークンに対応するインスタンスを提供 (provide）するような役割を指す。そのインスタンスの生成方法の違いによって、プロバイダーはクラスプロバイダー・ファクトリープロバイダー・値プロバイダーなど、いくつかのタイプに分けられる。","href":null}],"color":"default"}},{"object":"block","id":"ee264022-a9b5-4417-bd1b-0bd2f208ee61","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T09:47:00.000Z","last_edited_time":"2022-10-16T09:47:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"Angular 日本語ドキュメンテーション - 依存性プロバイダーの設定","link":{"url":"https://angular.jp/guide/dependency-injection-providers"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Angular 日本語ドキュメンテーション - 依存性プロバイダーの設定","href":"https://angular.jp/guide/dependency-injection-providers"}],"color":"default"}},{"object":"block","id":"beee176b-945f-44d5-84b6-5af11e2597c8","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T08:36:00.000Z","last_edited_time":"2022-10-16T09:26:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"多くのAngularライブラリが依存性の注入を介して提供するAPIは、シングルトンである場合が多い。その場合は ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"多くのAngularライブラリが依存性の注入を介して提供するAPIは、シングルトンである場合が多い。その場合は ","href":null},{"type":"text","text":{"content":"providedIn: 'root'","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"providedIn: 'root'","href":null},{"type":"text","text":{"content":" オプションによって、自動的にプロバイダーがセットアップされる。しかしこのままでは、アプリケーションや実行環境ごとに異なる初期パラメータを渡すことができない。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" オプションによって、自動的にプロバイダーがセットアップされる。しかしこのままでは、アプリケーションや実行環境ごとに異なる初期パラメータを渡すことができない。","href":null}],"color":"default"}},{"object":"block","id":"4f19c862-244e-4770-8fd3-800fcc1db95a","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T08:42:00.000Z","last_edited_time":"2022-10-16T08:44:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class HeroService {}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class HeroService {}","href":null}],"language":"typescript"}},{"object":"block","id":"e87d39ef-5ad7-40d3-a7f1-ceb55eb8e44e","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T08:43:00.000Z","last_edited_time":"2022-10-16T09:27:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"サービスに動的なパラメータを渡したい場合には2つの手段がある。ひとつはそのパラメータもDIで解決する方法、もうひとつはファクトリープロバイダーを使って開発者自身が ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"サービスに動的なパラメータを渡したい場合には2つの手段がある。ひとつはそのパラメータもDIで解決する方法、もうひとつはファクトリープロバイダーを使って開発者自身が ","href":null},{"type":"text","text":{"content":"new","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"new","href":null},{"type":"text","text":{"content":" する方法だ。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" する方法だ。","href":null}],"color":"default"}},{"object":"block","id":"c0d2e6c0-2d4a-46f5-a3bc-ea71dc4436d8","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T08:47:00.000Z","last_edited_time":"2022-10-16T08:51:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"前者の方法では、パラメータに専用の","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"前者の方法では、パラメータに専用の","href":null},{"type":"text","text":{"content":"DIトークン","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"DIトークン","href":null},{"type":"text","text":{"content":"を発行し、値プロバイダーを使ってパラメータを提供する。サービス側では、そのトークンをキーにしてパラメータを注入することができる。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"を発行し、値プロバイダーを使ってパラメータを提供する。サービス側では、そのトークンをキーにしてパラメータを注入することができる。","href":null}],"color":"default"}},{"object":"block","id":"bf11b96e-b080-4e88-9850-a9e7024098fa","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T08:49:00.000Z","last_edited_time":"2022-10-16T09:27:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"// library side\nimport { Injectable, InjectionToken } from '@angular/core';\n\nexport type HeroServiceParams = ...;\n\n","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"// library side\nimport { Injectable, InjectionToken } from '@angular/core';\n\nexport type HeroServiceParams = ...;\n\n","href":null},{"type":"text","text":{"content":"export const HERO_SERVICE_PARAMS = new InjectionToken<HeroServiceParams>('hero params');","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"export const HERO_SERVICE_PARAMS = new InjectionToken<HeroServiceParams>('hero params');","href":null},{"type":"text","text":{"content":"\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class HeroService {\n  constructor(@Inject(HERO_SERVICE_PARAMS) params: HeroServiceParams) {}\n}\n\n// application side\nbootstrapApplication(AppComponent, {\n  providers: [\n    ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class HeroService {\n  constructor(@Inject(HERO_SERVICE_PARAMS) params: HeroServiceParams) {}\n}\n\n// application side\nbootstrapApplication(AppComponent, {\n  providers: [\n    ","href":null},{"type":"text","text":{"content":"{ provide: HERO_SERVICE_PARAMS, useValue: { ... } },","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"{ provide: HERO_SERVICE_PARAMS, useValue: { ... } },","href":null},{"type":"text","text":{"content":"\n  ],\n});","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"\n  ],\n});","href":null}],"language":"typescript"}},{"object":"block","id":"bed12c42-971f-40a2-b5d9-74d9cb2c844e","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T08:51:00.000Z","last_edited_time":"2022-10-16T08:57:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"後者のファクトリープロバイダーを使う方法は単純で、 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"後者のファクトリープロバイダーを使う方法は単純で、 ","href":null},{"type":"text","text":{"content":"providedIn: 'root'","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"providedIn: 'root'","href":null},{"type":"text","text":{"content":" をやめてしまい、 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" をやめてしまい、 ","href":null},{"type":"text","text":{"content":"useFactory","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"useFactory","href":null},{"type":"text","text":{"content":" でインスタンスを生成する。コンストラクタを開発者自身が呼び出すため、DIトークンは必要ない。ただし、この場合はサービスクラスのコンストラクタが要求するすべてのパラメータを利用側が渡さなければならないため、アプリケーション側の負担が大きい。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" でインスタンスを生成する。コンストラクタを開発者自身が呼び出すため、DIトークンは必要ない。ただし、この場合はサービスクラスのコンストラクタが要求するすべてのパラメータを利用側が渡さなければならないため、アプリケーション側の負担が大きい。","href":null}],"color":"default"}},{"object":"block","id":"70d74da9-e9c9-4b32-a88f-1b3a65789358","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T08:54:00.000Z","last_edited_time":"2022-10-16T09:27:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"// library side\nimport { Injectable } from '@angular/core';\n\nexport type HeroServiceParams = ...;\n\n@Injectable()\nexport class HeroService {\n  constructor(params: HeroServiceParams) {}\n}\n\n// application side\nbootstrapApplication(AppComponent, {\n  providers: [\n    ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"// library side\nimport { Injectable } from '@angular/core';\n\nexport type HeroServiceParams = ...;\n\n@Injectable()\nexport class HeroService {\n  constructor(params: HeroServiceParams) {}\n}\n\n// application side\nbootstrapApplication(AppComponent, {\n  providers: [\n    ","href":null},{"type":"text","text":{"content":"{ provide: HeroService, useFactory: () => new HeroService({...}) },","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"{ provide: HeroService, useFactory: () => new HeroService({...}) },","href":null},{"type":"text","text":{"content":"\n  ],\n});","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"\n  ],\n});","href":null}],"language":"typescript"}},{"object":"block","id":"b1f93a36-880f-4716-b782-a1dfe87c9e2b","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T08:56:00.000Z","last_edited_time":"2022-10-16T09:01:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"どちらの方法にしても、ライブラリが公開するサービスクラスやDIトークンに対して、ライブラリを利用するアプリケーション側でプロバイダーを宣言することになっているのだが、ここで問題になるのはライブラリが要求する型に合致したインスタンスが正しく提供される保証がないことだ。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"どちらの方法にしても、ライブラリが公開するサービスクラスやDIトークンに対して、ライブラリを利用するアプリケーション側でプロバイダーを宣言することになっているのだが、ここで問題になるのはライブラリが要求する型に合致したインスタンスが正しく提供される保証がないことだ。","href":null}],"color":"default"}},{"object":"block","id":"c5553db0-3eef-4838-92ae-40236cffe65d","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T09:01:00.000Z","last_edited_time":"2022-10-16T09:01:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"インターフェースと実装を分離できるのが依存性の注入の利点ではあるが、ライブラリとしてはどんなオブジェクトが提供されるかわからないため、アプリケーション側でプロバイダーが宣言されるようなパラメータについては、楽観的に正常系だけを考慮するか、防御的にアサーションするかの選択を迫られることになる。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"インターフェースと実装を分離できるのが依存性の注入の利点ではあるが、ライブラリとしてはどんなオブジェクトが提供されるかわからないため、アプリケーション側でプロバイダーが宣言されるようなパラメータについては、楽観的に正常系だけを考慮するか、防御的にアサーションするかの選択を迫られることになる。","href":null}],"color":"default"}},{"object":"block","id":"b2dbe584-8c56-4aee-9c05-516fd616cf07","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T09:01:00.000Z","last_edited_time":"2022-10-16T09:09:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"この問題を多くの場面でこれまで解決していたのが、NgModuleの ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"この問題を多くの場面でこれまで解決していたのが、NgModuleの ","href":null},{"type":"text","text":{"content":"forRoot()","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"forRoot()","href":null},{"type":"text","text":{"content":" パターンである。これは「","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" パターンである。これは「","href":null},{"type":"text","text":{"content":"プロバイダーオブジェクトを返す静的メソッド","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"プロバイダーオブジェクトを返す静的メソッド","href":null},{"type":"text","text":{"content":"」をライブラリの NgModule が提供することで、静的メソッドの引数として動的なパラメータを受け取りながら、プロバイダーの宣言はライブラリ側に閉じることができるパターンになっている。このとき ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"」をライブラリの NgModule が提供することで、静的メソッドの引数として動的なパラメータを受け取りながら、プロバイダーの宣言はライブラリ側に閉じることができるパターンになっている。このとき ","href":null},{"type":"text","text":{"content":"forRoot()","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"forRoot()","href":null},{"type":"text","text":{"content":" メソッドの戻り値は ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" メソッドの戻り値は ","href":null},{"type":"text","text":{"content":"ModuleWithProviders","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"ModuleWithProviders","href":null},{"type":"text","text":{"content":" 型が使われる。NgModuleのインポートとして機能しつつ、プロバイダーも提供することができる型だ。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" 型が使われる。NgModuleのインポートとして機能しつつ、プロバイダーも提供することができる型だ。","href":null}],"color":"default"}},{"object":"block","id":"49b2b258-5a34-4836-9cc4-56d93c4aef03","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T09:42:00.000Z","last_edited_time":"2022-10-16T09:43:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"Angular 日本語ドキュメンテーション - for Root()の仕組み","link":{"url":"https://angular.jp/guide/singleton-services#forroot%E3%81%AE%E4%BB%95%E7%B5%84%E3%81%BF"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Angular 日本語ドキュメンテーション - for Root()の仕組み","href":"https://angular.jp/guide/singleton-services#forroot%E3%81%AE%E4%BB%95%E7%B5%84%E3%81%BF"}],"color":"default"}},{"object":"block","id":"b144f8b6-fb4b-4bae-a645-e0414f867d65","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T09:08:00.000Z","last_edited_time":"2022-10-16T09:08:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"ちなみに ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"ちなみに ","href":null},{"type":"text","text":{"content":"forRoot()","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"forRoot()","href":null},{"type":"text","text":{"content":" という名前は、シングルトンにするためにルートモジュールで一回だけ提供してほしいことを示す慣例的なものであり、それ以上の特別な意味はない。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" という名前は、シングルトンにするためにルートモジュールで一回だけ提供してほしいことを示す慣例的なものであり、それ以上の特別な意味はない。","href":null}],"color":"default"}},{"object":"block","id":"50b912df-ff88-47d7-96a6-b54961a31d0a","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T09:04:00.000Z","last_edited_time":"2022-10-16T13:19:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"// library side\nimport { Injectable, InjectionToken, ModuleWithProviders } from '@angular/core';\n\nexport type HeroServiceParams = ...;\n\n//// internal\nconst HERO_SERVICE_PARAMS = new InjectionToken<HeroServiceParams>('hero init');\n\n@Injectable()\nexport class HeroService {\n  constructor(@Inject(HERO_SERVICE_PARAMS) params: HeroServiceParams) {}\n}\n\n@NgModule({})\nexport class HeroModule {\n  ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"// library side\nimport { Injectable, InjectionToken, ModuleWithProviders } from '@angular/core';\n\nexport type HeroServiceParams = ...;\n\n//// internal\nconst HERO_SERVICE_PARAMS = new InjectionToken<HeroServiceParams>('hero init');\n\n@Injectable()\nexport class HeroService {\n  constructor(@Inject(HERO_SERVICE_PARAMS) params: HeroServiceParams) {}\n}\n\n@NgModule({})\nexport class HeroModule {\n  ","href":null},{"type":"text","text":{"content":"static forRoot(params: HeroServiceParams): ModuleWithProviders","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"static forRoot(params: HeroServiceParams): ModuleWithProviders","href":null},{"type":"text","text":{"content":" {\n    return {\n      ngModule: HeroModule,\n      providers: [\n        HeroService,\n        ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" {\n    return {\n      ngModule: HeroModule,\n      providers: [\n        HeroService,\n        ","href":null},{"type":"text","text":{"content":"{ provide: HERO_SERVICE_PARAMS, useValue: params }","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"{ provide: HERO_SERVICE_PARAMS, useValue: params }","href":null},{"type":"text","text":{"content":",\n      ],\n    }\n　　　　}\n}\n\n// application side\n@NgModule({\n  ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":",\n      ],\n    }\n　　　　}\n}\n\n// application side\n@NgModule({\n  ","href":null},{"type":"text","text":{"content":"imports: [ HeroModule.forRoot({...}) ],","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"imports: [ HeroModule.forRoot({...}) ],","href":null},{"type":"text","text":{"content":"\n})\nexport class AppModule {}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"\n})\nexport class AppModule {}","href":null}],"language":"typescript"}},{"object":"block","id":"571e7af9-4f3b-4b5c-8f5c-e0ea40f1b5ba","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T09:12:00.000Z","last_edited_time":"2022-10-16T09:54:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"このような経緯で、 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"このような経緯で、 ","href":null},{"type":"text","text":{"content":"RouterModule","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"RouterModule","href":null},{"type":"text","text":{"content":" をはじめとしたさまざまなライブラリが提供する ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" をはじめとしたさまざまなライブラリが提供する ","href":null},{"type":"text","text":{"content":"forRoot()","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"forRoot()","href":null},{"type":"text","text":{"content":" のような静的メソッドのパターンが広まっていた。だがStandalone APIによってNgModuleがオプショナルになったことで、新しいAPIが必要になった。そこで生まれてきたのが ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" のような静的メソッドのパターンが広まっていた。だがStandalone APIによってNgModuleがオプショナルになったことで、新しいAPIが必要になった。そこで生まれてきたのが ","href":null},{"type":"text","text":{"content":"Provider Function","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Provider Function","href":null},{"type":"text","text":{"content":" というパターン だ。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" というパターン だ。","href":null}],"color":"default"}},{"object":"block","id":"a8ae822b-d370-4bce-b62a-20ccdb3ad53e","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T09:14:00.000Z","last_edited_time":"2022-10-16T09:25:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"Provider Function","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Provider Function","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"72a8f626-94a7-48bc-b1ed-5a910a644899","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T09:14:00.000Z","last_edited_time":"2022-10-16T09:25:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"Provider Function","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Provider Function","href":null},{"type":"text","text":{"content":" とはその名の通り、プロバイダーを返す関数である。つまり ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" とはその名の通り、プロバイダーを返す関数である。つまり ","href":null},{"type":"text","text":{"content":"forRoot()","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"forRoot()","href":null},{"type":"text","text":{"content":" 静的メソッドがやっていたことと同じである。違っているのは、その戻り値がNgModuleとしても機能する必要がなくなり、純粋にプロバイダーだけを返せばよくなったことである。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" 静的メソッドがやっていたことと同じである。違っているのは、その戻り値がNgModuleとしても機能する必要がなくなり、純粋にプロバイダーだけを返せばよくなったことである。","href":null}],"color":"default"}},{"object":"block","id":"861059e1-cba8-4c00-8835-cb11fc9aa6f1","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T09:16:00.000Z","last_edited_time":"2022-10-16T09:24:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"Provider Functionは慣例的に ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Provider Functionは慣例的に ","href":null},{"type":"text","text":{"content":"provideXXX()","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"provideXXX()","href":null},{"type":"text","text":{"content":" という命名規則に則り、 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" という命名規則に則り、 ","href":null},{"type":"text","text":{"content":"provide","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"provide","href":null},{"type":"text","text":{"content":" というプレフィックスを持つ。また、 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" というプレフィックスを持つ。また、 ","href":null},{"type":"text","text":{"content":"XXX","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"XXX","href":null},{"type":"text","text":{"content":" の部分にはそのProvider Functionによって提供されることになるサービスなどの名前が入る。 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" の部分にはそのProvider Functionによって提供されることになるサービスなどの名前が入る。 ","href":null},{"type":"text","text":{"content":"Router","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"Router","href":null},{"type":"text","text":{"content":" サービスに対応する ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" サービスに対応する ","href":null},{"type":"text","text":{"content":"provideRouter()","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"provideRouter()","href":null},{"type":"text","text":{"content":" といった形だ。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" といった形だ。","href":null}],"color":"default"}},{"object":"block","id":"7f6dc85b-5ad2-4b72-861c-147148e04c36","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T09:20:00.000Z","last_edited_time":"2022-10-16T09:21:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"ちなみに NgModule でも Standalone でも、 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"ちなみに NgModule でも Standalone でも、 ","href":null},{"type":"text","text":{"content":"providers","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"providers","href":null},{"type":"text","text":{"content":" 配列の要素には プロバイダーの","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" 配列の要素には プロバイダーの","href":null},{"type":"text","text":{"content":"配列","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"配列","href":null},{"type":"text","text":{"content":"を渡してもよい。プロバイダーの配列を渡した場合は自動的にflattenされる。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"を渡してもよい。プロバイダーの配列を渡した場合は自動的にflattenされる。","href":null}],"color":"default"}},{"object":"block","id":"b7d443be-8198-4a22-8ee6-439cadd6cc93","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T09:18:00.000Z","last_edited_time":"2022-10-16T13:24:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"// library side\nimport { Injectable, InjectionToken, Provider } from '@angular/core';\n\nexport type HeroServiceParams = ...;\n\n//// internal\nconst HERO_SERVICE_PARAMS = new InjectionToken<HeroServiceParams>('hero init');\n\n@Injectable()\nexport class HeroService {\n  constructor(@Inject(HERO_SERVICE_PARAMS) params: HeroServiceParams) {}\n}\n\n","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"// library side\nimport { Injectable, InjectionToken, Provider } from '@angular/core';\n\nexport type HeroServiceParams = ...;\n\n//// internal\nconst HERO_SERVICE_PARAMS = new InjectionToken<HeroServiceParams>('hero init');\n\n@Injectable()\nexport class HeroService {\n  constructor(@Inject(HERO_SERVICE_PARAMS) params: HeroServiceParams) {}\n}\n\n","href":null},{"type":"text","text":{"content":"export function provideHeroService(params: HeroServiceParams): Provider[] {","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"export function provideHeroService(params: HeroServiceParams): Provider[] {","href":null},{"type":"text","text":{"content":"\n  return [\n    HeroService,\n    ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"\n  return [\n    HeroService,\n    ","href":null},{"type":"text","text":{"content":"{ provide: HERO_SERVICE_PARAMS, useValue: params }","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"{ provide: HERO_SERVICE_PARAMS, useValue: params }","href":null},{"type":"text","text":{"content":",\n  ];\n}\n\n// application side\nbootstrapApplication(AppComponent, {\n  providers: [\n    ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":",\n  ];\n}\n\n// application side\nbootstrapApplication(AppComponent, {\n  providers: [\n    ","href":null},{"type":"text","text":{"content":"provideHeroService({...})","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"provideHeroService({...})","href":null},{"type":"text","text":{"content":"\n  ],\n});","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"\n  ],\n});","href":null}],"language":"typescript"}},{"object":"block","id":"14aca348-a229-4936-ba57-9fd52edca39e","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T09:21:00.000Z","last_edited_time":"2022-10-16T09:30:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"このように Provider Function という形式によって、アプリケーションから動的なパラメータを受け取りつつ、その入力値を静的に型チェックし、プロバイダーの宣言詳細をライブラリに閉じることができている。ライブラリ内部で使っているDIトークンが外部に露出していないため、ライブラリ側で実装の詳細を変更してもアプリケーション側に影響することもない。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"このように Provider Function という形式によって、アプリケーションから動的なパラメータを受け取りつつ、その入力値を静的に型チェックし、プロバイダーの宣言詳細をライブラリに閉じることができている。ライブラリ内部で使っているDIトークンが外部に露出していないため、ライブラリ側で実装の詳細を変更してもアプリケーション側に影響することもない。","href":null}],"color":"default"}},{"object":"block","id":"dcec55f2-88d5-49fb-9c62-0865954740f9","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T09:24:00.000Z","last_edited_time":"2022-10-16T09:40:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"必ずしも命名規則に従わなくてもいいし、DIトークンを露出してアプリケーション側でプロバイダーを宣言してもらう方法を選ぶことが禁止されるわけでもないが、標準ライブラリのAPIに一貫したパターンがあるということで開発者はそれを真似するようになるだろうし、現にNgRxのようなサードパーティライブラリも追従を始めている。あえてこの流れに逆らう意味は見出しにくいだろう。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"必ずしも命名規則に従わなくてもいいし、DIトークンを露出してアプリケーション側でプロバイダーを宣言してもらう方法を選ぶことが禁止されるわけでもないが、標準ライブラリのAPIに一貫したパターンがあるということで開発者はそれを真似するようになるだろうし、現にNgRxのようなサードパーティライブラリも追従を始めている。あえてこの流れに逆らう意味は見出しにくいだろう。","href":null}],"color":"default"}},{"object":"block","id":"b73cd5da-d5af-4b08-b2fc-a2db90642ba6","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T09:30:00.000Z","last_edited_time":"2022-10-16T09:31:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"まとめ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"まとめ","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"7529466b-e4d6-4336-8080-4d556aea3a8a","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T09:31:00.000Z","last_edited_time":"2022-10-16T09:54:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"provideRouter()","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"provideRouter()","href":null},{"type":"text","text":{"content":" に代表される ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" に代表される ","href":null},{"type":"text","text":{"content":"Provide Function パターン","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Provide Function パターン","href":null},{"type":"text","text":{"content":" は、これまで ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" は、これまで ","href":null},{"type":"text","text":{"content":"forRoot()","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"forRoot()","href":null},{"type":"text","text":{"content":" パターンが担ってきたプロバイダー宣言への動的なパラメータ適用のための慣例的な実装パターンが、NgModuleを使わない形で生まれ変わったものであり、特別に新しい仕組みが導入されたわけではない。だが、クラスの静的メソッドから単純な関数に変わったことで、これまでよりもシンプルに、そして柔軟に扱いやすくなっている。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" パターンが担ってきたプロバイダー宣言への動的なパラメータ適用のための慣例的な実装パターンが、NgModuleを使わない形で生まれ変わったものであり、特別に新しい仕組みが導入されたわけではない。だが、クラスの静的メソッドから単純な関数に変わったことで、これまでよりもシンプルに、そして柔軟に扱いやすくなっている。","href":null}],"color":"default"}},{"object":"block","id":"a13cfc98-fb88-42e6-afb4-d48aa4476710","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T09:35:00.000Z","last_edited_time":"2022-10-16T09:38:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"今後、標準ライブラリや多くのサードパーティライブラリのAPIがこの形に統一されていくだろう。このようなパターンがあると知っておくことで、新たに導入されるAPIの振る舞いや利用方法が推測しやすくなるはずだ。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"今後、標準ライブラリや多くのサードパーティライブラリのAPIがこの形に統一されていくだろう。このようなパターンがあると知っておくことで、新たに導入されるAPIの振る舞いや利用方法が推測しやすくなるはずだ。","href":null}],"color":"default"}},{"object":"block","id":"f806dac0-0c1b-4944-a94d-5d370dcb5387","parent":{"type":"page_id","page_id":"613bc5dd-c46c-4c0a-8e30-b0f0dc1b8d4d"},"created_time":"2022-10-16T09:38:00.000Z","last_edited_time":"2022-10-16T09:54:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"また、このProvider Functionと対になるような ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"また、このProvider Functionと対になるような ","href":null},{"type":"text","text":{"content":"“Injector Function”","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"“Injector Function”","href":null},{"type":"text","text":{"content":" というパターンも新たに生まれようとしている。そしてこれらをセットにした ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" というパターンも新たに生まれようとしている。そしてこれらをセットにした ","href":null},{"type":"text","text":{"content":"“Functional DI”","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"“Functional DI”","href":null},{"type":"text","text":{"content":" パターンについては、また別の記事で紹介したい。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" パターンについては、また別の記事で紹介したい。","href":null}],"color":"default"}}]