[{"object":"block","id":"7e148bdf-783c-4df6-9860-4fbef33d2075","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:15:00.000Z","last_edited_time":"2023-08-19T11:19:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"Notion Web Clipper","link":{"url":"https://www.notion.so/ja-jp/web-clipper"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Notion Web Clipper","href":"https://www.notion.so/ja-jp/web-clipper"},{"type":"text","text":{"content":" でブックマークしたURLを X (以下 Twitter) に自動投稿することを長らくやっている。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" でブックマークしたURLを X (以下 Twitter) に自動投稿することを長らくやっている。","href":null}],"color":"default"}},{"object":"block","id":"e66c6039-93db-4fca-a277-eab06774e47f","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:18:00.000Z","last_edited_time":"2023-08-19T11:18:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"https://twitter.com/search?q=%23laco_feed&f=live","link":{"url":"https://twitter.com/search?q=%23laco_feed&f=live"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"https://twitter.com/search?q=%23laco_feed&f=live","href":"https://twitter.com/search?q=%23laco_feed&f=live"}],"color":"default"}},{"object":"block","id":"8e0f6b2a-9db9-4121-b1dd-b7077af6475d","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:19:00.000Z","last_edited_time":"2023-08-19T12:21:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"これまでは自動化に Zapier を使って完結していたのだが、SaaSを使ってTwitterに自動投稿することが難しくなってきた。今年のはじめにはZapierのプレミアムプランが必要になったが、","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"これまでは自動化に Zapier を使って完結していたのだが、SaaSを使ってTwitterに自動投稿することが難しくなってきた。今年のはじめにはZapierのプレミアムプランが必要になったが、","href":null},{"type":"text","text":{"content":"ついに8月末で完全に機能が消えることになった","link":{"url":"https://help.zapier.com/hc/en-us/articles/18657531069965/"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"ついに8月末で完全に機能が消えることになった","href":"https://help.zapier.com/hc/en-us/articles/18657531069965/"},{"type":"text","text":{"content":"。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"。","href":null}],"color":"default"}},{"object":"block","id":"5c1609d5-9360-49f8-8813-5895bf6227ef","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:20:00.000Z","last_edited_time":"2023-08-19T11:20:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"embed","embed":{"caption":[],"url":"https://twitter.com/laco2net/status/1692672853580407093"}},{"object":"block","id":"9eba2093-702c-4edd-9cd7-ccc30b4428dd","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:21:00.000Z","last_edited_time":"2023-08-19T12:18:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"代わりのSaaSを探してみたがなかなか見つからなかったのと、Misskeyへのクロスポストを最近別の仕組みで実装していたのと統一して、ついでに Bluesky にもクロスポストしようということで、全部作ることにした。思い立ってみたら一日で出来上がったので、その記録。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"代わりのSaaSを探してみたがなかなか見つからなかったのと、Misskeyへのクロスポストを最近別の仕組みで実装していたのと統一して、ついでに Bluesky にもクロスポストしようということで、全部作ることにした。思い立ってみたら一日で出来上がったので、その記録。","href":null}],"color":"default"}},{"object":"block","id":"b3100fd5-b9c5-4c00-9098-394f0963f4bd","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T12:17:00.000Z","last_edited_time":"2023-08-19T12:18:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"↓実際にクロスポストされたもの（Blueskyはログインしないと見れない）","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"↓実際にクロスポストされたもの（Blueskyはログインしないと見れない）","href":null}],"color":"default"}},{"object":"block","id":"c866c4fd-15c1-457e-bf00-5472073982fb","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T12:17:00.000Z","last_edited_time":"2023-08-19T12:17:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"bookmark","bookmark":{"caption":[],"url":"https://twitter.com/laco2net/status/1692872915610677677"}},{"object":"block","id":"623b776c-e74b-4c51-99c6-1ba967ed3683","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T12:17:00.000Z","last_edited_time":"2023-08-19T12:17:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"bookmark","bookmark":{"caption":[],"url":"https://misskey.io/notes/9iljr6hhnh"}},{"object":"block","id":"bc44094d-e9f7-4709-a198-ad7587058b50","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T12:18:00.000Z","last_edited_time":"2023-08-19T12:18:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"bookmark","bookmark":{"caption":[],"url":"https://bsky.app/profile/lacolaco.bsky.social/post/3k5cqgzf6hm2r"}},{"object":"block","id":"4cc871cc-8e2b-4828-8cb9-53ce81816cbc","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T10:58:00.000Z","last_edited_time":"2023-08-19T12:17:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"全体像","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"全体像","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"a697c7a2-07b1-4f1f-bdb7-38708812ddc5","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:15:00.000Z","last_edited_time":"2023-08-19T11:15:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"image","image":{"caption":[],"type":"file","file":{"url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/3c6255ea-b6c7-4055-8126-638d2819f0c3/227fd8d6-d5f7-461b-a7ee-60a71489b525/PXL_20230819_1114158082.jpg?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240622%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240622T003404Z&X-Amz-Expires=3600&X-Amz-Signature=12f776f8d0189d6f288803d72ecfe74110a377cbe1739fc39b87d0b97d4a6335&X-Amz-SignedHeaders=host&x-id=GetObject","expiry_time":"2024-06-22T01:34:04.873Z"}}},{"object":"block","id":"ce4abad8-2e91-40cf-a7ec-13d2818be883","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:15:00.000Z","last_edited_time":"2023-08-19T11:59:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":true,"archived":false,"in_trash":false,"type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","text":{"content":"Cloudflare Workers","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Cloudflare Workers","href":null}],"color":"default"},"children":[{"object":"block","id":"30581dfe-43e3-4bb3-9b50-e721fb63269f","parent":{"type":"block_id","block_id":"ce4abad8-2e91-40cf-a7ec-13d2818be883"},"created_time":"2023-08-19T11:22:00.000Z","last_edited_time":"2023-08-19T11:23:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","text":{"content":"主役。すべてここで動いている。しかも無料枠。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"主役。すべてここで動いている。しかも無料枠。","href":null}],"color":"default"}},{"object":"block","id":"d97d0243-66c0-4f3e-b1c6-ad3ef637cd3c","parent":{"type":"block_id","block_id":"ce4abad8-2e91-40cf-a7ec-13d2818be883"},"created_time":"2023-08-19T11:40:00.000Z","last_edited_time":"2023-08-19T11:40:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","text":{"content":"Cron Trigger機能で、5分ごとに実行することにしている","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Cron Trigger機能で、5分ごとに実行することにしている","href":null}],"color":"default"}},{"object":"block","id":"a4f3c05f-bc34-4fee-bbe9-2d2ab05e2270","parent":{"type":"block_id","block_id":"ce4abad8-2e91-40cf-a7ec-13d2818be883"},"created_time":"2023-08-19T11:58:00.000Z","last_edited_time":"2023-08-19T11:59:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":true,"archived":false,"in_trash":false,"type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","text":{"content":"各種APIの秘密鍵やトークンは全部 Cloudflare Worker 側に保存して暗号化したものを流し込んでいる","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"各種APIの秘密鍵やトークンは全部 Cloudflare Worker 側に保存して暗号化したものを流し込んでいる","href":null}],"color":"default"},"children":[{"object":"block","id":"1a373a15-e59f-403d-8fe9-6028dca98bac","parent":{"type":"block_id","block_id":"a4f3c05f-bc34-4fee-bbe9-2d2ab05e2270"},"created_time":"2023-08-19T11:59:00.000Z","last_edited_time":"2023-08-19T11:59:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","text":{"content":"https://developers.cloudflare.com/workers/configuration/environment-variables/#add-secrets-to-your-project","link":{"url":"https://developers.cloudflare.com/workers/configuration/environment-variables/#add-secrets-to-your-project"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"https://developers.cloudflare.com/workers/configuration/environment-variables/#add-secrets-to-your-project","href":"https://developers.cloudflare.com/workers/configuration/environment-variables/#add-secrets-to-your-project"}],"color":"default"}}]}]},{"object":"block","id":"d067d257-ce9d-4421-974c-894f8c161a91","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:23:00.000Z","last_edited_time":"2023-08-19T11:40:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":true,"archived":false,"in_trash":false,"type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","text":{"content":"Notion","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Notion","href":null}],"color":"default"},"children":[{"object":"block","id":"ad9b49ca-0d30-42f1-828c-df7b527750c8","parent":{"type":"block_id","block_id":"d067d257-ce9d-4421-974c-894f8c161a91"},"created_time":"2023-08-19T11:23:00.000Z","last_edited_time":"2023-08-19T11:23:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","text":{"content":"ブックマークしたURLはここに保存されている。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"ブックマークしたURLはここに保存されている。","href":null}],"color":"default"}},{"object":"block","id":"011047d0-ae4e-4c22-9807-871b5ff52079","parent":{"type":"block_id","block_id":"d067d257-ce9d-4421-974c-894f8c161a91"},"created_time":"2023-08-19T11:23:00.000Z","last_edited_time":"2023-08-19T11:24:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","text":{"content":"Cloudflare WorkersからNotion APIを呼び出して使用する","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Cloudflare WorkersからNotion APIを呼び出して使用する","href":null}],"color":"default"}},{"object":"block","id":"85cee8c6-924e-4012-a6b1-fd2be604b427","parent":{"type":"block_id","block_id":"d067d257-ce9d-4421-974c-894f8c161a91"},"created_time":"2023-08-19T11:40:00.000Z","last_edited_time":"2023-08-19T11:41:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","text":{"content":"クロスポスト処理が済んだアイテムはNotion DBの方に処理済みフラグを書き込んで、複数回処理されないようにしている","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"クロスポスト処理が済んだアイテムはNotion DBの方に処理済みフラグを書き込んで、複数回処理されないようにしている","href":null}],"color":"default"}}]},{"object":"block","id":"708cb4dd-06fa-429a-8172-681619b751a7","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:24:00.000Z","last_edited_time":"2023-08-19T11:27:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":true,"archived":false,"in_trash":false,"type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","text":{"content":"クロスポスト先","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"クロスポスト先","href":null}],"color":"default"},"children":[{"object":"block","id":"e57f0c74-185a-4d2d-91d6-76480693e8a2","parent":{"type":"block_id","block_id":"708cb4dd-06fa-429a-8172-681619b751a7"},"created_time":"2023-08-19T11:26:00.000Z","last_edited_time":"2023-08-19T11:26:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","text":{"content":"Misskey API","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Misskey API","href":null}],"color":"default"}},{"object":"block","id":"c048334c-fbca-41b2-a0c7-d401f8d961a2","parent":{"type":"block_id","block_id":"708cb4dd-06fa-429a-8172-681619b751a7"},"created_time":"2023-08-19T11:24:00.000Z","last_edited_time":"2023-08-19T11:26:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","text":{"content":"Bluesky (AT Protocol)","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Bluesky (AT Protocol)","href":null}],"color":"default"}},{"object":"block","id":"b5ccda2a-e648-4c37-bd0b-fd52bc6472ee","parent":{"type":"block_id","block_id":"708cb4dd-06fa-429a-8172-681619b751a7"},"created_time":"2023-08-19T11:24:00.000Z","last_edited_time":"2023-08-19T11:26:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","text":{"content":"Twitter API v2 (無料プラン)","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Twitter API v2 (無料プラン)","href":null}],"color":"default"}}]},{"object":"block","id":"c48662ec-ac3f-4b61-b8e6-5d797b5bee51","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:27:00.000Z","last_edited_time":"2023-08-19T12:03:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[],"color":"default"}},{"object":"block","id":"be1aded4-a34a-4687-87cc-4eaeedc405fb","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:27:00.000Z","last_edited_time":"2023-08-19T12:04:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"別にOSSとして使えるとは思っていないが、隠す理由が特にないので公開レポジトリにした。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"別にOSSとして使えるとは思っていないが、隠す理由が特にないので公開レポジトリにした。","href":null}],"color":"default"}},{"object":"block","id":"2289a908-e90e-4f27-bc49-cc9e6d0c0b3d","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T12:03:00.000Z","last_edited_time":"2023-12-24T00:19:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"480a5159-f46b-4a81-895c-9d56a207d9cc"},"has_children":false,"archived":false,"in_trash":false,"type":"link_preview","link_preview":{"url":"https://github.com/lacolaco/feed2social"}},{"object":"block","id":"a4020880-c77c-42a8-ac65-2210b6dacd64","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:27:00.000Z","last_edited_time":"2023-08-19T11:27:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"クロスポスト実装","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"クロスポスト実装","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"cb274004-3321-4771-8abc-5196b3967052","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:27:00.000Z","last_edited_time":"2023-08-19T11:27:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"heading_3","heading_3":{"rich_text":[{"type":"text","text":{"content":"Misskey","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Misskey","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"6f2494a1-05f9-4313-96c1-e892aa11a168","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:28:00.000Z","last_edited_time":"2023-08-19T11:30:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"Misskey のAPIは、ActivityPubのメンタルモデルがだいたいわかっていれば、あとはエンドポイントごとのドキュメントを読めば特に困ることはない。Misskey APIの認証はシークレットトークンをリクエストボディの ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Misskey のAPIは、ActivityPubのメンタルモデルがだいたいわかっていれば、あとはエンドポイントごとのドキュメントを読めば特に困ることはない。Misskey APIの認証はシークレットトークンをリクエストボディの ","href":null},{"type":"text","text":{"content":"i","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"i","href":null},{"type":"text","text":{"content":" フィールドにセットすればよい。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" フィールドにセットすればよい。","href":null}],"color":"default"}},{"object":"block","id":"2cadc680-b744-4975-8cf2-0f5a6332db59","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:28:00.000Z","last_edited_time":"2023-08-19T11:28:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"bookmark","bookmark":{"caption":[],"url":"https://misskey-hub.net/docs/api/endpoints/notes/create.html"}},{"object":"block","id":"4d942731-5200-495d-bc7d-1d9d1e2e7dfc","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:28:00.000Z","last_edited_time":"2023-08-19T11:28:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[],"color":"default"}},{"object":"block","id":"1648008f-48a7-4de3-bcbd-c9d318648880","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:28:00.000Z","last_edited_time":"2023-08-19T11:30:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"/**\n * Post a message to Misskey.\n *\n * @see https://misskey-hub.net/docs/api/endpoints/notes/create.html\n */\nexport async function createMisskeyNote(item: FeedItem, authToken: string) {\n  const text = `🔖 \"${item.title}\" ${item.url} #laco_feed`;\n  await fetch('https://misskey.io/api/notes/create', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ text: text, i: authToken }),\n  });\n}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"/**\n * Post a message to Misskey.\n *\n * @see https://misskey-hub.net/docs/api/endpoints/notes/create.html\n */\nexport async function createMisskeyNote(item: FeedItem, authToken: string) {\n  const text = `🔖 \"${item.title}\" ${item.url} #laco_feed`;\n  await fetch('https://misskey.io/api/notes/create', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ text: text, i: authToken }),\n  });\n}","href":null}],"language":"typescript"}},{"object":"block","id":"fc8d34c5-a946-4898-b0b8-664ead7832b5","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:30:00.000Z","last_edited_time":"2023-08-19T11:30:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[],"color":"default"}},{"object":"block","id":"d6d1efd5-a5a1-4e86-b839-d89bf20af247","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:30:00.000Z","last_edited_time":"2023-08-19T11:30:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"heading_3","heading_3":{"rich_text":[{"type":"text","text":{"content":"Bluesky (AT Protocol)","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Bluesky (AT Protocol)","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"c0c7bac4-a21a-459d-ab5f-e95d07093eba","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:31:00.000Z","last_edited_time":"2023-08-19T11:32:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"Bluesky の機能はBlueskyが準拠しているAT Protocolによって呼び出せる。 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Bluesky の機能はBlueskyが準拠しているAT Protocolによって呼び出せる。 ","href":null},{"type":"text","text":{"content":"@atproto/api","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"@atproto/api","href":null},{"type":"text","text":{"content":" パッケージを使えば特に困ることはない。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" パッケージを使えば特に困ることはない。","href":null}],"color":"default"}},{"object":"block","id":"42c813fe-e9f4-4f13-be5f-0af4c8bfbfe4","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:33:00.000Z","last_edited_time":"2023-08-19T11:33:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"認証については、Blueskyの設定画面で発行できる “App Password” を使い、パスワード認証を行う。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"認証については、Blueskyの設定画面で発行できる “App Password” を使い、パスワード認証を行う。","href":null}],"color":"default"}},{"object":"block","id":"270857a7-ce85-421d-bbde-27468cfb2e5e","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:30:00.000Z","last_edited_time":"2023-08-19T11:32:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"参考にした記事: ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"参考にした記事: ","href":null}],"color":"default"}},{"object":"block","id":"f3268009-2214-4e66-83a4-c54616a43ddc","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:32:00.000Z","last_edited_time":"2023-08-19T11:32:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"bookmark","bookmark":{"caption":[],"url":"https://www.memory-lovers.blog/entry/2023/07/09/152224"}},{"object":"block","id":"f7d72cce-c68d-4020-857a-7e35aefed018","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:30:00.000Z","last_edited_time":"2023-08-19T11:30:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"import { BskyAgent, RichText } from '@atproto/api';\n\nconst bsky = new BskyAgent({ service: 'https://bsky.social' });\n\n/**\n * Post a message to Bluesky.\n */\nexport async function createBlueskyPost(item: FeedItem, identifier: string, password: string) {\n  await bsky.login({ identifier, password });\n\n  const text = `🔖 \"${item.title}\" ${item.url}`;\n\n  const rt = new RichText({ text });\n  await rt.detectFacets(bsky);\n\n  await bsky.post({ text: rt.text, facets: rt.facets });\n}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"import { BskyAgent, RichText } from '@atproto/api';\n\nconst bsky = new BskyAgent({ service: 'https://bsky.social' });\n\n/**\n * Post a message to Bluesky.\n */\nexport async function createBlueskyPost(item: FeedItem, identifier: string, password: string) {\n  await bsky.login({ identifier, password });\n\n  const text = `🔖 \"${item.title}\" ${item.url}`;\n\n  const rt = new RichText({ text });\n  await rt.detectFacets(bsky);\n\n  await bsky.post({ text: rt.text, facets: rt.facets });\n}","href":null}],"language":"typescript"}},{"object":"block","id":"a81a7cee-c466-4b6d-9ba4-654c768e27f4","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:30:00.000Z","last_edited_time":"2023-08-19T11:32:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[],"color":"default"}},{"object":"block","id":"1ca950f2-1fb1-45f7-8634-7f1ab29fef28","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:30:00.000Z","last_edited_time":"2023-08-19T11:32:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"heading_3","heading_3":{"rich_text":[{"type":"text","text":{"content":"Twitter ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Twitter ","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"f729d4f4-a5e6-464e-87d4-0915288f4938","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:32:00.000Z","last_edited_time":"2023-08-19T11:36:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"かなり苦戦した。ふつうの Node.js サーバーだったらもっと簡単だったが、Cloudflare Workersのエッジ環境であることで、クロスポスト先の中で一番OSSも豊富なはずのTwitter APIだが、全然先人の実装を利用できなかった。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"かなり苦戦した。ふつうの Node.js サーバーだったらもっと簡単だったが、Cloudflare Workersのエッジ環境であることで、クロスポスト先の中で一番OSSも豊富なはずのTwitter APIだが、全然先人の実装を利用できなかった。","href":null}],"color":"default"}},{"object":"block","id":"86d584f3-751e-4bd2-81cd-d08eba826772","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:54:00.000Z","last_edited_time":"2023-08-19T11:54:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"投稿の文字列長を調整するのはazuさんの ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"投稿の文字列長を調整するのはazuさんの ","href":null},{"type":"text","text":{"content":"tweet-truncator","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"tweet-truncator","href":null},{"type":"text","text":{"content":" を使わせてもらった。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" を使わせてもらった。","href":null}],"color":"default"}},{"object":"block","id":"f937765f-be00-4bcc-a27e-5ee2935c14b9","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:54:00.000Z","last_edited_time":"2023-12-24T00:19:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"480a5159-f46b-4a81-895c-9d56a207d9cc"},"has_children":false,"archived":false,"in_trash":false,"type":"link_preview","link_preview":{"url":"https://github.com/azu/tweet-truncator"}},{"object":"block","id":"466baa9c-04af-4110-8216-0e8c0a12d911","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:32:00.000Z","last_edited_time":"2023-08-19T11:54:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"import encBase64 from 'crypto-js/enc-base64';\nimport hmacSha1 from 'crypto-js/hmac-sha1';\nimport OAuth from 'oauth-1.0a';\nimport { truncate } from 'tweet-truncator';\n\n/**\n * Post a message to Twitter.\n *\n * @see https://developer.twitter.com/en/docs/twitter-api/tweets/manage-tweets/api-reference/post-tweets\n */\nexport async function createTwitterPost(\n  item: FeedItem,\n  credentials: { consumerKey: string; consumerSecret: string; accessToken: string; accessSecret: string },\n) {\n  const text = truncate(\n    { title: item.title, url: item.url, tags: ['#laco_feed'] },\n    {\n      defaultPrefix: '🔖',\n      template: '\"%title%\" %url% %tags%',\n      truncatedOrder: ['title'],\n    },\n  );\n\n  const req: OAuth.RequestOptions = {\n    url: 'https://api.twitter.com/2/tweets',\n    method: 'POST',\n    data: { text },\n    includeBodyHash: true, // v1.1における `include_entities` に相当\n  };\n\n  const oauth = new OAuth({\n    consumer: { key: credentials.consumerKey, secret: credentials.consumerSecret },\n    signature_method: 'HMAC-SHA1',\n    hash_function(base_string, key) {\n      return hmacSha1(base_string, key).toString(encBase64);\n    },\n  });\n\n  const oauthHeader = oauth.toHeader(oauth.authorize(req, { key: credentials.accessToken, secret: credentials.accessSecret }));\n  const resp = await fetch(req.url, {\n    method: req.method,\n    headers: {\n      'Content-Type': 'application/json',\n      ...oauthHeader,\n    },\n    body: JSON.stringify(req.data),\n  });\n\n  if (!resp.ok) {\n    const body = await resp.text();\n    console.error(body);\n    throw new Error(`failed to post to Twitter`);\n  }\n}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"import encBase64 from 'crypto-js/enc-base64';\nimport hmacSha1 from 'crypto-js/hmac-sha1';\nimport OAuth from 'oauth-1.0a';\nimport { truncate } from 'tweet-truncator';\n\n/**\n * Post a message to Twitter.\n *\n * @see https://developer.twitter.com/en/docs/twitter-api/tweets/manage-tweets/api-reference/post-tweets\n */\nexport async function createTwitterPost(\n  item: FeedItem,\n  credentials: { consumerKey: string; consumerSecret: string; accessToken: string; accessSecret: string },\n) {\n  const text = truncate(\n    { title: item.title, url: item.url, tags: ['#laco_feed'] },\n    {\n      defaultPrefix: '🔖',\n      template: '\"%title%\" %url% %tags%',\n      truncatedOrder: ['title'],\n    },\n  );\n\n  const req: OAuth.RequestOptions = {\n    url: 'https://api.twitter.com/2/tweets',\n    method: 'POST',\n    data: { text },\n    includeBodyHash: true, // v1.1における `include_entities` に相当\n  };\n\n  const oauth = new OAuth({\n    consumer: { key: credentials.consumerKey, secret: credentials.consumerSecret },\n    signature_method: 'HMAC-SHA1',\n    hash_function(base_string, key) {\n      return hmacSha1(base_string, key).toString(encBase64);\n    },\n  });\n\n  const oauthHeader = oauth.toHeader(oauth.authorize(req, { key: credentials.accessToken, secret: credentials.accessSecret }));\n  const resp = await fetch(req.url, {\n    method: req.method,\n    headers: {\n      'Content-Type': 'application/json',\n      ...oauthHeader,\n    },\n    body: JSON.stringify(req.data),\n  });\n\n  if (!resp.ok) {\n    const body = await resp.text();\n    console.error(body);\n    throw new Error(`failed to post to Twitter`);\n  }\n}","href":null}],"language":"typescript"}},{"object":"block","id":"3e1dd2e9-4d10-46d4-8257-d5acc66cf27a","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T10:58:00.000Z","last_edited_time":"2023-08-19T11:30:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"Cloudflare Workers では ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Cloudflare Workers では ","href":null},{"type":"text","text":{"content":"node:crypto","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"node:crypto","href":null},{"type":"text","text":{"content":" が使えない問題","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" が使えない問題","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"de0de7ab-9328-44c6-b765-33ed7a23bb23","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T10:58:00.000Z","last_edited_time":"2023-08-19T11:02:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"Twitter API v2にリクエストを送るにあたり、OAuth 1.0aに準拠する必要があったが、これに手こずった。なぜかというと、npmに上がっている多くのTwitter APIクライアント実装や、OAuth 1.0実装の多くがNode.jsの ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Twitter API v2にリクエストを送るにあたり、OAuth 1.0aに準拠する必要があったが、これに手こずった。なぜかというと、npmに上がっている多くのTwitter APIクライアント実装や、OAuth 1.0実装の多くがNode.jsの ","href":null},{"type":"text","text":{"content":"crypto","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"crypto","href":null},{"type":"text","text":{"content":" モジュールに依存しているからだ。具体的には署名を作成する際のハッシュ形式が ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" モジュールに依存しているからだ。具体的には署名を作成する際のハッシュ形式が ","href":null},{"type":"text","text":{"content":"HMAC-SHA1","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"HMAC-SHA1","href":null},{"type":"text","text":{"content":" なので、その実装に ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" なので、その実装に ","href":null},{"type":"text","text":{"content":"crypto.createHmac","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"crypto.createHmac","href":null},{"type":"text","text":{"content":" が使われているわけだが、これが Cloudflare Workers にはない。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" が使われているわけだが、これが Cloudflare Workers にはない。","href":null}],"color":"default"}},{"object":"block","id":"a701d440-e2da-454b-b268-9bc5f9dd70f9","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:02:00.000Z","last_edited_time":"2023-08-19T11:10:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"Cloudflare Workers には ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Cloudflare Workers には ","href":null},{"type":"text","text":{"content":"node_compat","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"node_compat","href":null},{"type":"text","text":{"content":" という機能があり、Node.js APIをポリフィルしてくれるのだが、残念ながら ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" という機能があり、Node.js APIをポリフィルしてくれるのだが、残念ながら ","href":null},{"type":"text","text":{"content":"crypto.createHmac","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"crypto.createHmac","href":null},{"type":"text","text":{"content":" は含まれていなかった。Cloudflare Workersは WebCrypto APIのサポートはあるのだが、このAPIでは HMAC-SHA1 形式でハッシュ生成 (digest) することはできなさそうだった。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" は含まれていなかった。Cloudflare Workersは WebCrypto APIのサポートはあるのだが、このAPIでは HMAC-SHA1 形式でハッシュ生成 (digest) することはできなさそうだった。","href":null}],"color":"default"}},{"object":"block","id":"b5c461c3-5f42-4ef2-9b51-91e390c67eea","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:04:00.000Z","last_edited_time":"2023-08-19T11:04:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"bookmark","bookmark":{"caption":[],"url":"https://developers.cloudflare.com/workers/runtime-apis/nodejs/"}},{"object":"block","id":"ad00375f-ec98-469c-bebc-a93a07edf651","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:10:00.000Z","last_edited_time":"2023-08-19T11:10:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"bookmark","bookmark":{"caption":[],"url":"https://developers.cloudflare.com/workers/runtime-apis/web-crypto/#supported-algorithms"}},{"object":"block","id":"dafd0997-1c51-4d67-a958-a6389e29648d","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T10:58:00.000Z","last_edited_time":"2023-08-19T11:10:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"結局どうしたかというと、 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"結局どうしたかというと、 ","href":null},{"type":"text","text":{"content":"oauth-1.0a","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"oauth-1.0a","href":null},{"type":"text","text":{"content":" というライブラリと、 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" というライブラリと、 ","href":null},{"type":"text","text":{"content":"crypto-js","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"crypto-js","href":null},{"type":"text","text":{"content":" というライブラリの合わせ技で解決できた。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" というライブラリの合わせ技で解決できた。","href":null}],"color":"default"}},{"object":"block","id":"8eef2660-7a2c-4d5d-b1ba-84a15a4e25e5","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:05:00.000Z","last_edited_time":"2023-08-19T11:05:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"bookmark","bookmark":{"caption":[],"url":"https://www.npmjs.com/package/oauth-1.0a"}},{"object":"block","id":"697e8114-d8ac-419c-88f5-8d5853f14265","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:05:00.000Z","last_edited_time":"2023-08-19T11:05:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"bookmark","bookmark":{"caption":[],"url":"https://www.npmjs.com/package/crypto-js"}},{"object":"block","id":"c427daff-27d2-42d2-8573-5491e1576403","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:06:00.000Z","last_edited_time":"2023-08-19T11:07:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"oauth-1.0a","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"oauth-1.0a","href":null},{"type":"text","text":{"content":" は OAuth 1.0aのヘッダ生成や署名の実装をしているが、ハッシュ関数部分だけ外から注入するように設計されている。なので、このライブラリは ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" は OAuth 1.0aのヘッダ生成や署名の実装をしているが、ハッシュ関数部分だけ外から注入するように設計されている。なので、このライブラリは ","href":null},{"type":"text","text":{"content":"crypto","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"crypto","href":null},{"type":"text","text":{"content":" に依存しておらず Worker でも使える。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" に依存しておらず Worker でも使える。","href":null}],"color":"default"}},{"object":"block","id":"fbcdc46c-140a-4de0-8611-fa8ebbe89c1a","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:07:00.000Z","last_edited_time":"2023-08-19T11:54:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"あとは HMAC-SHA1 形式のハッシュ生成ができる実装があればよいので、 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"あとは HMAC-SHA1 形式のハッシュ生成ができる実装があればよいので、 ","href":null},{"type":"text","text":{"content":"crypto-js","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"crypto-js","href":null},{"type":"text","text":{"content":" からその部分を借りた。 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" からその部分を借りた。 ","href":null},{"type":"text","text":{"content":"crypto-js","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"crypto-js","href":null},{"type":"text","text":{"content":" は Node.js でも browser でも使える、ということは当然 Node.js の標準モジュールには依存していないのである。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" は Node.js でも browser でも使える、ということは当然 Node.js の標準モジュールには依存していないのである。","href":null}],"color":"default"}},{"object":"block","id":"d6858534-f824-4051-bc94-dbb4c844c7d0","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:38:00.000Z","last_edited_time":"2023-08-19T11:55:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"所感","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"所感","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"b525588d-152e-4b21-928b-e3f7b465f926","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:54:00.000Z","last_edited_time":"2023-08-19T11:55:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","text":{"content":"自分で作れば無料！","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"自分で作れば無料！","href":null}],"color":"default"}},{"object":"block","id":"cce04f99-dc5e-43a8-a5fc-e14d3a86fcc4","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:55:00.000Z","last_edited_time":"2023-08-19T11:57:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","text":{"content":"どれもカテゴリとしては近いWebサービスなのに、認証方法もAPIのデザインも全然違うのでクロスポスト実装すると多様性が感じられる。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"どれもカテゴリとしては近いWebサービスなのに、認証方法もAPIのデザインも全然違うのでクロスポスト実装すると多様性が感じられる。","href":null}],"color":"default"}},{"object":"block","id":"884b6347-ff2e-4acd-a662-303f4c9a5677","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:08:00.000Z","last_edited_time":"2023-08-19T11:08:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[],"color":"default"}},{"object":"block","id":"e5ff2f87-c500-442a-aed9-4d8487e05a67","parent":{"type":"page_id","page_id":"69879d3d-0144-4aa2-9d3b-128b15689a53"},"created_time":"2023-08-19T11:06:00.000Z","last_edited_time":"2023-08-19T11:06:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[],"color":"default"}}]