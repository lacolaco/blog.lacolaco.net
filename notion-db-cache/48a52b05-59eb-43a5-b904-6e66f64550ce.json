[{"object":"block","id":"4207a760-3f3c-4439-afb1-55697f384b29","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:01:00.000Z","last_edited_time":"2022-02-26T08:15:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"https://contrib.rocks","link":{"url":"https://contrib.rocks/"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"https://contrib.rocks","href":"https://contrib.rocks/"},{"type":"text","text":{"content":" はGitHubのAPIから取得したコントリビューター情報からSVG画像を生成している。これまでは SVG.js を使ったTypeScriptでの実装だったが、興味本位でRustで実装したものをWebAssembly(wasm)として実行するようにしたところ、パフォーマンスが顕著に向上したためそのまま採用することにした。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" はGitHubのAPIから取得したコントリビューター情報からSVG画像を生成している。これまでは SVG.js を使ったTypeScriptでの実装だったが、興味本位でRustで実装したものをWebAssembly(wasm)として実行するようにしたところ、パフォーマンスが顕著に向上したためそのまま採用することにした。","href":null}],"color":"default"}},{"object":"block","id":"6465c39b-6204-469f-bb19-328f48a3cefb","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:11:00.000Z","last_edited_time":"2022-07-24T00:52:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"480a5159-f46b-4a81-895c-9d56a207d9cc"},"has_children":false,"archived":false,"type":"link_preview","link_preview":{"url":"https://github.com/lacolaco/contributors-img/pull/1089"}},{"object":"block","id":"20410c6c-73da-4ccd-8b61-77242d876e60","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:32:00.000Z","last_edited_time":"2022-02-26T05:34:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"Rustもwasmもまともに触ったのは今回がはじめてだったため、実装には洗練する余地が多分にあるだろうが、この記事ではとりあえず作業の記録を書き残す。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Rustもwasmもまともに触ったのは今回がはじめてだったため、実装には洗練する余地が多分にあるだろうが、この記事ではとりあえず作業の記録を書き残す。","href":null}],"color":"default"}},{"object":"block","id":"24a00656-ff2d-43f1-b31f-bb3e5cb8d1b7","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:07:00.000Z","last_edited_time":"2022-02-26T05:08:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"NxワークスペースにRustをセットアップする","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"NxワークスペースにRustをセットアップする","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"e980d5ab-a292-492d-9542-c46781d76f88","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:08:00.000Z","last_edited_time":"2022-02-26T05:15:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"まずはじめに、Nxのワークスペース内でRustの開発環境を整えた。Cargoにもワークスペース機能があり、複数のプロジェクトの依存関係解決を集約できる。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"まずはじめに、Nxのワークスペース内でRustの開発環境を整えた。Cargoにもワークスペース機能があり、複数のプロジェクトの依存関係解決を集約できる。","href":null}],"color":"default"}},{"object":"block","id":"0979e9f9-c3b7-473f-8102-aca7962911e2","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:15:00.000Z","last_edited_time":"2022-02-26T05:15:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"bookmark","bookmark":{"caption":[],"url":"https://doc.rust-jp.rs/book-ja/ch14-03-cargo-workspaces.html"}},{"object":"block","id":"e38e3351-b547-4037-b169-262d7ded7274","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:08:00.000Z","last_edited_time":"2022-02-26T05:17:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"ドキュメントに従い、ワークスペースのルートディレクトリに ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"ドキュメントに従い、ワークスペースのルートディレクトリに ","href":null},{"type":"text","text":{"content":"Cargo.toml","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"Cargo.toml","href":null},{"type":"text","text":{"content":" を作成して ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" を作成して ","href":null},{"type":"text","text":{"content":"members","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"members","href":null},{"type":"text","text":{"content":" を設定した。そしてNxワークスペースに ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" を設定した。そしてNxワークスペースに ","href":null},{"type":"text","text":{"content":"libs/renderer-rust","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"libs/renderer-rust","href":null},{"type":"text","text":{"content":" プロジェクトを作成し、プロジェクトルートにも ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" プロジェクトを作成し、プロジェクトルートにも ","href":null},{"type":"text","text":{"content":"Cargo.toml","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"Cargo.toml","href":null},{"type":"text","text":{"content":" を作成した。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" を作成した。","href":null}],"color":"default"}},{"object":"block","id":"c5b15844-6769-4e83-bade-3da0e9e308cf","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:17:00.000Z","last_edited_time":"2022-02-26T05:18:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"# Cargo.toml\n[workspace]\nmembers = [\n  \"libs/renderer-rust\"\n]","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"# Cargo.toml\n[workspace]\nmembers = [\n  \"libs/renderer-rust\"\n]","href":null}],"language":"plain text"}},{"object":"block","id":"24bc492f-695b-49dc-9e36-35f8938f78a6","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:17:00.000Z","last_edited_time":"2022-02-26T05:18:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"# libs/renderer-rust/Cargo.toml\n[package]\nedition = \"2021\"\nname = \"renderer\"\nversion = \"0.1.0\"","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"# libs/renderer-rust/Cargo.toml\n[package]\nedition = \"2021\"\nname = \"renderer\"\nversion = \"0.1.0\"","href":null}],"language":"plain text"}},{"object":"block","id":"5e0de471-9789-4acc-b635-857187580d14","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:05:00.000Z","last_edited_time":"2022-02-26T05:21:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"その後、パッケージのエントリポイントとなる ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"その後、パッケージのエントリポイントとなる ","href":null},{"type":"text","text":{"content":"libs/renderer-rust/src/lib.rs","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"libs/renderer-rust/src/lib.rs","href":null},{"type":"text","text":{"content":" を作成し、最低限の環境が整った。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" を作成し、最低限の環境が整った。","href":null}],"color":"default"}},{"object":"block","id":"4d05e7a8-23c2-4784-9792-795eedd2afa7","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:21:00.000Z","last_edited_time":"2022-02-26T05:21:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"heading_3","heading_3":{"rich_text":[{"type":"text","text":{"content":"Nxの ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Nxの ","href":null},{"type":"text","text":{"content":"implicitDependencies","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"implicitDependencies","href":null},{"type":"text","text":{"content":" に ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" に ","href":null},{"type":"text","text":{"content":"Cargo.toml","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"Cargo.toml","href":null},{"type":"text","text":{"content":" を追加","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" を追加","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"be80b8de-e314-44ae-8d2e-e0ddaad2c362","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:21:00.000Z","last_edited_time":"2022-02-26T05:22:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"Cargo.toml","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"Cargo.toml","href":null},{"type":"text","text":{"content":" に変更があればNxのキャッシュを破棄するように ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" に変更があればNxのキャッシュを破棄するように ","href":null},{"type":"text","text":{"content":"nx.json","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"nx.json","href":null},{"type":"text","text":{"content":" の ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" の ","href":null},{"type":"text","text":{"content":"implicitDependencies","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"implicitDependencies","href":null},{"type":"text","text":{"content":" を変更した。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" を変更した。","href":null}],"color":"default"}},{"object":"block","id":"0989a441-9d84-46b1-9be3-c6c12f3e6b51","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:22:00.000Z","last_edited_time":"2022-02-26T05:22:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"{\n\t\"implicitDependencies\": {\n    \"angular.json\": \"*\",\n    \"package.json\": \"*\",\n    \"tsconfig.json\": \"*\",\n    \"tslint.json\": \"*\",\n    \".eslintrc.json\": \"*\",\n    \"nx.json\": \"*\",\n    \"Cargo.toml\": \"*\"\n  }\n}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"{\n\t\"implicitDependencies\": {\n    \"angular.json\": \"*\",\n    \"package.json\": \"*\",\n    \"tsconfig.json\": \"*\",\n    \"tslint.json\": \"*\",\n    \".eslintrc.json\": \"*\",\n    \"nx.json\": \"*\",\n    \"Cargo.toml\": \"*\"\n  }\n}","href":null}],"language":"json"}},{"object":"block","id":"2850bf13-a264-4756-887e-e220e6b27109","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:22:00.000Z","last_edited_time":"2022-02-26T05:23:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"heading_3","heading_3":{"rich_text":[{"type":"text","text":{"content":"各種タスクの定義","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"各種タスクの定義","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"b7c231eb-9880-4390-a823-3568cfe83f3c","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:23:00.000Z","last_edited_time":"2022-02-26T05:26:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"Rustプロジェクトへの自動テストやLintなどのタスクをNxで実行できるターゲットとして定義した。今回は ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Rustプロジェクトへの自動テストやLintなどのタスクをNxで実行できるターゲットとして定義した。今回は ","href":null},{"type":"text","text":{"content":"@nrwl/workspace:run-commands","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"@nrwl/workspace:run-commands","href":null},{"type":"text","text":{"content":" でシェルコマンドを実行した。 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" でシェルコマンドを実行した。 ","href":null},{"type":"text","text":{"content":"cargo","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"cargo","href":null},{"type":"text","text":{"content":" コマンドは実行したカレントディレクトリを起点にして実行する思想なようで、 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" コマンドは実行したカレントディレクトリを起点にして実行する思想なようで、 ","href":null},{"type":"text","text":{"content":"tsc","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"tsc","href":null},{"type":"text","text":{"content":" の ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" の ","href":null},{"type":"text","text":{"content":"--project","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"--project","href":null},{"type":"text","text":{"content":" のようなスコーピングの仕組みが見当たらなかったため、 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" のようなスコーピングの仕組みが見当たらなかったため、 ","href":null},{"type":"text","text":{"content":"cwd","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"cwd","href":null},{"type":"text","text":{"content":" オプションでカレントディレクトリを変更した。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" オプションでカレントディレクトリを変更した。","href":null}],"color":"default"}},{"object":"block","id":"fe68a86a-841f-4852-930c-eead5a65e199","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:26:00.000Z","last_edited_time":"2022-02-26T07:03:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"  \"renderer-rust\": {\n    \"root\": \"libs/renderer-rust\",\n    \"sourceRoot\": \"libs/renderer-rust/src\",\n    \"projectType\": \"library\",\n    \"architect\": {\n      \"lint\": {\n        \"builder\": \"@nrwl/workspace:run-commands\",\n        \"options\": {\n          \"command\": \"cargo clippy\",\n          \"cwd\": \"libs/renderer-rust\"\n        }\n      },\n      \"test\": {\n        \"builder\": \"@nrwl/workspace:run-commands\",\n        \"options\": {\n          \"command\": \"cargo test\",\n          \"cwd\": \"libs/renderer-rust\"\n        }\n      }\n    }\n  },","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"  \"renderer-rust\": {\n    \"root\": \"libs/renderer-rust\",\n    \"sourceRoot\": \"libs/renderer-rust/src\",\n    \"projectType\": \"library\",\n    \"architect\": {\n      \"lint\": {\n        \"builder\": \"@nrwl/workspace:run-commands\",\n        \"options\": {\n          \"command\": \"cargo clippy\",\n          \"cwd\": \"libs/renderer-rust\"\n        }\n      },\n      \"test\": {\n        \"builder\": \"@nrwl/workspace:run-commands\",\n        \"options\": {\n          \"command\": \"cargo test\",\n          \"cwd\": \"libs/renderer-rust\"\n        }\n      }\n    }\n  },","href":null}],"language":"json"}},{"object":"block","id":"ef46f47d-c37b-4d6a-8cd3-a6ccdff55220","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:26:00.000Z","last_edited_time":"2022-02-26T05:27:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"heading_3","heading_3":{"rich_text":[{"type":"text","text":{"content":"wasm-packを使ったビルド","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"wasm-packを使ったビルド","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"f2f0f5f2-9ef5-4a13-a663-1c60ca414d15","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:27:00.000Z","last_edited_time":"2022-02-26T05:28:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"今回はRustプロジェクトをNode.jsのプロジェクトから読み込めるwasmパッケージにビルドしたいため、wasm-packを利用した。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"今回はRustプロジェクトをNode.jsのプロジェクトから読み込めるwasmパッケージにビルドしたいため、wasm-packを利用した。","href":null}],"color":"default"}},{"object":"block","id":"0fe9fc39-6f84-4de0-8056-894b3ebf8048","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:29:00.000Z","last_edited_time":"2022-02-26T05:29:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"bookmark","bookmark":{"caption":[],"url":"https://rustwasm.github.io/wasm-pack/book/"}},{"object":"block","id":"70026d17-3e55-4979-b91b-c666314a177b","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:29:00.000Z","last_edited_time":"2022-02-26T05:32:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"wasm-pack","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"wasm-pack","href":null},{"type":"text","text":{"content":" の ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" の ","href":null},{"type":"text","text":{"content":"build","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"build","href":null},{"type":"text","text":{"content":" コマンドは ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" コマンドは ","href":null},{"type":"text","text":{"content":"--out-dir","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"--out-dir","href":null},{"type":"text","text":{"content":" オプションで出力先ディレクトリを変更できるが、この引数は常にパッケージルートからの相対パスで解決されるようだったため、他のプロジェクトと同じようにワークスペースルートの ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" オプションで出力先ディレクトリを変更できるが、この引数は常にパッケージルートからの相対パスで解決されるようだったため、他のプロジェクトと同じようにワークスペースルートの ","href":null},{"type":"text","text":{"content":"dist","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"dist","href":null},{"type":"text","text":{"content":" ディレクトリ内へ出力させるために一工夫した。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" ディレクトリ内へ出力させるために一工夫した。","href":null}],"color":"default"}},{"object":"block","id":"17b65f6b-0735-4554-b0d5-e33688b212a6","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:27:00.000Z","last_edited_time":"2022-02-26T05:29:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"\n  \"build\": {\n    \"builder\": \"@nrwl/workspace:run-commands\",\n    \"outputs\": [\"dist/libs/renderer-rust\"],\n    \"options\": {\n      \"command\": \"wasm-pack build --target nodejs --out-dir ../../dist/libs/renderer-rust\",\n      \"cwd\": \"libs/renderer-rust\"\n    },\n    \"configurations\": {\n      \"production\": {}\n    }\n  }","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"\n  \"build\": {\n    \"builder\": \"@nrwl/workspace:run-commands\",\n    \"outputs\": [\"dist/libs/renderer-rust\"],\n    \"options\": {\n      \"command\": \"wasm-pack build --target nodejs --out-dir ../../dist/libs/renderer-rust\",\n      \"cwd\": \"libs/renderer-rust\"\n    },\n    \"configurations\": {\n      \"production\": {}\n    }\n  }","href":null}],"language":"json"}},{"object":"block","id":"8bc32569-0ebe-4a77-8f86-975d7dd169f1","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:34:00.000Z","last_edited_time":"2022-02-26T05:34:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"Rust実装","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Rust実装","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"c6b9ada0-cb64-418f-ad4f-cd213839e7e4","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:35:00.000Z","last_edited_time":"2022-02-26T05:38:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"今回Rustで実装した関数は、TypeScriptでは次のようなシグニチャである。コントリビューターオブジェクトの配列を受け取り、SVG文字列を返すことを意味している。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"今回Rustで実装した関数は、TypeScriptでは次のようなシグニチャである。コントリビューターオブジェクトの配列を受け取り、SVG文字列を返すことを意味している。","href":null}],"color":"default"}},{"object":"block","id":"358f353f-15b2-485c-8d84-d3eafb9ddb47","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:36:00.000Z","last_edited_time":"2022-02-26T05:36:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"type Renderer = (contributors: Contributor[]) => Promise<string>;","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"type Renderer = (contributors: Contributor[]) => Promise<string>;","href":null}],"language":"typescript"}},{"object":"block","id":"fcd55486-4d97-4b1f-9200-d8f6fa42aba3","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:36:00.000Z","last_edited_time":"2022-02-26T05:39:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"このシグニチャはそのままで、SVG文字列を生成する内部実装だけをwasmで置換することを目標とした。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"このシグニチャはそのままで、SVG文字列を生成する内部実装だけをwasmで置換することを目標とした。","href":null}],"color":"default"}},{"object":"block","id":"350ad696-b18a-49cf-9f52-4057e5221262","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:39:00.000Z","last_edited_time":"2022-02-26T05:40:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"heading_3","heading_3":{"rich_text":[{"type":"text","text":{"content":"JSから配列を受け取るRust関数","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"JSから配列を受け取るRust関数","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"b7de5a22-878d-48d8-824a-ced2697e4fda","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:40:00.000Z","last_edited_time":"2022-02-26T05:44:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"コントリビューターオブジェクトの配列をRustの関数へ渡すには、","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"コントリビューターオブジェクトの配列をRustの関数へ渡すには、","href":null},{"type":"text","text":{"content":"Box<[JsValue]>","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"Box<[JsValue]>","href":null},{"type":"text","text":{"content":" 型の引数を定義する（この情報にたどり着くのに少し苦労した）。 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" 型の引数を定義する（この情報にたどり着くのに少し苦労した）。 ","href":null},{"type":"text","text":{"content":"JsValue","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"JsValue","href":null},{"type":"text","text":{"content":" は ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" は ","href":null},{"type":"text","text":{"content":"wasm-bindgen","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"wasm-bindgen","href":null},{"type":"text","text":{"content":" が提供する型で、JS側から受け取れる任意のオブジェクトに対応する型のようで、このままでは使えない。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" が提供する型で、JS側から受け取れる任意のオブジェクトに対応する型のようで、このままでは使えない。","href":null}],"color":"default"}},{"object":"block","id":"45cbbc81-9102-4f8e-9a5a-e08bdc500618","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:44:00.000Z","last_edited_time":"2022-02-26T05:44:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"bookmark","bookmark":{"caption":[],"url":"https://rustwasm.github.io/docs/wasm-bindgen/reference/types/boxed-jsvalue-slice.html"}},{"object":"block","id":"969fa0b2-2923-4105-9866-5e737a9adccc","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:44:00.000Z","last_edited_time":"2022-02-26T05:44:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"bookmark","bookmark":{"caption":[],"url":"https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen/struct.JsValue.html#"}},{"object":"block","id":"817aaf74-e421-4274-8f30-85a35cf82194","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:44:00.000Z","last_edited_time":"2022-02-26T05:48:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"Rustでも ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Rustでも ","href":null},{"type":"text","text":{"content":"Contributor","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"Contributor","href":null},{"type":"text","text":{"content":" 構造体を定義しておいて、 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" 構造体を定義しておいて、 ","href":null},{"type":"text","text":{"content":"JsValue","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"JsValue","href":null},{"type":"text","text":{"content":" 型から ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" 型から ","href":null},{"type":"text","text":{"content":"Contributor","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"Contributor","href":null},{"type":"text","text":{"content":" 型に変換するには ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" 型に変換するには ","href":null},{"type":"text","text":{"content":"into_serde()","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"into_serde()","href":null},{"type":"text","text":{"content":" メソッドを使った。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" メソッドを使った。","href":null}],"color":"default"}},{"object":"block","id":"d55af13e-6327-4ad0-ab7f-c1abfca4a7ab","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:49:00.000Z","last_edited_time":"2022-02-26T05:49:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"bookmark","bookmark":{"caption":[],"url":"https://rustwasm.github.io/docs/wasm-bindgen/reference/arbitrary-data-with-serde.html"}},{"object":"block","id":"b8423272-f6dc-459c-a2b2-0627cf61cbf8","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:49:00.000Z","last_edited_time":"2022-02-26T05:56:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"詳細はよくわかっていないが、 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"詳細はよくわかっていないが、 ","href":null},{"type":"text","text":{"content":"wasm-bindgen","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"wasm-bindgen","href":null},{"type":"text","text":{"content":" の ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" の ","href":null},{"type":"text","text":{"content":"serde-serialize","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"serde-serialize","href":null},{"type":"text","text":{"content":" 機能を有効にすると、 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" 機能を有効にすると、 ","href":null},{"type":"text","text":{"content":"serde","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"serde","href":null},{"type":"text","text":{"content":" という別のライブラリを使ったJSONと構造体の間のシリアライズ・デシリアライズができるようになるようだ。ドキュメントに従い、次のように ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" という別のライブラリを使ったJSONと構造体の間のシリアライズ・デシリアライズができるようになるようだ。ドキュメントに従い、次のように ","href":null},{"type":"text","text":{"content":"Contributor","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"Contributor","href":null},{"type":"text","text":{"content":" 構造体に必要なtraitを実装した。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" 構造体に必要なtraitを実装した。","href":null}],"color":"default"}},{"object":"block","id":"4ef7393c-1529-42b7-9106-3fed34d3c862","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:56:00.000Z","last_edited_time":"2022-02-26T05:56:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"use serde::{Deserialize, Serialize};\n\n#[derive(Serialize, Deserialize, Debug)]\npub struct Contributor {\n    pub avatar_url: String,\n    pub contributions: i32,\n    pub html_url: String,\n    pub id: i32,\n    pub login: String,\n}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"use serde::{Deserialize, Serialize};\n\n#[derive(Serialize, Deserialize, Debug)]\npub struct Contributor {\n    pub avatar_url: String,\n    pub contributions: i32,\n    pub html_url: String,\n    pub id: i32,\n    pub login: String,\n}","href":null}],"language":"rust"}},{"object":"block","id":"7bfdec01-eee3-4304-83aa-b788df521041","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:53:00.000Z","last_edited_time":"2022-02-26T05:57:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"これで ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"これで ","href":null},{"type":"text","text":{"content":"Box<[JsValue]>","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"Box<[JsValue]>","href":null},{"type":"text","text":{"content":" を ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" を ","href":null},{"type":"text","text":{"content":"[Contributor]","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"[Contributor]","href":null},{"type":"text","text":{"content":" に変換できるようになった。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" に変換できるようになった。","href":null}],"color":"default"}},{"object":"block","id":"30a21a21-e2e4-48ef-8a07-dbf5e3606cbb","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:57:00.000Z","last_edited_time":"2022-02-26T06:02:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"use wasm_bindgen::prelude::*;\n\n#[wasm_bindgen]\npub fn render(contributors: Box<[JsValue]>) -> String {\n    let parsed = contributors\n            .iter()\n            .map(|item| item.into_serde().unwrap())\n            .collect::<Vec<Contributor>>()\n            .as_slice();\n\t\t//...\n}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"use wasm_bindgen::prelude::*;\n\n#[wasm_bindgen]\npub fn render(contributors: Box<[JsValue]>) -> String {\n    let parsed = contributors\n            .iter()\n            .map(|item| item.into_serde().unwrap())\n            .collect::<Vec<Contributor>>()\n            .as_slice();\n\t\t//...\n}","href":null}],"language":"rust"}},{"object":"block","id":"45c7fdf9-9708-495b-b0be-3620c54f21bb","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:58:00.000Z","last_edited_time":"2022-02-26T05:59:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"heading_3","heading_3":{"rich_text":[{"type":"text","text":{"content":"SVG文字列の生成","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"SVG文字列の生成","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"d66b61b1-871d-48fa-8bf5-35b50dc9ce4b","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T05:59:00.000Z","last_edited_time":"2022-02-26T06:00:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"SVGの組み立ては ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"SVGの組み立ては ","href":null},{"type":"text","text":{"content":"svg","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"svg","href":null},{"type":"text","text":{"content":" ライブラリを利用した。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" ライブラリを利用した。","href":null}],"color":"default"}},{"object":"block","id":"ed200ad1-746f-488b-b07e-13a47e825b7b","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T06:00:00.000Z","last_edited_time":"2022-02-26T06:00:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"bookmark","bookmark":{"caption":[],"url":"https://docs.rs/svg/latest/svg/"}},{"object":"block","id":"7d0fb7d8-1a9c-47e7-8513-31a12d088b74","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T06:00:00.000Z","last_edited_time":"2022-02-26T06:04:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"特に癖のないAPIだったためSVG自体の知識があれば難なく使えた。逆にいままで SVG.js が暗黙的に設定していた属性に依存していたことがわかり、その調査に手間取ることになった。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"特に癖のないAPIだったためSVG自体の知識があれば難なく使えた。逆にいままで SVG.js が暗黙的に設定していた属性に依存していたことがわかり、その調査に手間取ることになった。","href":null}],"color":"default"}},{"object":"block","id":"83838405-2c0a-408c-85f4-1b03a85d6489","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T06:03:00.000Z","last_edited_time":"2022-02-26T06:04:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"パフォーマンスのベンチマーク","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"パフォーマンスのベンチマーク","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"5d856f15-eb8d-4eb8-b40c-cfbb7f46eb9f","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T06:05:00.000Z","last_edited_time":"2022-02-26T06:06:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"同じ入力から同等の出力が得られるようになったところで、従来の実装と新しいRust+wasm実装でSVG生成にかかる時間を計測し、パフォーマンスを比較してみた。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"同じ入力から同等の出力が得られるようになったところで、従来の実装と新しいRust+wasm実装でSVG生成にかかる時間を計測し、パフォーマンスを比較してみた。","href":null}],"color":"default"}},{"object":"block","id":"a49c36e9-88fb-4af8-a55c-366de8b8dd80","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T06:06:00.000Z","last_edited_time":"2022-02-26T06:08:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"計測は同じ引数での関数呼び出しを十分な回数繰り返し、合計時間を回数で割った平均時間を比較することとした。入力の配列の長さによる傾向も知りたかったので、データサイズごとに計測した。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"計測は同じ引数での関数呼び出しを十分な回数繰り返し、合計時間を回数で割った平均時間を比較することとした。入力の配列の長さによる傾向も知りたかったので、データサイズごとに計測した。","href":null}],"color":"default"}},{"object":"block","id":"879497c1-ab97-41a3-938a-a95d9e31cde0","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T06:08:00.000Z","last_edited_time":"2022-02-26T06:09:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"async function benchmark_js(times: number, contributors: Contributor[]) {\n  performance.mark('js:start');\n  for (let index = 0; index < times; index++) {\n    await renderer_js(contributors);\n  }\n  performance.mark('js:stop');\n  performance.measure('js', 'js:start', 'js:stop');\n}\n\nasync function benchmark_rust(times: number, contributors: Contributor[]) {\n  performance.mark('rust:start');\n  for (let index = 0; index < times; index++) {\n    await renderer_rust(contributors);\n  }\n  performance.mark('rust:stop');\n  performance.measure('rust', 'rust:start', 'rust:stop');\n}\n\nasync function main() {\n  console.log('start benchmark');\n  const times = 1000;\n\n  async function run(dataSize: number) {\n    console.log(`=== data size: ${dataSize} ===`);\n    const contributors = new Array(dataSize).fill(null).map((_, i) => createMockContributor({ login: `login${i}` }));\n    await benchmark_js(times, contributors);\n    await benchmark_rust(times, contributors);\n    for (const measure of performance.getEntriesByType('measure')) {\n      console.log(`${measure.name}: ${(measure.duration / times).toPrecision(2)}ms`);\n    }\n    performance.clearMarks();\n    performance.clearMeasures();\n  }\n\n  await run(1);\n  await run(2);\n  await run(5);\n  await run(10);\n  await run(20);\n  await run(50);\n  await run(100);\n}\n\nmain();","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"async function benchmark_js(times: number, contributors: Contributor[]) {\n  performance.mark('js:start');\n  for (let index = 0; index < times; index++) {\n    await renderer_js(contributors);\n  }\n  performance.mark('js:stop');\n  performance.measure('js', 'js:start', 'js:stop');\n}\n\nasync function benchmark_rust(times: number, contributors: Contributor[]) {\n  performance.mark('rust:start');\n  for (let index = 0; index < times; index++) {\n    await renderer_rust(contributors);\n  }\n  performance.mark('rust:stop');\n  performance.measure('rust', 'rust:start', 'rust:stop');\n}\n\nasync function main() {\n  console.log('start benchmark');\n  const times = 1000;\n\n  async function run(dataSize: number) {\n    console.log(`=== data size: ${dataSize} ===`);\n    const contributors = new Array(dataSize).fill(null).map((_, i) => createMockContributor({ login: `login${i}` }));\n    await benchmark_js(times, contributors);\n    await benchmark_rust(times, contributors);\n    for (const measure of performance.getEntriesByType('measure')) {\n      console.log(`${measure.name}: ${(measure.duration / times).toPrecision(2)}ms`);\n    }\n    performance.clearMarks();\n    performance.clearMeasures();\n  }\n\n  await run(1);\n  await run(2);\n  await run(5);\n  await run(10);\n  await run(20);\n  await run(50);\n  await run(100);\n}\n\nmain();","href":null}],"language":"typescript"}},{"object":"block","id":"2f8cae9e-2465-43a5-9aba-983953d66414","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T06:02:00.000Z","last_edited_time":"2022-02-26T06:11:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"その結果、ざっくり比較してRust+wasm実装のほうがJS実装よりも10倍近く速いことがわかった。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"その結果、ざっくり比較してRust+wasm実装のほうがJS実装よりも10倍近く速いことがわかった。","href":null}],"color":"default"}},{"object":"block","id":"2c41f296-31bd-44a9-9ee1-9f68adb4e6b6","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T06:11:00.000Z","last_edited_time":"2022-02-26T06:11:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"start benchmark\n=== data size: 1 ===\njs: 0.30ms\nrust: 0.017ms\n=== data size: 2 ===\njs: 0.30ms\nrust: 0.023ms\n=== data size: 5 ===\njs: 0.61ms\nrust: 0.052ms\n=== data size: 10 ===\njs: 1.1ms\nrust: 0.094ms\n=== data size: 20 ===\njs: 2.1ms\nrust: 0.18ms\n=== data size: 50 ===\njs: 5.2ms\nrust: 0.48ms\n=== data size: 100 ===\njs: 10ms\nrust: 0.89ms","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"start benchmark\n=== data size: 1 ===\njs: 0.30ms\nrust: 0.017ms\n=== data size: 2 ===\njs: 0.30ms\nrust: 0.023ms\n=== data size: 5 ===\njs: 0.61ms\nrust: 0.052ms\n=== data size: 10 ===\njs: 1.1ms\nrust: 0.094ms\n=== data size: 20 ===\njs: 2.1ms\nrust: 0.18ms\n=== data size: 50 ===\njs: 5.2ms\nrust: 0.48ms\n=== data size: 100 ===\njs: 10ms\nrust: 0.89ms","href":null}],"language":"plain text"}},{"object":"block","id":"f88e2254-c5d1-4227-b562-f9e76e0c8ad8","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T06:11:00.000Z","last_edited_time":"2022-02-26T06:15:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"実際のユースケースでは100件のデータで生成することはよくあるため、1回あたり10msかかる処理が1ms以下になるとなればなかなかの恩恵といえる。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"実際のユースケースでは100件のデータで生成することはよくあるため、1回あたり10msかかる処理が1ms以下になるとなればなかなかの恩恵といえる。","href":null}],"color":"default"}},{"object":"block","id":"bb78f1f7-c111-4b40-9cde-e359dd976062","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T06:13:00.000Z","last_edited_time":"2022-02-26T06:16:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"heading_3","heading_3":{"rich_text":[{"type":"text","text":{"content":"wasmパッケージをアプリケーションから読み込む","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"wasmパッケージをアプリケーションから読み込む","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"a6b72dc8-452d-447a-a6d7-5ab4a835737f","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T06:16:00.000Z","last_edited_time":"2022-02-26T06:28:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"Nxワークスペースで管理する別のアプリケーションから ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Nxワークスペースで管理する別のアプリケーションから ","href":null},{"type":"text","text":{"content":"wasm-pack","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"wasm-pack","href":null},{"type":"text","text":{"content":" でビルドしたパッケージを読み込むにあたって工夫が必要なことがあった。 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" でビルドしたパッケージを読み込むにあたって工夫が必要なことがあった。 ","href":null}],"color":"default"}},{"object":"block","id":"04a4b39b-4049-4d96-8af9-1ed2289b086e","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T06:28:00.000Z","last_edited_time":"2022-02-26T06:31:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"wasm-pack","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"wasm-pack","href":null},{"type":"text","text":{"content":" のNode.js向けビルドは内部で ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" のNode.js向けビルドは内部で ","href":null},{"type":"text","text":{"content":"__dirname","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"__dirname","href":null},{"type":"text","text":{"content":" を使って隣接する ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" を使って隣接する ","href":null},{"type":"text","text":{"content":".wasm","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":".wasm","href":null},{"type":"text","text":{"content":" ファイルを読み込むようになっているため、webpackなどでバンドルするアプリケーションから読み込むときにファイルが見つからなくなる。この問題は ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" ファイルを読み込むようになっているため、webpackなどでバンドルするアプリケーションから読み込むときにファイルが見つからなくなる。この問題は ","href":null},{"type":"text","text":{"content":"@nrwl/node:build","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"@nrwl/node:build","href":null},{"type":"text","text":{"content":" (最新では ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" (最新では ","href":null},{"type":"text","text":{"content":"@nrwl/node:webpack","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"@nrwl/node:webpack","href":null},{"type":"text","text":{"content":" ) の ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" ) の ","href":null},{"type":"text","text":{"content":"assets","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"assets","href":null},{"type":"text","text":{"content":" オプションでアプリケーションの出力ディレクトリへ ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" オプションでアプリケーションの出力ディレクトリへ ","href":null},{"type":"text","text":{"content":".wasm","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":".wasm","href":null},{"type":"text","text":{"content":" ファイルをコピーして解決した。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" ファイルをコピーして解決した。","href":null}],"color":"default"}},{"object":"block","id":"b9ce8090-9764-4ea1-a016-b92b2a3b766c","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T06:30:00.000Z","last_edited_time":"2022-02-26T06:53:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"\"assets\": [\n  {\n    \"input\": \"dist/libs/renderer-rust\",\n    \"glob\": \"*.wasm\",\n    \"output\": \".\"\n  }\n]","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"\"assets\": [\n  {\n    \"input\": \"dist/libs/renderer-rust\",\n    \"glob\": \"*.wasm\",\n    \"output\": \".\"\n  }\n]","href":null}],"language":"json"}},{"object":"block","id":"fad5adb1-06ea-49af-a435-3e5e1e7b2ccd","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T06:30:00.000Z","last_edited_time":"2022-02-26T06:32:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"これは ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"これは ","href":null},{"type":"text","text":{"content":"wasm-pack","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"wasm-pack","href":null},{"type":"text","text":{"content":" のビルドターゲットを ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" のビルドターゲットを ","href":null},{"type":"text","text":{"content":"bundle","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"bundle","href":null},{"type":"text","text":{"content":" にすればいいものだが、webpack v5ではデフォルトでWebAssemblyモジュール機能が無効になっている。実験的フラグを有効にするためにwebpackコンフィグに手を入れる必要があるため、今回は上記の解決方法でよしとした。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" にすればいいものだが、webpack v5ではデフォルトでWebAssemblyモジュール機能が無効になっている。実験的フラグを有効にするためにwebpackコンフィグに手を入れる必要があるため、今回は上記の解決方法でよしとした。","href":null}],"color":"default"}},{"object":"block","id":"fb1323e6-0052-4cd8-82d7-034f60924631","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T06:37:00.000Z","last_edited_time":"2022-02-26T06:37:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"GitHub ActionsでのCI","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"GitHub ActionsでのCI","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"e5c4e4de-681a-4300-bf6c-016b3f1ff4d7","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T06:41:00.000Z","last_edited_time":"2022-02-26T06:43:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"ビルドやテスト、デプロイはGitHub Actionsで実行しているため、各ジョブでNode.jsに加えてRustの環境を整える必要がある。今回ははじめてローカルアクションの機能を使ってみた。共有のステップ群を簡単に再利用可能なアクションとしてまとめるものだ。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"ビルドやテスト、デプロイはGitHub Actionsで実行しているため、各ジョブでNode.jsに加えてRustの環境を整える必要がある。今回ははじめてローカルアクションの機能を使ってみた。共有のステップ群を簡単に再利用可能なアクションとしてまとめるものだ。","href":null}],"color":"default"}},{"object":"block","id":"36a3c730-6d14-499e-b467-0fd3a65795e5","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T06:43:00.000Z","last_edited_time":"2022-02-26T06:43:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"bookmark","bookmark":{"caption":[],"url":"https://docs.github.com/en/actions/creating-actions/creating-a-composite-action"}},{"object":"block","id":"30ef1aa2-c9b7-4c51-8413-e21eb4fa744e","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T06:44:00.000Z","last_edited_time":"2022-02-26T06:46:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":".github/actions/setup-rust/action.yml","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":".github/actions/setup-rust/action.yml","href":null},{"type":"text","text":{"content":" を次のように作成し、CI/CDの各ワークフローから ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" を次のように作成し、CI/CDの各ワークフローから ","href":null},{"type":"text","text":{"content":"uses: ./.github/actions/setup-rust","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"uses: ./.github/actions/setup-rust","href":null},{"type":"text","text":{"content":" のように呼び出した。Compositeローカルアクションへの切り出しは非常にシンプルで使いやすかった。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" のように呼び出した。Compositeローカルアクションへの切り出しは非常にシンプルで使いやすかった。","href":null}],"color":"default"}},{"object":"block","id":"648a892e-4b9e-4e27-9f7b-0567b18b493e","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T06:41:00.000Z","last_edited_time":"2022-02-26T06:44:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"name: Setup Rust\n\nruns:\n  using: \"composite\"\n  steps:\n    - uses: actions-rs/toolchain@v1\n      with:\n        toolchain: stable\n        override: true\n        profile: minimal\n        components: clippy, rustfmt\n    - run: cargo install wasm-pack\n      shell: bash","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"name: Setup Rust\n\nruns:\n  using: \"composite\"\n  steps:\n    - uses: actions-rs/toolchain@v1\n      with:\n        toolchain: stable\n        override: true\n        profile: minimal\n        components: clippy, rustfmt\n    - run: cargo install wasm-pack\n      shell: bash","href":null}],"language":"yaml"}},{"object":"block","id":"35644b80-ec23-4fad-9293-e68de548ee01","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T06:32:00.000Z","last_edited_time":"2022-02-26T06:44:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"まとめ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"まとめ","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"ddaab376-9a73-4358-815e-a39f468d60bb","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T06:32:00.000Z","last_edited_time":"2022-02-26T06:36:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"Rustの学習を兼ねて思いつきでやってみたが、思っていた以上の効果が得られて驚いた。JSからRust+wasmへの置き換えで高速化するという話はいろんな場所で聞いていたが、実際に自分の小さなアプリケーションでも再現したのはいい経験になった。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Rustの学習を兼ねて思いつきでやってみたが、思っていた以上の効果が得られて驚いた。JSからRust+wasmへの置き換えで高速化するという話はいろんな場所で聞いていたが、実際に自分の小さなアプリケーションでも再現したのはいい経験になった。","href":null}],"color":"default"}},{"object":"block","id":"a5014f78-3623-40e5-8373-3a47ed200a19","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T06:56:00.000Z","last_edited_time":"2022-02-26T06:56:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"今回はSVG生成部分だけを置き換えたが、他の処理も今後置き換えを進めてみたい。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"今回はSVG生成部分だけを置き換えたが、他の処理も今後置き換えを進めてみたい。","href":null}],"color":"default"}},{"object":"block","id":"9cd45b9a-dad3-44b0-8f27-97d2f588a362","parent":{"type":"page_id","page_id":"48a52b05-59eb-43a5-b904-6e66f64550ce"},"created_time":"2022-02-26T06:46:00.000Z","last_edited_time":"2022-02-26T06:46:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[],"color":"default"}}]