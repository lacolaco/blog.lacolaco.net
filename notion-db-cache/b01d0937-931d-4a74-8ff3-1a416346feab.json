[{"object":"block","id":"ae7c321b-45c7-4834-8d71-a35fbbd79b98","parent":{"type":"page_id","page_id":"b01d0937-931d-4a74-8ff3-1a416346feab"},"created_time":"2023-12-04T12:31:00.000Z","last_edited_time":"2023-12-04T12:38:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"Angular v16で導入されたInput Transformsは、 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Angular v16で導入されたInput Transformsは、 ","href":null},{"type":"text","text":{"content":"@Input({ transform: transformFn })","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"@Input({ transform: transformFn })","href":null},{"type":"text","text":{"content":" というように関数を渡すことでインプットプロパティに値がセットされるときの変換処理を宣言できる。典型的なユースケースは、 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" というように関数を渡すことでインプットプロパティに値がセットされるときの変換処理を宣言できる。典型的なユースケースは、 ","href":null},{"type":"text","text":{"content":"<button disable>","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"<button disable>","href":null},{"type":"text","text":{"content":" のようにHTML標準のブール値属性の挙動を模倣したディレクティブやコンポーネントを作成するときにブール値に変換する用途だろう。また、 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" のようにHTML標準のブール値属性の挙動を模倣したディレクティブやコンポーネントを作成するときにブール値に変換する用途だろう。また、 ","href":null},{"type":"text","text":{"content":"<img width=\"16\">","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"<img width=\"16\">","href":null},{"type":"text","text":{"content":" のように数値を受け取る属性も、HTML属性としての振る舞いを模倣するなら文字列から変換することになる。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" のように数値を受け取る属性も、HTML属性としての振る舞いを模倣するなら文字列から変換することになる。","href":null}],"color":"default"}},{"object":"block","id":"721cdd73-1560-43ed-ad4c-a33de4f7ed5e","parent":{"type":"page_id","page_id":"b01d0937-931d-4a74-8ff3-1a416346feab"},"created_time":"2023-12-04T12:35:00.000Z","last_edited_time":"2023-12-04T12:35:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"Accepting data with input properties • Angular","link":{"url":"https://angular.dev/guide/components/inputs#input-transforms"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Accepting data with input properties • Angular","href":"https://angular.dev/guide/components/inputs#input-transforms"}],"color":"default"}},{"object":"block","id":"896bcefa-21e4-44a3-a85d-718765001464","parent":{"type":"page_id","page_id":"b01d0937-931d-4a74-8ff3-1a416346feab"},"created_time":"2023-12-04T12:36:00.000Z","last_edited_time":"2023-12-04T12:38:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"import {Component, Input, booleanAttribute, numberAttribute} from '@angular/core';\n@Component({...})\nexport class CustomSlider {\n  @Input({transform: booleanAttribute}) disabled = false;\n  @Input({transform: numberAttribute}) number = 0;\n}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"import {Component, Input, booleanAttribute, numberAttribute} from '@angular/core';\n@Component({...})\nexport class CustomSlider {\n  @Input({transform: booleanAttribute}) disabled = false;\n  @Input({transform: numberAttribute}) number = 0;\n}","href":null}],"language":"typescript"}},{"object":"block","id":"a6d237ea-b876-4239-b329-492fa438244d","parent":{"type":"page_id","page_id":"b01d0937-931d-4a74-8ff3-1a416346feab"},"created_time":"2023-12-04T12:38:00.000Z","last_edited_time":"2023-12-04T13:17:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"この機能と、同じくAngular v16で導入されたRouterのComponent Input Bindingを併用することで、配列型のデータをクエリパラメータに変換するユースケースが扱いやすくなる。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"この機能と、同じくAngular v16で導入されたRouterのComponent Input Bindingを併用することで、配列型のデータをクエリパラメータに変換するユースケースが扱いやすくなる。","href":null}],"color":"default"}},{"object":"block","id":"35c58f5a-e555-4fa5-985a-bc12e7465325","parent":{"type":"page_id","page_id":"b01d0937-931d-4a74-8ff3-1a416346feab"},"created_time":"2023-12-04T12:40:00.000Z","last_edited_time":"2023-12-04T13:36:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"クエリパラメータ内の配列","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"クエリパラメータ内の配列","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"8d8e69d4-875a-422d-83e9-ac951a2417c4","parent":{"type":"page_id","page_id":"b01d0937-931d-4a74-8ff3-1a416346feab"},"created_time":"2023-12-04T12:41:00.000Z","last_edited_time":"2023-12-04T12:49:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"配列型をクエリパラメータとして表現する形式にはさまざまなパターンがある","link":{"url":"https://medium.com/raml-api/arrays-in-query-params-33189628fa68"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"配列型をクエリパラメータとして表現する形式にはさまざまなパターンがある","href":"https://medium.com/raml-api/arrays-in-query-params-33189628fa68"},{"type":"text","text":{"content":"が、Routerの ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"が、Routerの ","href":null},{"type":"text","text":{"content":"navigate()","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"navigate()","href":null},{"type":"text","text":{"content":" メソッドや ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" メソッドや ","href":null},{"type":"text","text":{"content":"RouterLink","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"RouterLink","href":null},{"type":"text","text":{"content":" で配列型の値をクエリパラメータに指定すると、Angularは同じキーのパラメータを複数回繰り返す ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" で配列型の値をクエリパラメータに指定すると、Angularは同じキーのパラメータを複数回繰り返す ","href":null},{"type":"text","text":{"content":"key=param1&key=param2","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"key=param1&key=param2","href":null},{"type":"text","text":{"content":" という形式に変換する。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" という形式に変換する。","href":null}],"color":"default"}},{"object":"block","id":"fe31f427-4eab-44c7-8d84-9899e9f39f9f","parent":{"type":"page_id","page_id":"b01d0937-931d-4a74-8ff3-1a416346feab"},"created_time":"2023-12-04T12:53:00.000Z","last_edited_time":"2023-12-04T12:53:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"image","image":{"caption":[],"type":"file","file":{"url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/3c6255ea-b6c7-4055-8126-638d2819f0c3/015dec69-c0ca-442b-b996-074e05b2c79a/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240122%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240122T130443Z&X-Amz-Expires=3600&X-Amz-Signature=e0abf583716fa20f297e4ea7a8662d078cab1a8189a19705382853c943a03fa7&X-Amz-SignedHeaders=host&x-id=GetObject","expiry_time":"2024-01-22T14:04:43.631Z"}}},{"object":"block","id":"4738adb0-84e0-41e3-a62f-c3b50da9df2d","parent":{"type":"page_id","page_id":"b01d0937-931d-4a74-8ff3-1a416346feab"},"created_time":"2023-12-04T12:41:00.000Z","last_edited_time":"2023-12-04T12:53:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"@Component({\n  selector: 'app-root',\n  standalone: true,\n  imports: [RouterOutlet, RouterLink],\n  template: `\n    <router-outlet />\n    <ul>\n      <li><a routerLink=\"\" [queryParams]=\"{query: null}\" >no query</a></li>\n      <li><a routerLink=\"\" [queryParams]=\"{query: 1}\" >query=1</a></li>\n      <li><a routerLink=\"\" [queryParams]=\"{query: [1]}\" >query=[1]</a></li>\n      <li><a routerLink=\"\" [queryParams]=\"{query: [1,2]}\" >query=[1,2]</a></li>\n    </ul>\n  `,\n})\nexport class App {}\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Page,\n  },\n];\n\nbootstrapApplication(App, {\n  providers: [provideRouter(routes, withComponentInputBinding())],\n});","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"@Component({\n  selector: 'app-root',\n  standalone: true,\n  imports: [RouterOutlet, RouterLink],\n  template: `\n    <router-outlet />\n    <ul>\n      <li><a routerLink=\"\" [queryParams]=\"{query: null}\" >no query</a></li>\n      <li><a routerLink=\"\" [queryParams]=\"{query: 1}\" >query=1</a></li>\n      <li><a routerLink=\"\" [queryParams]=\"{query: [1]}\" >query=[1]</a></li>\n      <li><a routerLink=\"\" [queryParams]=\"{query: [1,2]}\" >query=[1,2]</a></li>\n    </ul>\n  `,\n})\nexport class App {}\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Page,\n  },\n];\n\nbootstrapApplication(App, {\n  providers: [provideRouter(routes, withComponentInputBinding())],\n});","href":null}],"language":"typescript"}},{"object":"block","id":"4a4bb578-9c1f-4915-93fe-fa105c5e7adf","parent":{"type":"page_id","page_id":"b01d0937-931d-4a74-8ff3-1a416346feab"},"created_time":"2023-12-04T12:50:00.000Z","last_edited_time":"2023-12-04T12:58:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"クエリパラメータに配列型を書き込むのは簡単だが、逆にクエリパラメータから読み取るのは少し工夫が必要になる。なぜかというと、この形式では ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"クエリパラメータに配列型を書き込むのは簡単だが、逆にクエリパラメータから読み取るのは少し工夫が必要になる。なぜかというと、この形式では ","href":null},{"type":"text","text":{"content":"query=1","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"query=1","href":null},{"type":"text","text":{"content":" だけが存在する場合に","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" だけが存在する場合に","href":null},{"type":"text","text":{"content":"それがもともと配列であったかどうかという情報が失われる","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"それがもともと配列であったかどうかという情報が失われる","href":null},{"type":"text","text":{"content":"からだ。つまり、配列ではない値 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"からだ。つまり、配列ではない値 ","href":null},{"type":"text","text":{"content":"{ query: 1 }","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"{ query: 1 }","href":null},{"type":"text","text":{"content":" と長さ1の配列 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" と長さ1の配列 ","href":null},{"type":"text","text":{"content":"{ query: [1] }","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"{ query: [1] }","href":null},{"type":"text","text":{"content":" から出力されるクエリパラメータがどちらも同じ結果になってしまうのだ。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" から出力されるクエリパラメータがどちらも同じ結果になってしまうのだ。","href":null}],"color":"default"}},{"object":"block","id":"35964e3c-1db9-4f1f-bde8-42e9368fbca0","parent":{"type":"page_id","page_id":"b01d0937-931d-4a74-8ff3-1a416346feab"},"created_time":"2023-12-04T12:57:00.000Z","last_edited_time":"2023-12-04T12:57:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"image","image":{"caption":[],"type":"file","file":{"url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/3c6255ea-b6c7-4055-8126-638d2819f0c3/55d5cf5a-3d15-4ba9-87c3-b13dfcc64bde/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240122%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240122T130443Z&X-Amz-Expires=3600&X-Amz-Signature=f246b3fea726453bc038c8888ee4b9c66a132b34586406d2d0d8cebd79be43fc&X-Amz-SignedHeaders=host&x-id=GetObject","expiry_time":"2024-01-22T14:04:43.632Z"}}},{"object":"block","id":"909d5046-e462-4e9d-9073-ff9a51033400","parent":{"type":"page_id","page_id":"b01d0937-931d-4a74-8ff3-1a416346feab"},"created_time":"2023-12-04T12:57:00.000Z","last_edited_time":"2023-12-04T13:04:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"このことを念頭に入れておかないと、次のようなナイーブな実装はすぐに実行時エラーを投げるだろう。 Routerの ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"このことを念頭に入れておかないと、次のようなナイーブな実装はすぐに実行時エラーを投げるだろう。 Routerの ","href":null},{"type":"text","text":{"content":"withComponentInputBinding()","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"withComponentInputBinding()","href":null},{"type":"text","text":{"content":" オプションによって次の ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" オプションによって次の ","href":null},{"type":"text","text":{"content":"query","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"query","href":null},{"type":"text","text":{"content":" インプットプロパティにはクエリパラメータの値がセットされるが、クエリパラメータに書き込むときに配列だったとしても長さが1であれば単なる文字列になってしまい、 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" インプットプロパティにはクエリパラメータの値がセットされるが、クエリパラメータに書き込むときに配列だったとしても長さが1であれば単なる文字列になってしまい、 ","href":null},{"type":"text","text":{"content":"query.join()","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"query.join()","href":null},{"type":"text","text":{"content":" メソッドは文字列に存在しないためエラーになる。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" メソッドは文字列に存在しないためエラーになる。","href":null}],"color":"default"}},{"object":"block","id":"6af2eeff-03ac-479a-8b2a-ec5989662d71","parent":{"type":"page_id","page_id":"b01d0937-931d-4a74-8ff3-1a416346feab"},"created_time":"2023-12-04T13:01:00.000Z","last_edited_time":"2023-12-04T13:01:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"@Component({\n  standalone: true,\n  imports: [JsonPipe],\n  template: `\n  <div>query={{ query.join(', ') }}</div>\n  `,\n})\nexport class Page {\n  @Input()\n  query: string[] = [];\n}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"@Component({\n  standalone: true,\n  imports: [JsonPipe],\n  template: `\n  <div>query={{ query.join(', ') }}</div>\n  `,\n})\nexport class Page {\n  @Input()\n  query: string[] = [];\n}","href":null}],"language":"typescript"}},{"object":"block","id":"e0fa88cc-94f5-4305-9450-c68349b0c355","parent":{"type":"page_id","page_id":"b01d0937-931d-4a74-8ff3-1a416346feab"},"created_time":"2023-12-04T13:04:00.000Z","last_edited_time":"2023-12-04T13:04:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"image","image":{"caption":[],"type":"file","file":{"url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/3c6255ea-b6c7-4055-8126-638d2819f0c3/47675ee9-41e1-42f9-bded-c27ba802b63a/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240122%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240122T130443Z&X-Amz-Expires=3600&X-Amz-Signature=8d92bfe1bd9acd54ac669482f53b882792bb38f45f4cffef0d9350895fe07d8f&X-Amz-SignedHeaders=host&x-id=GetObject","expiry_time":"2024-01-22T14:04:43.627Z"}}},{"object":"block","id":"2ea1c0be-5df8-40a3-ba7a-c5337fcbe01e","parent":{"type":"page_id","page_id":"b01d0937-931d-4a74-8ff3-1a416346feab"},"created_time":"2023-12-04T13:04:00.000Z","last_edited_time":"2023-12-04T13:34:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"また、当然だがクエリパラメータがない場合も想定する必要があるため、この ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"また、当然だがクエリパラメータがない場合も想定する必要があるため、この ","href":null},{"type":"text","text":{"content":"query","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"query","href":null},{"type":"text","text":{"content":" インプットプロパティの本当の型は ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" インプットプロパティの本当の型は ","href":null},{"type":"text","text":{"content":"string[] | string | undefined","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"string[] | string | undefined","href":null},{"type":"text","text":{"content":" である。しかし誰もこんな型のインプットプロパティを扱いたくはない。そこで冒頭で触れたInput Transformsを使おう。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" である。しかし誰もこんな型のインプットプロパティを扱いたくはない。そこで冒頭で触れたInput Transformsを使おう。","href":null}],"color":"default"}},{"object":"block","id":"def9230d-f127-4702-afaa-a1cd89d8a73e","parent":{"type":"page_id","page_id":"b01d0937-931d-4a74-8ff3-1a416346feab"},"created_time":"2023-12-04T13:34:00.000Z","last_edited_time":"2023-12-04T13:35:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"ちなみに、オブジェクトとクエリパラメータを相互に変換する振る舞いは","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"ちなみに、オブジェクトとクエリパラメータを相互に変換する振る舞いは","href":null},{"type":"text","text":{"content":"UrlSerializer","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"UrlSerializer","href":null},{"type":"text","text":{"content":"を独自に拡張することで変更できる。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"を独自に拡張することで変更できる。","href":null}],"color":"default"}},{"object":"block","id":"90fbfbc2-8ca6-4429-b86a-da863811acc0","parent":{"type":"page_id","page_id":"b01d0937-931d-4a74-8ff3-1a416346feab"},"created_time":"2023-12-04T13:35:00.000Z","last_edited_time":"2023-12-04T13:35:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"bookmark","bookmark":{"caption":[],"url":"https://angular.io/api/router/UrlSerializer"}},{"object":"block","id":"5e53c5b1-ed85-463f-b442-9c684b4f4336","parent":{"type":"page_id","page_id":"b01d0937-931d-4a74-8ff3-1a416346feab"},"created_time":"2023-12-04T13:06:00.000Z","last_edited_time":"2023-12-04T13:37:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"配列への正規化","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"配列への正規化","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"4a0866a2-ebce-44f1-b32e-a7afeeb08052","parent":{"type":"page_id","page_id":"b01d0937-931d-4a74-8ff3-1a416346feab"},"created_time":"2023-12-04T13:07:00.000Z","last_edited_time":"2023-12-04T13:11:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"Input Transformsを使い、 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Input Transformsを使い、 ","href":null},{"type":"text","text":{"content":"query","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"query","href":null},{"type":"text","text":{"content":" インプットプロパティを常に ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" インプットプロパティを常に ","href":null},{"type":"text","text":{"content":"string[]","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"string[]","href":null},{"type":"text","text":{"content":" 型として扱えるように正規化することができる。 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" 型として扱えるように正規化することができる。 ","href":null},{"type":"text","text":{"content":"normalizeQuery","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"normalizeQuery","href":null},{"type":"text","text":{"content":" という関数でその変換処理を行うとすると、コンポーネント側は次のように書ける。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" という関数でその変換処理を行うとすると、コンポーネント側は次のように書ける。","href":null},{"type":"text","text":{"content":"normalizeQuery","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"normalizeQuery","href":null},{"type":"text","text":{"content":" は ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" は ","href":null},{"type":"text","text":{"content":"string[] | string | undefined","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"string[] | string | undefined","href":null},{"type":"text","text":{"content":" の引数を受け取って ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" の引数を受け取って ","href":null},{"type":"text","text":{"content":"string[]","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"string[]","href":null},{"type":"text","text":{"content":" を返す関数ならどんな実装でも問題ない。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" を返す関数ならどんな実装でも問題ない。","href":null}],"color":"default"}},{"object":"block","id":"3afc9352-42a2-4c55-bb15-6fa2afed4b56","parent":{"type":"page_id","page_id":"b01d0937-931d-4a74-8ff3-1a416346feab"},"created_time":"2023-12-04T13:07:00.000Z","last_edited_time":"2023-12-04T13:12:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"function normalizeQuery(value: string | string[] | undefined): string[] {\n  if (!value) {\n    return [];\n  }\n  if (Array.isArray(value)) {\n    return value;\n  }\n  return [value];\n}\n\n@Component({...})\nexport class Page {\n  @Input({ transform: normalizeQuery })\n  query: string[] = [];\n}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"function normalizeQuery(value: string | string[] | undefined): string[] {\n  if (!value) {\n    return [];\n  }\n  if (Array.isArray(value)) {\n    return value;\n  }\n  return [value];\n}\n\n@Component({...})\nexport class Page {\n  @Input({ transform: normalizeQuery })\n  query: string[] = [];\n}","href":null}],"language":"typescript"}},{"object":"block","id":"16199e13-b6d2-4a10-ab7e-f47f2925a899","parent":{"type":"page_id","page_id":"b01d0937-931d-4a74-8ff3-1a416346feab"},"created_time":"2023-12-04T13:10:00.000Z","last_edited_time":"2023-12-04T13:14:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"実際に動作するサンプルコードをStackblitzで公開しているので、試してみてほしい。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"実際に動作するサンプルコードをStackblitzで公開しているので、試してみてほしい。","href":null}],"color":"default"}},{"object":"block","id":"7d1ef99b-b687-4772-af98-d9e7cf6c7d40","parent":{"type":"page_id","page_id":"b01d0937-931d-4a74-8ff3-1a416346feab"},"created_time":"2023-12-04T13:13:00.000Z","last_edited_time":"2023-12-04T13:13:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"embed","embed":{"caption":[],"url":"https://stackblitz.com/edit/angular-xjw1sl?ctl=1&embed=1&file=src/main.ts"}},{"object":"block","id":"9fb80cf2-8673-448e-98ba-022ceddd78e0","parent":{"type":"page_id","page_id":"b01d0937-931d-4a74-8ff3-1a416346feab"},"created_time":"2023-12-04T13:14:00.000Z","last_edited_time":"2023-12-04T13:37:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"まとめ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"まとめ","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"6b0bd578-fd1f-4e65-9809-2807cb5d3aad","parent":{"type":"page_id","page_id":"b01d0937-931d-4a74-8ff3-1a416346feab"},"created_time":"2023-12-04T13:14:00.000Z","last_edited_time":"2023-12-04T13:15:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","text":{"content":"長さ1の配列をクエリパラメータにセットすると、Routerはそれを配列としてパースできない。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"長さ1の配列をクエリパラメータにセットすると、Routerはそれを配列としてパースできない。","href":null}],"color":"default"}},{"object":"block","id":"83515fb7-bc2f-4fd5-8dc6-9015df9ad595","parent":{"type":"page_id","page_id":"b01d0937-931d-4a74-8ff3-1a416346feab"},"created_time":"2023-12-04T13:15:00.000Z","last_edited_time":"2023-12-04T13:16:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","text":{"content":"クエリパラメータが存在しないことも考慮して正規化をする必要がある。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"クエリパラメータが存在しないことも考慮して正規化をする必要がある。","href":null}],"color":"default"}},{"object":"block","id":"aac6d38a-7205-4eec-900b-23957cf34eff","parent":{"type":"page_id","page_id":"b01d0937-931d-4a74-8ff3-1a416346feab"},"created_time":"2023-12-04T13:16:00.000Z","last_edited_time":"2023-12-04T13:17:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","text":{"content":"RouterのComponent Input BindingとInput Transformsを使うと、正規化された値を直接インプットプロパティで受け取ることができる。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"RouterのComponent Input BindingとInput Transformsを使うと、正規化された値を直接インプットプロパティで受け取ることができる。","href":null}],"color":"default"}},{"object":"block","id":"c2f9f8b4-4b0b-4a34-8b3b-abdc132bed0a","parent":{"type":"page_id","page_id":"b01d0937-931d-4a74-8ff3-1a416346feab"},"created_time":"2023-12-04T13:17:00.000Z","last_edited_time":"2023-12-04T13:17:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[],"color":"default"}}]