[{"object":"block","id":"6269cd8e-5f4a-419b-b9a6-cca59df41dd4","parent":{"type":"page_id","page_id":"ca90e008-8109-41f6-a4bb-889503419f3b"},"created_time":"2023-05-20T23:33:00.000Z","last_edited_time":"2023-05-20T23:34:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[],"color":"default"}},{"object":"block","id":"5a15d0e2-ed52-4ee6-b414-8eb73df68cd6","parent":{"type":"page_id","page_id":"ca90e008-8109-41f6-a4bb-889503419f3b"},"created_time":"2023-05-20T23:33:00.000Z","last_edited_time":"2023-05-20T23:34:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"import { distinctUntilChanged, map } from \"rxjs/operators\";\nimport { BehaviorSubject } from \"rxjs/BehaviorSubject\";\n\nexport abstract class Store<T> extends BehaviorSubject<T> {\n  constructor(initialState: T) {\n    super(initialState);\n  }\n\n  public dispatch(fn: (state: T) => T) {\n    this.next(fn(this.getValue()));\n  }\n\n  public select<R>(fn: (state: T) => R) {\n    return this.pipe(map<T, R>(fn), distinctUntilChanged());\n  }\n\n  public selectSync<R>(fn: (state: T) => R) {\n    return fn(this.getValue());\n  }\n}\n","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"import { distinctUntilChanged, map } from \"rxjs/operators\";\nimport { BehaviorSubject } from \"rxjs/BehaviorSubject\";\n\nexport abstract class Store<T> extends BehaviorSubject<T> {\n  constructor(initialState: T) {\n    super(initialState);\n  }\n\n  public dispatch(fn: (state: T) => T) {\n    this.next(fn(this.getValue()));\n  }\n\n  public select<R>(fn: (state: T) => R) {\n    return this.pipe(map<T, R>(fn), distinctUntilChanged());\n  }\n\n  public selectSync<R>(fn: (state: T) => R) {\n    return fn(this.getValue());\n  }\n}\n","href":null}],"language":"typescript"}},{"object":"block","id":"a3c6e3ea-f014-4a79-9e38-d9c01ec7d261","parent":{"type":"page_id","page_id":"ca90e008-8109-41f6-a4bb-889503419f3b"},"created_time":"2023-05-20T23:33:00.000Z","last_edited_time":"2023-05-20T23:33:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"Example: UserStore","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Example: UserStore","href":null}],"color":"default"}},{"object":"block","id":"724efafb-9ab5-4704-95e4-1dc3fc35f31e","parent":{"type":"page_id","page_id":"ca90e008-8109-41f6-a4bb-889503419f3b"},"created_time":"2023-05-20T23:33:00.000Z","last_edited_time":"2023-05-20T23:34:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"import { User } from \"../entity/user\";\nimport { Store } from \"../../store\";\n\nexport interface State {\n  currentUser: User | null;\n}\n\nexport class UserStore extends Store<State> {\n  constructor() {\n    super({\n      currentUser: null\n    });\n  }\n\n  get currentUser$() {\n    return this.select(state => state.currentUser);\n  }\n  get currentUser() {\n    return this.selectSync(state => state.currentUser);\n  }\n\n  setCurrentUser(user: User) {\n    this.dispatch(state => ({\n      ...state,\n      currentUser: user\n    }));\n  }\n}\n","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"import { User } from \"../entity/user\";\nimport { Store } from \"../../store\";\n\nexport interface State {\n  currentUser: User | null;\n}\n\nexport class UserStore extends Store<State> {\n  constructor() {\n    super({\n      currentUser: null\n    });\n  }\n\n  get currentUser$() {\n    return this.select(state => state.currentUser);\n  }\n  get currentUser() {\n    return this.selectSync(state => state.currentUser);\n  }\n\n  setCurrentUser(user: User) {\n    this.dispatch(state => ({\n      ...state,\n      currentUser: user\n    }));\n  }\n}\n","href":null}],"language":"typescript"}}]