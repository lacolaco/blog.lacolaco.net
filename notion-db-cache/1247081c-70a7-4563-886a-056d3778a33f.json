[{"object":"block","id":"bfd1700c-c590-4c8c-b130-5b9efd920ffb","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T00:20:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"Web Worker","link":{"url":"https://developer.mozilla.org/ja/docs/Web/API/Web_Workers_API/Using_web_workers"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Web Worker","href":"https://developer.mozilla.org/ja/docs/Web/API/Web_Workers_API/Using_web_workers"},{"type":"text","text":{"content":"は Web 開発の重要な要素として注目を集めている。そして","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"は Web 開発の重要な要素として注目を集めている。そして","href":null},{"type":"text","text":{"content":"Comlink","link":{"url":"https://github.com/GoogleChromeLabs/comlink"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Comlink","href":"https://github.com/GoogleChromeLabs/comlink"},{"type":"text","text":{"content":"は、Web Worker を使った開発を楽しめるように GoogleChrome チームによって作成された JavaScript ライブラリだ。Comlink は Web Worker で定義された API と UI スレッドが簡単に通信できるようにする。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"は、Web Worker を使った開発を楽しめるように GoogleChrome チームによって作成された JavaScript ライブラリだ。Comlink は Web Worker で定義された API と UI スレッドが簡単に通信できるようにする。","href":null}],"color":"default"}},{"object":"block","id":"bd5452b1-e2f9-4303-af20-7487cf19cde7","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T00:20:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"この記事では、Angular CLI で作成した Angular アプリケーションに Comlink を組み込む方法を説明する。Comlink を使うことで、重い処理をメインスレッドから簡単に切り離すことができ、コードを分離することで JavaScript のバンドルを小さくすることができる。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"この記事では、Angular CLI で作成した Angular アプリケーションに Comlink を組み込む方法を説明する。Comlink を使うことで、重い処理をメインスレッドから簡単に切り離すことができ、コードを分離することで JavaScript のバンドルを小さくすることができる。","href":null}],"color":"default"}},{"object":"block","id":"8d4c5459-9674-4d6a-8513-3828b6b79b7d","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T00:20:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"heading_3","heading_3":{"rich_text":[{"type":"text","text":{"content":"アプリケーションの準備","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"アプリケーションの準備","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"9b8625de-17f1-4e75-8e0a-75276d381972","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T00:20:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"Angular CLI","link":{"url":"https://angular.jp/guide/quickstart#install-cli"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Angular CLI","href":"https://angular.jp/guide/quickstart#install-cli"},{"type":"text","text":{"content":"を使って、サンプルアプリケーションを作成する。この記事で使用する Angular CLI のバージョンは v12 を前提としている。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"を使って、サンプルアプリケーションを作成する。この記事で使用する Angular CLI のバージョンは v12 を前提としている。","href":null}],"color":"default"}},{"object":"block","id":"ec8c97d0-a240-4966-956e-39610ccb97ee","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T00:20:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"$ ng new angular-comlink-example --defaults","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"$ ng new angular-comlink-example --defaults","href":null}],"language":"plain text"}},{"object":"block","id":"e6fbb9c1-46d4-4461-af90-928ce3b49079","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T00:20:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"アプリケーションのセットアップが終わったあと、 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"アプリケーションのセットアップが終わったあと、 ","href":null},{"type":"text","text":{"content":"comlink","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"comlink","href":null},{"type":"text","text":{"content":" パッケージをインストールする。Comlink は TypeScript 型定義も同梱しているため型定義を追加でインストールする必要はない。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" パッケージをインストールする。Comlink は TypeScript 型定義も同梱しているため型定義を追加でインストールする必要はない。","href":null}],"color":"default"}},{"object":"block","id":"f777444c-1333-46d8-9581-62647bf9194f","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T00:20:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"$ cd angular-comlink-example\n$ yarn add comlink # or npm install comlink","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"$ cd angular-comlink-example\n$ yarn add comlink # or npm install comlink","href":null}],"language":"plain text"}},{"object":"block","id":"346a7ecd-7cac-4c9e-8fac-3c0c96ea2dab","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T00:20:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"heading_3","heading_3":{"rich_text":[{"type":"text","text":{"content":"Worker モジュールの実装","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Worker モジュールの実装","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"a1efcdab-4869-4be4-a435-bd39c78232b7","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T00:20:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"例として、Markdown テキストを HTML へ変換するアプリケーションを作成する。 まずはじめに","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"例として、Markdown テキストを HTML へ変換するアプリケーションを作成する。 まずはじめに","href":null},{"type":"text","text":{"content":"marked","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"marked","href":null},{"type":"text","text":{"content":"と","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"と","href":null},{"type":"text","text":{"content":"@types/marked","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"@types/marked","href":null},{"type":"text","text":{"content":"の 2 つのパッケージをインストールする。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"の 2 つのパッケージをインストールする。","href":null}],"color":"default"}},{"object":"block","id":"5cd0cef3-0945-4641-8906-b39497b66552","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T00:20:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"$ yarn add marked && yarn add --dev @types/marked","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"$ yarn add marked && yarn add --dev @types/marked","href":null}],"language":"plain text"}},{"object":"block","id":"1c6cc677-82a2-4c58-88c9-23682e3fccf8","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T00:20:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"次に、 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"次に、 ","href":null},{"type":"text","text":{"content":"ng generate webworker","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"ng generate webworker","href":null},{"type":"text","text":{"content":" コマンドを使い、 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" コマンドを使い、 ","href":null},{"type":"text","text":{"content":"worker/markdown.worker.ts","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"worker/markdown.worker.ts","href":null},{"type":"text","text":{"content":" ファイルを作成する。このコマンドは TypeScript ファイルだけでなく、Web Worker 用の ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" ファイルを作成する。このコマンドは TypeScript ファイルだけでなく、Web Worker 用の ","href":null},{"type":"text","text":{"content":"tsconfig.worker.json","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"tsconfig.worker.json","href":null},{"type":"text","text":{"content":" も同時に生成し、そのファイルを参照するように ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" も同時に生成し、そのファイルを参照するように ","href":null},{"type":"text","text":{"content":"angular.json","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"angular.json","href":null},{"type":"text","text":{"content":" ファイルも更新される。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" ファイルも更新される。","href":null}],"color":"default"}},{"object":"block","id":"bbbeeb12-ffba-4bb1-b396-27f7dd6711de","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T00:20:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"$ ng generate webWorker worker/markdown\n\nCREATE tsconfig.worker.json (289 bytes)\nCREATE src/app/worker/markdown.worker.ts (157 bytes)\nUPDATE angular.json (3204 bytes)","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"$ ng generate webWorker worker/markdown\n\nCREATE tsconfig.worker.json (289 bytes)\nCREATE src/app/worker/markdown.worker.ts (157 bytes)\nUPDATE angular.json (3204 bytes)","href":null}],"language":"plain text"}},{"object":"block","id":"d17dd1b4-bca6-4e8e-81a6-6f5f4e6a249e","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T00:20:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"生成された ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"生成された ","href":null},{"type":"text","text":{"content":"markdown.worker.ts","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"markdown.worker.ts","href":null},{"type":"text","text":{"content":" ファイルの内容はすべて削除し、次のように Markdown テキストを HTML へコンパイルする API を記述する。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" ファイルの内容はすべて削除し、次のように Markdown テキストを HTML へコンパイルする API を記述する。","href":null}],"color":"default"}},{"object":"block","id":"3d5a78f9-0ac1-462b-bd14-e81446b84f5d","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T04:48:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"// worker/markdown.worker.ts\nimport * as marked from 'marked';\n\nexport const api = {\n  compileMarkdown(source: string) {\n    return new Promise<string>((resolve, reject) => {\n      marked(source, (err, result) => {\n        if (err) {\n          reject(err);\n          return;\n        }\n        resolve(result);\n      });\n    });\n  },\n};","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"// worker/markdown.worker.ts\nimport * as marked from 'marked';\n\nexport const api = {\n  compileMarkdown(source: string) {\n    return new Promise<string>((resolve, reject) => {\n      marked(source, (err, result) => {\n        if (err) {\n          reject(err);\n          return;\n        }\n        resolve(result);\n      });\n    });\n  },\n};","href":null}],"language":"plain text"}},{"object":"block","id":"6679d679-4ca1-4fe2-9d5d-ce9a62a181be","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T00:20:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"compileMmarkdown","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"compileMmarkdown","href":null},{"type":"text","text":{"content":" 関数をこのワーカーの API として公開するため、","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" 関数をこのワーカーの API として公開するため、","href":null},{"type":"text","text":{"content":"Comlink.expose","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"Comlink.expose","href":null},{"type":"text","text":{"content":"関数を呼び出し、","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"関数を呼び出し、","href":null},{"type":"text","text":{"content":"api","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"api","href":null},{"type":"text","text":{"content":"オブジェクトを渡す。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"オブジェクトを渡す。","href":null}],"color":"default"}},{"object":"block","id":"16f12eb9-1f01-4990-b0f5-bd48fdef30b0","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T04:48:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"import * as marked from 'marked';\nimport { expose } from 'comlink';\n\nexport const api = {\n  compileMarkdown(source: string) {\n    // ...\n  },\n};\n\nexpose(api); // Expose as worker's API","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"import * as marked from 'marked';\nimport { expose } from 'comlink';\n\nexport const api = {\n  compileMarkdown(source: string) {\n    // ...\n  },\n};\n\nexpose(api); // Expose as worker's API","href":null}],"language":"plain text"}},{"object":"block","id":"9ba7ca9b-73d0-43b0-b4c4-6ee8e410e4be","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T00:20:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"ワーカー側の作業はこれで終わりとなる。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"ワーカー側の作業はこれで終わりとなる。","href":null}],"color":"default"}},{"object":"block","id":"1af41a71-963c-44da-aa77-3b8cda99b2a4","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T00:20:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"heading_3","heading_3":{"rich_text":[{"type":"text","text":{"content":"ワーカーの公開 API を呼び出す","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"ワーカーの公開 API を呼び出す","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"c92368d4-44cf-4479-ae3c-064ab732b950","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T00:20:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"続いて、Comlink を通してワーカーの ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"続いて、Comlink を通してワーカーの ","href":null},{"type":"text","text":{"content":"compileMarkdown","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"compileMarkdown","href":null},{"type":"text","text":{"content":"関数を UI スレッド側から呼び出す。 まずは Angular サービスとして ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"関数を UI スレッド側から呼び出す。 まずは Angular サービスとして ","href":null},{"type":"text","text":{"content":"MarkdownService","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"MarkdownService","href":null},{"type":"text","text":{"content":"クラスを作成し、コンポーネントから呼び出し可能な状態にする。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"クラスを作成し、コンポーネントから呼び出し可能な状態にする。","href":null}],"color":"default"}},{"object":"block","id":"548e79e6-38df-4d06-a7ea-b65540afce74","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T00:20:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"$ ng generate service service/markdown","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"$ ng generate service service/markdown","href":null}],"language":"plain text"}},{"object":"block","id":"a8af6c1d-9370-429d-b8be-27be695730a5","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T00:20:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"MarkdownService","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"MarkdownService","href":null},{"type":"text","text":{"content":"クラスには引数に Markdown テキストを受け取りコンパイル結果を Promise で返す ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"クラスには引数に Markdown テキストを受け取りコンパイル結果を Promise で返す ","href":null},{"type":"text","text":{"content":"compile","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"compile","href":null},{"type":"text","text":{"content":"メソッドを定義しておく。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"メソッドを定義しておく。","href":null}],"color":"default"}},{"object":"block","id":"cfeba295-55cd-4355-a458-653618b6588a","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T04:49:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class MarkdownService {\n  async compile(source: string): Promise<string> {}\n}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class MarkdownService {\n  async compile(source: string): Promise<string> {}\n}","href":null}],"language":"plain text"}},{"object":"block","id":"9f8732b3-21ac-4e5e-ae01-91913c85b0d5","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T00:20:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"worker/markdown.worker.ts","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"worker/markdown.worker.ts","href":null},{"type":"text","text":{"content":"を呼び出すため、Comlink をインポートして ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"を呼び出すため、Comlink をインポートして ","href":null},{"type":"text","text":{"content":"wrap","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"wrap","href":null},{"type":"text","text":{"content":"関数でワーカーインスタンスをプロキシする。 ワーカーは","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"関数でワーカーインスタンスをプロキシする。 ワーカーは","href":null},{"type":"text","text":{"content":"new Worker(new URL('../worker/markdown.worker', import.meta.url)","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"new Worker(new URL('../worker/markdown.worker', import.meta.url)","href":null},{"type":"text","text":{"content":"でインスタンス化される。この記述形式は","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"でインスタンス化される。この記述形式は","href":null},{"type":"text","text":{"content":"webpack の Web Worker サポート","link":{"url":"https://webpack.js.org/guides/web-workers/"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"webpack の Web Worker サポート","href":"https://webpack.js.org/guides/web-workers/"},{"type":"text","text":{"content":"で定義されたものである。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"で定義されたものである。","href":null}],"color":"default"}},{"object":"block","id":"2f3d271a-6e4f-4a90-868a-17c27b4b5b8c","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T04:49:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"import { wrap } from 'comlink';\n\nasync function compileMarkdown(source: string): Promise<string> {\n  const worker = wrap<typeof import('../worker/markdown.worker').api>(\n    new Worker(new URL('../worker/markdown.worker', import.meta.url)),\n  );\n  return await worker.compileMarkdown(source);\n}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"import { wrap } from 'comlink';\n\nasync function compileMarkdown(source: string): Promise<string> {\n  const worker = wrap<typeof import('../worker/markdown.worker').api>(\n    new Worker(new URL('../worker/markdown.worker', import.meta.url)),\n  );\n  return await worker.compileMarkdown(source);\n}","href":null}],"language":"plain text"}},{"object":"block","id":"87df33e7-5008-46c6-ae8c-50f1cc78dae2","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T00:20:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"ここで ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"ここで ","href":null},{"type":"text","text":{"content":"worker","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"worker","href":null},{"type":"text","text":{"content":" 変数は ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" 変数は ","href":null},{"type":"text","text":{"content":"Comlink.expose","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"Comlink.expose","href":null},{"type":"text","text":{"content":"で公開された関数を持っており、その型も保持されている。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"で公開された関数を持っており、その型も保持されている。","href":null}],"color":"default"}},{"object":"block","id":"55cb0cae-6e1f-4173-af90-ef5f5b7e95d4","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T00:20:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"api","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"api","href":null},{"type":"text","text":{"content":"の型を取り出すために、 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"の型を取り出すために、 ","href":null},{"type":"text","text":{"content":"typeof import('../worker/markdown.worker).api","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"typeof import('../worker/markdown.worker).api","href":null},{"type":"text","text":{"content":" を ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" を ","href":null},{"type":"text","text":{"content":"wrap<T>","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"wrap<T>","href":null},{"type":"text","text":{"content":"のジェネリクスに渡している。この ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"のジェネリクスに渡している。この ","href":null},{"type":"text","text":{"content":"import","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"import","href":null},{"type":"text","text":{"content":" は ES モジュールのインポートではなく TypeScript の型定義だけをインポートしている。そのため TypeScript のコンパイル後には除去され、静的な参照は残らず JavaScript のバンドルを分割できる。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" は ES モジュールのインポートではなく TypeScript の型定義だけをインポートしている。そのため TypeScript のコンパイル後には除去され、静的な参照は残らず JavaScript のバンドルを分割できる。","href":null}],"color":"default"}},{"object":"block","id":"e18561e4-4f2c-48f6-b4b3-8eae0e2d7410","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T00:20:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"以下は","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"以下は","href":null},{"type":"text","text":{"content":"service/markdown.service.ts","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"service/markdown.service.ts","href":null},{"type":"text","text":{"content":"の最終的な例だ。環境が ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"の最終的な例だ。環境が ","href":null},{"type":"text","text":{"content":"window.Worker","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"window.Worker","href":null},{"type":"text","text":{"content":" をサポートしていない場合は、動的 ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" をサポートしていない場合は、動的 ","href":null},{"type":"text","text":{"content":"import()","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"import()","href":null},{"type":"text","text":{"content":" を使用してメインスレッドでの処理にフォールバックする。この場合でも自動的にコードは分割され、モジュールは遅延読み込みされる。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" を使用してメインスレッドでの処理にフォールバックする。この場合でも自動的にコードは分割され、モジュールは遅延読み込みされる。","href":null}],"color":"default"}},{"object":"block","id":"5c384c1f-7baf-4b22-8e95-76b3dd991b93","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T04:49:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"import { Injectable } from '@angular/core';\nimport { wrap } from 'comlink';\n\nasync function compileMarkdown(source: string): Promise<string> {\n  if (window.Worker) {\n    const worker = wrap<typeof import('../worker/markdown.worker').api>(\n      new Worker(new URL('../worker/markdown.worker', import.meta.url)),\n    );\n    return await worker.compileMarkdown(source);\n  } else {\n    // Fallback to main thread with dynamic imports\n    const worker = await import('../worker/markdown.worker').then((m) => m.api);\n    return await worker.compileMarkdown(source);\n  }\n}\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class MarkdownService {\n  async compile(source: string): Promise<string> {\n    return await compileMarkdown(source);\n  }\n}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"import { Injectable } from '@angular/core';\nimport { wrap } from 'comlink';\n\nasync function compileMarkdown(source: string): Promise<string> {\n  if (window.Worker) {\n    const worker = wrap<typeof import('../worker/markdown.worker').api>(\n      new Worker(new URL('../worker/markdown.worker', import.meta.url)),\n    );\n    return await worker.compileMarkdown(source);\n  } else {\n    // Fallback to main thread with dynamic imports\n    const worker = await import('../worker/markdown.worker').then((m) => m.api);\n    return await worker.compileMarkdown(source);\n  }\n}\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class MarkdownService {\n  async compile(source: string): Promise<string> {\n    return await compileMarkdown(source);\n  }\n}","href":null}],"language":"plain text"}},{"object":"block","id":"dccadf17-5c94-4f35-8dfd-2f671682e5a2","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T00:20:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"heading_3","heading_3":{"rich_text":[{"type":"text","text":{"content":"アプリケーションの実行","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"アプリケーションの実行","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"12fcb51d-04a1-4dc3-a59b-1f3b97b6256f","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T00:20:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"アプリケーションを完成させよう。ここでは、","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"アプリケーションを完成させよう。ここでは、","href":null},{"type":"text","text":{"content":"AppComponent","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"AppComponent","href":null},{"type":"text","text":{"content":" を ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" を ","href":null},{"type":"text","text":{"content":"MarkdownService","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"MarkdownService","href":null},{"type":"text","text":{"content":"を使用し、その結果を表示するように変更する。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"を使用し、その結果を表示するように変更する。","href":null}],"color":"default"}},{"object":"block","id":"de5bf72c-a20a-4b7a-8053-98ac6ec63228","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T04:49:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"import { MarkdownService } from './service/markdown.service';\nimport { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  template: `\n    <button (click)=\"compileMarkdown()\">compile</button>\n\n    <div>{{ result }}</div>\n  `,\n})\nexport class AppComponent {\n  result: string = '';\n\n  constructor(private markdown: MarkdownService) {}\n\n  async compileMarkdown() {\n    this.result = await this.markdown.compile(`## Hello Comlink`);\n  }\n}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"import { MarkdownService } from './service/markdown.service';\nimport { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  template: `\n    <button (click)=\"compileMarkdown()\">compile</button>\n\n    <div>{{ result }}</div>\n  `,\n})\nexport class AppComponent {\n  result: string = '';\n\n  constructor(private markdown: MarkdownService) {}\n\n  async compileMarkdown() {\n    this.result = await this.markdown.compile(`## Hello Comlink`);\n  }\n}","href":null}],"language":"plain text"}},{"object":"block","id":"8c0034f2-9900-4ec8-9249-322c11132058","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T04:49:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"ng serve","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"ng serve","href":null},{"type":"text","text":{"content":" を使ってアプリをサーブし、ブラウザの開発者ツールを開いてみよう。Network タブを開いて“compile”ボタンをクリックすると、メインのバンドルからは分離された JavaScript ファイルがロードされ、Web Worker として実行される。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" を使ってアプリをサーブし、ブラウザの開発者ツールを開いてみよう。Network タブを開いて“compile”ボタンをクリックすると、メインのバンドルからは分離された JavaScript ファイルがロードされ、Web Worker として実行される。","href":null}],"color":"default"}},{"object":"block","id":"f0ae072f-87bb-4a95-b1f8-aa35c8c72886","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T04:49:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"image","image":{"caption":[],"type":"file","file":{"url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/3c6255ea-b6c7-4055-8126-638d2819f0c3/567cff86-6f84-453e-be4d-5dd32e9a248a/0476d21164731efa00df1ffa37c4b731.gif?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240710%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240710T093824Z&X-Amz-Expires=3600&X-Amz-Signature=570f9f1c4af861a33c73d0d89dd36d5a1ce8662e556178e6c96705308b2aaf76&X-Amz-SignedHeaders=host&x-id=GetObject","expiry_time":"2024-07-10T10:38:24.474Z"}}},{"object":"block","id":"fa7b909d-59b5-4b55-ac98-92b6fbd07716","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T00:20:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"heading_3","heading_3":{"rich_text":[{"type":"text","text":{"content":"まとめ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"まとめ","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"715384a1-b767-4b60-bfa9-89208839979a","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T00:20:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"このように、Comlink と Angular CLI によって、UI スレッドがブロックされることを簡単に防ぐことができる。 また、webpack 5 ベースになった Angular CLI により、Web Worker コードを遅延ロード可能なバンドルとしてビルドすることも簡単になった。 読み込みだけでなく読み込み後の実行パフォーマンスにも課題があるアプリケーションで導入すると効果を発揮するだろう。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"このように、Comlink と Angular CLI によって、UI スレッドがブロックされることを簡単に防ぐことができる。 また、webpack 5 ベースになった Angular CLI により、Web Worker コードを遅延ロード可能なバンドルとしてビルドすることも簡単になった。 読み込みだけでなく読み込み後の実行パフォーマンスにも課題があるアプリケーションで導入すると効果を発揮するだろう。","href":null}],"color":"default"}},{"object":"block","id":"04f1d611-95c0-44cc-ba47-150cab56823e","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T00:20:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"サンプルコードの全体は GitHub で確認できる。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"サンプルコードの全体は GitHub で確認できる。","href":null}],"color":"default"}},{"object":"block","id":"a94c6e4a-f451-4957-9d6f-d3ace6a27d52","parent":{"type":"page_id","page_id":"1247081c-70a7-4563-886a-056d3778a33f"},"created_time":"2023-05-21T00:20:00.000Z","last_edited_time":"2023-05-21T04:50:00.000Z","created_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"last_edited_by":{"object":"user","id":"f4f222d4-d508-405d-ba6c-da82ee26ee54"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"https://github.com/lacolaco/angular-comlink-example","link":{"url":"https://github.com/lacolaco/angular-comlink-example"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"https://github.com/lacolaco/angular-comlink-example","href":"https://github.com/lacolaco/angular-comlink-example"},{"type":"text","text":{"content":" ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" ","href":null}],"color":"default"}}]