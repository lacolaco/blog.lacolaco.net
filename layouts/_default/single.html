{{ define "main" }}
{{ $LastUpdatedAt := (time (index .Params "updated_at" | default .Date)) }}
<article class="">
  <header class="mb-4">
    <div class="meta leading-none">
      {{ if .Date -}}
      <span class="text-sm text-muted">{{ .Date.Format "2006-01-02" }}</span>
        {{ if $LastUpdatedAt.After .Date -}}
        <span class="text-sm text-muted">(Updated at: {{ (time .Params.updated_at).Format "2006-01-02" }})</span>
        {{ end -}}
      {{ end -}}
      {{ if .Params.tags -}}
      {{ end -}}
    </div>
    <h1 class="text-2xl font-bold leading-tight">{{ .Params.Emoji }} {{ .Title | markdownify | emojify }}</h1>
    <div class="py-1">
      {{ range .Params.tags -}}
      {{ partial "tag.html" . -}}
      {{ end -}}
    </div>
  </header>

  {{ if ($LastUpdatedAt.AddDate 1 0 0).Before now }}
  <div class="mb-4 flash bg-yellow-100/30 border-yellow-500">
    This post is possibly out of date.
  </div>
  {{ end }}

  <main class="markdown-body">
    {{ .Content }}
  </main>

  <section class="mt-4 flex justify-between content-center items-center space-x-2">
    <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-show-count="false">Tweet</a>
    <a href="https://b.hatena.ne.jp/entry/" class="hatena-bookmark-button" data-hatena-bookmark-layout="basic-label-counter" data-hatena-bookmark-lang="ja" title="このエントリーをはてなブックマークに追加"><img src="https://b.st-hatena.com/images/v4/public/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;" /></a>
    <div class="flex-auto"></div>
    <button class="px-2 py-1 text-default bg-default rounded-md border border-solid border-gray-700 hover:bg-muted" onclick="window.scrollTo(0, 0);">Scroll to top</button>
  </section>

</article>

<script async crossorigin="anonymous" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<script type="text/javascript" src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>
{{ end }}
